<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">First Steps Guide</title><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.0" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Qlustar_Cluster_OS-First_Steps_Guide-9.1-en-US-9.1-0" /><meta name="description" content="This document describes the first steps to perform after a fresh install of a Qlustar head-node." /><link rel="stylesheet" type="text/css" href="../../../../../chrome.css" /><link rel="stylesheet" type="text/css" href="../../../../../db4.css" /><link rel="stylesheet" type="text/css" href="../../../../../qlustar/en-US/css/brand.css" /><link rel="stylesheet" type="text/css" href="../../../../../print.css" media="print" /><script type="text/javascript" src="../../../../../jquery-1.7.1.min.js"></script><script type="text/javascript" src="../../../../labels.js"></script><script type="text/javascript" src="../../../../../toc.js"></script><script type="text/javascript">
		current_book = 'First_Steps_Guide';
		current_version = '9.1';
		current_product = 'Qlustar_Cluster_OS';
	   
                toc_path = '../../../..';
		loadMenu();
          </script></head><body class="toc_embeded "><div id="navigation"></div><div id="floatingtoc" class="hidden"></div><p id="title"><a class="left" href="https://qlustar.com"><img alt="Product Site" src="../../../../../qlustar/en-US/images//image_left.png" /></a><a class="right" href="http://qlustar.com/book/docs/main"><img alt="Documentation Site" src="../../../../../qlustar/en-US/images//image_right.png" /></a></p><ul class="docnav"><li class="home">First Steps Guide</li></ul><div xml:lang="en-US" class="book" lang="en-US"><div class="titlepage"><div><div class="producttitle"><span xmlns:d="http://docbook.org/ns/docbook" class="productname">Qlustar Cluster OS</span> <span xmlns:d="http://docbook.org/ns/docbook" class="productnumber">9.1</span></div><div><h1 class="title"><a id="idm139640066454976"></a>First Steps Guide</h1></div><div><h2 class="subtitle"> This document describes the first steps to perform after a fresh install of a Qlustar head-node. </h2></div><div><h3 class="corpauthor">
		<span class="inlinemediaobject"><img src="../../../../../qlustar/en-US/images/qlustar-logo.png" /></span>

	</h3></div><div><div xml:lang="en-US" class="authorgroup" lang="en-US">
	<div class="author"><h3 class="author"><span class="firstname">Qlustar</span> <span class="surname">Documentation Team</span></h3><div class="affiliation">
			<span xmlns:d="http://docbook.org/ns/docbook" class="orgname">Q-Leap Networks GmbH</span>

		</div><code class="email"><a class="email" href="mailto:qlustar-docs@q-leap.com">qlustar-docs@q-leap.com</a></code></div>
</div></div><div><div class="legalnotice"><a id="idm139640066416672"></a><h1 class="legalnotice">Legal Notice</h1>
	<div class="para">
		Copyright <span class="trademark"></span>©2015 Q-Leap Networks GmbH
	</div>
	<div class="para">
		This material may only be distributed subject to the terms and conditions set forth in the GNU Free Documentation License (GFDL), V1.2 or later (the latest version is presently available at http://www.gnu.org/licenses/fdl.txt).
	</div>
	<div class="para">
		The Qlustar license can be found at <code class="filename">/usr/share/qlustar/LICENSE.html</code> on an installed Qlustar head-node.
	</div>
</div></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p>
		<div class="para">
			This document describes the first steps to perform after a fresh install of a Qlustar head-node.
		</div>

	</div></div></div></div><div class="toc"><dl class="toc"><dt><span class="preface"><a href="#idm139640066437824">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139640066403776">1. Qlustar Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139640066401936">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#idm139640066401680">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#idm139640066401424">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#idm139640066354544">2. Feedback requested</a></span></dt></dl></dd><dt><span class="chapter"><a href="#First-boot">1. First Boot</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Qlustar-Initial-Config">1.1. Running qlustar-initial-config</a></span></dt><dt><span class="section"><a href="#sec-Final-Reboot">1.2. Final Reboot</a></span></dt><dt><span class="section"><a href="#sec-Starting-Virtual-Demo-Cluster">1.3. Starting the virtual Demo Cluster</a></span></dt><dt><span class="section"><a href="#sec-Installed-Services">1.4. Installed Services</a></span></dt><dt><span class="section"><a href="#sec-Adding-Software">1.5. Adding Software</a></span></dt><dt><span class="section"><a href="#sec-Running-QluMan">1.6. Running the Cluster Manager QluMan</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-QluMan-Token">1.6.1. Generating a one time token for the first admin login</a></span></dt><dt><span class="section"><a href="#sec-Enclosure-View">1.6.2. Starting the QluMan GUI</a></span></dt><dt><span class="section"><a href="#sec-QluMan-Workstation">1.6.3. Installing the QluMan GUI on a workstation</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-Creating-Users">1.7. Creating Users</a></span></dt><dt><span class="section"><a href="#sec-Compiling-MPI">1.8. Compiling an MPI program</a></span></dt><dt><span class="section"><a href="#sec-Running-MPI">1.9. Running an MPI Job</a></span></dt><dt><span class="section"><a href="#sec-Running-Linpack">1.10. Running the Linpack benchmark</a></span></dt></dl></dd><dt><span class="appendix"><a href="#idm139640066185808">A. Revision History</a></span></dt><dt><span class="index"><a href="#idm139640066180128">Index</a></span></dt></dl></div>
	
	 <div xml:lang="en-US" class="preface" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139640066437824">
      ⁠</a>Preface</h1></div></div></div>
	
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139640066403776">
      ⁠</a>1. Qlustar Document Conventions</h2></div></div></div>
	
	 <div class="para">
		Qlustar manuals use the following conventions to highlight certain words and phrases and draw attention to specific pieces of information.
	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139640066401936">
      ⁠</a>1.1. Typographic Conventions</h3></div></div></div>
		
		 <div class="para">
			Four typographic conventions are used to call attention to specific words and phrases. These conventions, and the circumstances they apply to, are as follows.
		</div>
		 <div class="para">
			<code class="literal">Mono-spaced Bold</code>
		</div>
		 <div class="para">
			Used to highlight system input, including shell commands, file names and paths. Also used to highlight keys and key combinations. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To see the contents of the file <code class="filename">my_next_bestselling_novel</code> in your current working directory, enter the <code class="command">cat my_next_bestselling_novel</code> command at the shell prompt and press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>

		</blockquote></div>
		 <div class="para">
			The above includes a file name, a shell command and a key, all presented in mono-spaced bold and all distinguishable thanks to context.
		</div>
		 <div class="para">
			Key combinations can be distinguished from an individual key by the plus sign that connects each part of a key combination. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>
			 <div class="para">
				Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> to switch to a virtual terminal.
			</div>

		</blockquote></div>
		 <div class="para">
			The first example highlights a particular key to press. The second example highlights a key combination: a set of three keys pressed simultaneously.
		</div>
		 <div class="para">
			If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code class="literal">mono-spaced bold</code>. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				File-related classes include <code class="classname">filesystem</code> for file systems, <code class="classname">file</code> for files, and <code class="classname">dir</code> for directories. Each class has its own associated set of permissions.
			</div>

		</blockquote></div>
		 <div class="para">
			<span class="application"><strong>Proportional Bold</strong></span>
		</div>
		 <div class="para">
			This denotes words or phrases encountered on a system, including application names; dialog-box text; labeled buttons; check-box and radio-button labels; menu titles and submenu titles. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Choose <span class="guimenu"><strong>System</strong></span> → <span class="guisubmenu"><strong>Preferences</strong></span> → <span class="guimenuitem"><strong>Mouse</strong></span> from the main menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the <span class="guilabel"><strong>Buttons</strong></span> tab, select the <span class="guilabel"><strong>Left-handed mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).
			</div>
			 <div class="para">
				To insert a special character into a <span class="application"><strong>gedit</strong></span> file, choose <span class="guimenu"><strong>Applications</strong></span> → <span class="guisubmenu"><strong>Accessories</strong></span> → <span class="guimenuitem"><strong>Character Map</strong></span> from the main menu bar. Next, choose <span class="guimenu"><strong>Search</strong></span> → <span class="guimenuitem"><strong>Find…</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span> field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back to your document and choose <span class="guimenu"><strong>Edit</strong></span> → <span class="guimenuitem"><strong>Paste</strong></span> from the <span class="application"><strong>gedit</strong></span> menu bar.
			</div>

		</blockquote></div>
		 <div class="para">
			The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in proportional bold and all distinguishable by context.
		</div>
		 <div class="para">
			<code class="command"><em class="replaceable">Mono-spaced Bold Italic</em></code> or <span class="application"><strong><em class="replaceable">Proportional Bold Italic</em></strong></span>
		</div>
		 <div class="para">
			Whether mono-spaced bold or proportional bold, the addition of italics indicates replaceable or variable text. Italics denotes text you do not input literally or displayed text that changes depending on circumstance. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable">username</em>@<em class="replaceable">domain.name</em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</div>
			 <div class="para">
				The <code class="command">mount -o remount <em class="replaceable">file-system</em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</div>
			 <div class="para">
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable">package</em></code> command. It will return a result as follows: <code class="command"><em class="replaceable">package-version-release</em></code>.
			</div>

		</blockquote></div>
		 <div class="para">
			Note the words in bold italics above: username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</div>
		 <div class="para">
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Publican is a <em class="firstterm">DocBook</em> publishing system.
			</div>

		</blockquote></div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139640066401680">
      ⁠</a>1.2. Pull-quote Conventions</h3></div></div></div>
		
		 <div class="para">
			Terminal output and source code listings are set off visually from the surrounding text.
		</div>
		 <div class="para">
			Output sent to a terminal is set in <code class="computeroutput">mono-spaced roman</code> and presented thus:
		</div>
		 
<pre class="screen">books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs
</pre>
		 <div class="para">
			Commands to be executed on certain nodes of a cluster or the admins workstation are indicated by using descriptive shell prompts including user and hostname. Note that by default, the shell prompt on Qlustar nodes always ends in the newline character, thus commands are typed on the line following the prompt. As mentioned above, the command itself is shown in <code class="computeroutput">mono-spaced bold</code> and the output of a command in <code class="computeroutput">mono-spaced roman</code>. Examples:
		</div>
		 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">echo "I'm executed by root on a head-node"</code>
I'm executed by root on a head-node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@beo-01 ~ #</code>
<code class="command">echo "I'm executed by root on a compute node"</code>
I'm executed by root on a compute node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">echo "I'm executed by root on a storage node"</code>
I'm executed by root on a storage node
</pre>
		 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $ </code>
<code class="command">echo "I'm executed by user admin on the admins workstation"</code>
I'm executed by user admin on the admins workstation
</pre>
		 <div class="para">
			Source-code listings are also set in <code class="computeroutput">mono-spaced roman</code> but add syntax highlighting as follows:
		</div>
		 <pre xml:lang="en-US" class="programlisting" lang="en-US"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">book</span>.<span xmlns="" class="perl_Function">jca</span>.<span xmlns="" class="perl_Function">ex1</span>;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.naming.InitialContext;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ExClient
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String args[]) 
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      InitialContext iniCtx = <span xmlns="" class="perl_Keyword">new</span> InitialContext();
<span xmlns="" class="line">​</span>      Object         ref    = iniCtx.<span xmlns="" class="perl_Function">lookup</span>(<span xmlns="" class="perl_String">"EchoBean"</span>);
<span xmlns="" class="line">​</span>      EchoHome       home   = (EchoHome) ref;
<span xmlns="" class="line">​</span>      Echo           echo   = home.<span xmlns="" class="perl_Function">create</span>();
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Created Echo"</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Echo.echo('Hello') = "</span> + echo.<span xmlns="" class="perl_Function">echo</span>(<span xmlns="" class="perl_String">"Hello"</span>));
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139640066401424">
      ⁠</a>1.3. Notes and Warnings</h3></div></div></div>
		
		 <div class="para">
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Notes are tips, shortcuts or alternative approaches to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition">
			<div class="para">
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring a box labeled “Important” will not cause data loss but may cause irritation and frustration.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition">
			<div class="para">
				Warnings should not be ignored. Ignoring warnings will most likely cause data loss.
			</div>

		</div></div>

	</div>
</div>
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139640066354544">
      ⁠</a>2. Feedback requested</h2></div></div></div>
	
	<a id="idm139640066353344" class="indexterm"></a>
	<div class="para">
		Contact <code class="email"><a class="email" href="mailto:qlustar-docs@qlustar.com">qlustar-docs@qlustar.com</a></code> to report errors or missing pieces in this documentation.
	</div>
</div>
</div>
	  <div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="First-boot">
      ⁠</a>Chapter 1. First Boot</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Qlustar-Initial-Config">1.1. Running qlustar-initial-config</a></span></dt><dt><span class="section"><a href="#sec-Final-Reboot">1.2. Final Reboot</a></span></dt><dt><span class="section"><a href="#sec-Starting-Virtual-Demo-Cluster">1.3. Starting the virtual Demo Cluster</a></span></dt><dt><span class="section"><a href="#sec-Installed-Services">1.4. Installed Services</a></span></dt><dt><span class="section"><a href="#sec-Adding-Software">1.5. Adding Software</a></span></dt><dt><span class="section"><a href="#sec-Running-QluMan">1.6. Running the Cluster Manager QluMan</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-QluMan-Token">1.6.1. Generating a one time token for the first admin login</a></span></dt><dt><span class="section"><a href="#sec-Enclosure-View">1.6.2. Starting the QluMan GUI</a></span></dt><dt><span class="section"><a href="#sec-QluMan-Workstation">1.6.3. Installing the QluMan GUI on a workstation</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-Creating-Users">1.7. Creating Users</a></span></dt><dt><span class="section"><a href="#sec-Compiling-MPI">1.8. Compiling an MPI program</a></span></dt><dt><span class="section"><a href="#sec-Running-MPI">1.9. Running an MPI Job</a></span></dt><dt><span class="section"><a href="#sec-Running-Linpack">1.10. Running the Linpack benchmark</a></span></dt></dl></div>
		
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Qlustar-Initial-Config">
      ⁠</a>1.1. Running qlustar-initial-config</h2></div></div></div>
			
			 <div class="para">
				After the server has booted the newly installed Qlustar OS, log in as root and start the post-install configuration process by running the command 
<pre class="screen">
/usr/sbin/qlustar-initial-config
</pre>

			</div>
			 <div class="para">
				This will first thoroughly check your network connectivity and then complete the installation by executing the remaining configuration steps as detailed below. During the package update process you might be asked whether to keep locally modified configuration files. In this case always choose the option 
<pre class="screen">
keep the local version currently installed.
</pre>

			</div>
			 <div class="task"><a id="task-Remaining-Config-Steps">
      ⁠</a><p class="title"><strong>Remaining configuration steps run-through</strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><div class="para">
					If your chosen hostname can't be resolved via <em class="firstterm">DNS</em>, you will see a non-fatal error message reminding you that the hostname should be registered in some (external) name service (typically DNS).
				</div><ol class="1"><li class="step">
					<p class="title"><strong>Cluster name</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-1.png" width="85%" alt="Name the cluster" /><div class="caption">
							<div class="para">
								Name the cluster
							</div>
							</div></div>
						 First, you will be asked for the name of the new Qlustar cluster. This can be any string and is used in some places like the <em class="firstterm">slurm</em> or <em class="firstterm">ganglia</em> configuration.
					</div>

				</li><li class="step">
					<p class="title"><strong>NIS Setup</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-3.png" width="85%" alt="Setting up NIS" /><div class="caption">
							<div class="para">
								Setting up NIS
							</div>
							</div></div>
						 Next is the setup of the <em class="firstterm">NIS</em> database. Just confirm the suggested NIS server by pressing <span class="keycap"><strong>Ctrl-D</strong></span>+<span class="keycap"><strong>Enter</strong></span> to proceed.
					</div>

				</li><li class="step">
					<p class="title"><strong>Configuring ssh</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-4.png" width="85%" alt="Creating an SSH key" /><div class="caption">
							<div class="para">
								Creating an SSH key
							</div>
							</div></div>
						 An <em class="firstterm">ssh key</em> for the root user is generated next. You can enter an optional <em class="firstterm">pass-phrase</em> for it. Note however, that a non-empty pass-phrase will have the effect that you will have to specify it any time, you try to ssh to another host in the cluster. If you don't want that, work without a pass-phrase. This key, will be used to enable login by root to any node of the cluster without specifying a password.
					</div>

				</li><li class="step">
					<p class="title"><strong>Configuring Nagios</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-5.png" width="85%" alt="Setting the Nagios password" /><div class="caption">
							<div class="para">
								Setting the Nagios password
							</div>
							</div></div>
						 The configuration of <em class="firstterm">Nagios</em> requires you to choose a password for the Nagios admin account. Please type in the password twice.
					</div>

				</li><li class="step">
					<p class="title"><strong>Configuring QluMan</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-7.png" width="85%" alt="Bootstrapping QluMan" /><div class="caption">
							<div class="para">
								Bootstrapping QluMan
							</div>
							</div></div>
						 <span class="application"><strong>QluMan</strong></span>, the Qlustar management framework (see the QluMan Guide), requires a <em class="firstterm">mysql</em> (mariaDB) database. You will be asked for the password of the QluMan DB user next. After entering it, the QluMan database and configuration settings will be initialized. This can take a while, since a number of OS images and chroots (see <a class="xref" href="#sec-Adding-Software">Section 1.5, “Adding Software”</a>) will be generated during this step.
					</div>

				</li><li class="step">
					<p class="title"><strong>Configuring Slurm</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-9.png" width="85%" alt="Setting the Slurm DB password" /><div class="caption">
							<div class="para">
								Setting the Slurm DB password
							</div>
							</div></div>
						 If slurm was selected as the cluster resource manager, its configuration requires the generation of a <em class="firstterm">munge key</em> and the specification of a password for the slurm mysql account. Enter the chosen password twice when asked for it. Note that the slurm database daemon is also being configured by this process. Hence, you will be ready to take full advantage of the accounting features of slurm.
					</div>

				</li><li class="step">
					<p class="title"><strong>Configuring the virtual Demo Cluster</strong></p>
					 <div class="para">
						<div class="mediaobject"><img src="images/initial-config-10.png" width="85%" alt="Setting up the virtual demo cluster" /><div class="caption">
							<div class="para">
								Setting up the virtual demo cluster
							</div>
							</div></div>
						 If you have chosen to setup some virtual demo nodes during installation, you will be asked for the user name of a test account that can be used to explore the cluster. The account will be generated with the default password for the cluster (see the information on the screen).
					</div>

				</li><li class="step">
					<p class="title"><strong>Setting the MariaDB root password</strong></p>
					 <div class="para">
						To conclude the configuration procedure, you will be asked to set the password for the MariaDB/MySQL root account. Setting a password here is important. It prevents unauthorized access to the Qlustar or other databases on your head-node.
					</div>

				</li></ol></div></div>
		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Final-Reboot">
      ⁠</a>1.2. Final Reboot</h2></div></div></div>
			
			 <div class="para">
				Please reboot again once all the previous steps are complete (e.g. by typing the command <code class="command">shutdown -r</code> now ). After the head-node is up and running again, test its network connectivity by pinging its public IP address (hostname). Do the same for the virtual front-end node, if you have chosen to configure one. It should have booted as well after the head-node is up and running. You can try to login to it using ssh. A test mail should have been sent to the e-mail address(es) you specified during the installation. If you didn't receive one, review your settings in <code class="filename">/etc/aliases</code> and/or <code class="filename">/etc/postfix/main.cf</code>. In case some of them are wrong, you can execute 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">dpkg-reconfigure postfix</code>
</pre>
				 to modify them.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Starting-Virtual-Demo-Cluster">
      ⁠</a>1.3. Starting the virtual Demo Cluster</h2></div></div></div>
			
			 <div class="para">
				If you have chosen to configure a virtual demo-cluster, you can start it by executing the command: 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">demo-system-start</code>
</pre>
				 and to stop it 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">demo-system-stop</code>
</pre>
				 These commands use the configuration file <code class="filename">/etc/qlustar/vm-configs/demo-system.conf</code>. If you find that the (automatically calculated) amount of RAM per VM is not right, you can change the variable <code class="varname">CN_MEM</code> to some other value in that file. The consoles of the virtual nodes (and also of the virtual front-end node if you chose to set one up) are accessible in a screen session. Type 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">console-fe-vm</code>
</pre>
				 to attach to the console session of the virtual FE node and 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">console-demo-vms</code>
</pre>
				 to attach to the console sessions of the virtual demo cluster nodes. Note that the screen command character is <span class="keycap"><strong>Ctrl-t</strong></span>. To detach from the screen session, type <span class="keycap"><strong>Ctrl-t</strong></span>+<span class="keycap"><strong>d</strong></span>, to switch to the next/previous screen type <span class="keycap"><strong>Ctrl-t</strong></span>+<span class="keycap"><strong>n</strong></span> / <span class="keycap"><strong>Ctrl-t</strong></span>+<span class="keycap"><strong>p</strong></span>. More details on the usage of screen (or byobu, the Debian customized version we use) are available in the corresponding <code class="literal">man pages</code>. To check whether all nodes are up and running, type 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">dsh -a uptime</code>
</pre>
				 <code class="command">dsh</code> or <code class="command">pdsh</code> can be used to execute arbitrary commands on groups of nodes. Check their <code class="literal">man pages</code> and the corresponding section in the QluMan guide for further information.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Installed-Services">
      ⁠</a>1.4. Installed Services</h2></div></div></div>
			
			 <div class="para">
				At this stage, the following services are configured and running on your head-node: 
				<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
						<div class="para">
							<span class="application"><strong>Nagios3</strong></span> (monitoring/alerts) with its web interface at http://<em class="replaceable">headnode</em>/nagios3/. Login as user <code class="literal">nagiosadmin</code> with the password you specified previously.
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>Ganglia</strong></span> (monitoring) at http://<em class="replaceable">headnode</em>/ganglia/
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>DHCP/ATFTP</strong></span> boot services
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>NTP</strong></span> time server as client and server
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>NFS</strong></span>-Server with exports defined in <code class="filename">/etc/exports</code>
						</div>

					</li><li class="listitem">
						<div class="para">
							Depending on your choice of software packages: <span class="application"><strong>Slurm</strong></span> (DB + control daemon), <span class="application"><strong>Torque</strong></span> server, <span class="application"><strong>Corosync</strong></span> (HA), <span class="application"><strong>Munge</strong></span> (authentification for slurm/torque). Note that among the latter only slurm and munge are configured automatically during installation. Torque and Corosync require a manual configuration.
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>NIS</strong></span> server
						</div>

					</li><li class="listitem">
						<div class="para">
							Mail service <span class="application"><strong>Postfix</strong></span>
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>MariaDB</strong></span> server (mysql fork)
						</div>

					</li><li class="listitem">
						<div class="para">
							<span class="application"><strong>QluMan</strong></span> server (Qlustar Management)
						</div>

					</li></ul></div>
				 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
					<div class="para">
						Please note, that you shouldn't install the default Ubuntu MySQL server packages on the head-node, since QluMan requires <a href="https://mariadb.org/___blank___">MariaDB</a> and packages of the latter conflict with the MySQL packages. MariaDB is a complete and compatible substitute for MySQL.
					</div>

				</div></div>

			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Adding-Software">
      ⁠</a>1.5. Adding Software</h2></div></div></div>
			
			 <div class="para">
				As explained <a href="../QluMan_Guide/index.html#sec-UnionFS-Chroots___blank___"> elsewhere</a>, the RAM-based root file-system of a Qlustar compute/storage node can be supplemented by a global NFS-exported chroot to allow access to software not already contained in the boot images themselves. During installation, one chroot per selected <a href="../Installation_Guide/index.html#Edge-Platform-Selection___blank___">edge platform</a> was automatically created. The chroots are located at <code class="filename">/srv/apps/chroots/<em class="replaceable">chroot name</em></code>, where <em class="replaceable">chroot name</em> would be trusty or wheezy. Each of them contains a full-featured installation of the corresponding Qlustar edge platform. To change into a chroot, convenience bash shell aliases of the form chroot-<em class="replaceable">chroot name</em> are defined for the root user on the head-node. You may use them as follows (e.g. for Debian/Wheezy, if it was selected at install): 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">chroot-wheezy</code>
</pre>
				 Once you're inside a chroot, you can use the standard Debian/Ubuntu tools to control its software packages, e.g. 
<pre class="screen">
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">apt-get update</code>
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">apt-get dist-upgrade</code>
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">apt-get install <em class="replaceable">package</em></code>
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">exit</code>
</pre>
				 The nice thing about this mechanism is that software from packages installed in a particular chroot will be available instantaneously on all compute/storage nodes that are configured to use that chroot. Important: There is usually no need to install additional packages on the head-node itself (only in the chroot). Software packages installed directly on the head-node will not be visible cluster-wide.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Running-QluMan">
      ⁠</a>1.6. Running the Cluster Manager QluMan</h2></div></div></div>
			
			 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-QluMan-Token">
      ⁠</a>1.6.1. Generating a one time token for the first admin login</h3></div></div></div>
				
				 <div class="para">
					The Qlustar management GUI <span class="application"><strong>qluman-qt</strong></span> uses public/private keys for both encryption and authentication. For this there first needs to be an exchange of public keys between the client and the server. Normally this is done by an user with admin role through the GUI. But for the first admin login this must be accomplished using a root shell on the head-node: 
<pre class="screen">
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">qluman-cli --gencert</code>
Generating one-time login token for user 'admin':
Cluster  = QL
Hostname = beosrv-c
Port     = 6001
Pubkey   = b'T)5o]@hsjB2qyY&gt;eb:7)8@BA?idMf&gt;kh%^cRhV/#'
Enter new pin for one-time token: 
Server infos and one-time login token for user 'admin':
---[ CUT FROM HERE ]---
00000191c2MAAcMuyCNQR0DPILx-y-BLCHpITepvG7R3I6452Cdqiu98u4PsM1VWFGqEAG
V8YN9K5kyJKHtQHGTB1JqZIwt4q0PLArnyNmhCkGLS6VxWWBDtBB9_dGPqLH4OeQ7sZ725
6XDGgrKo4Dldc_wuCALegczjYV8oc_yZ07X0oIYlzhDlDpk-hTm5bfW8_x904YF0wcv-G-
nK1ztRg854O7pC_p1YpEJuzWFqWv0e7ffi-ZgkxwfdGGKF3imp4d9yGY4h6Ixdn8TLG2gk
Z4XQ4dymvSO9hp8mUabfq7prVUOTYeChB2pOrom8XSQxjOoe4Yll5yv6da_CdGq50KrO8Q
C12Z4Pz2eSbvqXbo7c7DdLRjMc0v0Km3WyljgdsDYbKC5iT75Bgryc
---[ TO HERE ]---
</pre>
					 The token can also be saved directly into a file using the <em class="parameter"><code>-o &lt;filename&gt;</code></em> option and the user the token is for can be specified by the <em class="parameter"><code>-u &lt;username&gt;</code></em> option like this: 
<pre class="screen">
<code class="prompt">(trusty) 0 root@cl-head ~ #</code>
<code class="command">qluman-cli --gencert -u admin -o token</code>
Generating one-time login token for user 'admin':
Cluster  = QL
Hostname = beosrv-c
Port     = 6001
Pubkey   = b'T)5o]@hsjB2qyY&gt;eb:7)8@BA?idMf&gt;kh%^cRhV/#'
Enter new pin for one-time token: 
Server infos and one-time login token for user 'admin' saved as 'token'
</pre>
					 The server infos and one-time login token are protected by the pin you just entered. This is important when the data is sent via unencrypted channels (e.g. email or chat programs) to users or when it is stored on a shared filesystem like NFS. The pin does not need to be a strong password. It is only used to make it non-trivial to use an intercepted token. The token can also only be used once. So once you use it yourself it becomes useless to anybody else. On the other hand, if somebody intercepts the token, guesses the pin and uses the token it will no longer work for you and you know something is wrong.
				</div>

			</div>
			 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Enclosure-View">
      ⁠</a>1.6.2. Starting the QluMan GUI</h3></div></div></div>
				
				 <div class="para">
					During installation, the Qlustar management GUI <em class="firstterm">qluman-qt</em> is installed for the virtual FE node, if one has been setup, otherwise on the head-node. If you like to have it available on the head-node in any case, just install it there like any other package: 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">apt-get install qluman-qt</code>
</pre>
					 The installation on the head-node is not done by default, since it pulls and installs a lot of other packages that qluman-qt depends on, which will slow down updates. If you have the possibility, <a class="link" href="#sec-QluMan-Workstation">install qluman-qt on your workstation</a> and work from there. If not, you can launch qluman-qt remotely on the node, where it is installed (FE or head-node), per ssh (with X11 forwarding enabled / <em class="parameter"><code>-X</code></em> option) as follows: 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $</code>
<code class="command">ssh -X root@servername qluman-qt</code>
</pre>
					 This should bring up the <em class="firstterm">Management Console</em>. Using the one-time token generated as explained above you will now be able to add the cluster to the list of available connections. (Details about this are explained in the <a href="../QluMan_Guide/index.html#sec-add-cluster___blank___">QluMan Guide</a>).
				</div>

			</div>
			 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-QluMan-Workstation">
      ⁠</a>1.6.3. Installing the QluMan GUI on a workstation</h3></div></div></div>
				
				 <div class="para">
					If your workstation runs one of the edge platforms currently supported by Qlustar, you can install the QluMan GUI directly there. This is recommended, since the <span class="bold bold"><strong>responsiveness</strong></span> of a GUI, that is locally started, is a lot better as compared to one that is running via remote X11. To install the qluman-qt package on your workstation, you need to add the correct Qlustar repository to your <code class="literal">apt sources list</code>. This can be accomplished by executing the following as root on your workstation. 
<pre class="screen">
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">dpkg -l software-properties-common &gt; /dev/null 2&gt;&amp;1 || apt-get install software-properties-common</code>
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">gpg --no-default-keyring --primary-keyring /etc/apt/trusted.gpg --recv-keys E6BA110F3C0BC307</code>
</pre>
					 On a <code class="literal">Debian/Wheezy</code> workstation, you should use <span class="application"><strong>python-software-properties</strong></span> instead of <span class="application"><strong>software-properties-common</strong></span> in the first command. The second one should have imported the <em class="firstterm">Qlustar PGP archive key</em>, and must output a line like: 
<pre class="screen">
gpg: key 3C0BC307: public key "Q-Leap Networks (automatic archive key) &lt;info@q-leap.com&gt;" imported
</pre>

				</div>
				 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
					<div class="para">
						The <span class="application"><strong>gpg</strong></span> command above might fail, the first time you execute it. This happens, if <span class="application"><strong>gpg</strong></span> has never been executed before for the root user. In this case, simply execute it a second time.
					</div>

				</div></div>
				 <div class="para">
					Then if you have <code class="literal">Ubuntu/Trusty</code> execute: 
<pre class="screen">
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">add-apt-repository 'deb http://repo.qlustar.com/repo/qluman 9.1-trusty main non-free'</code>
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">add-apt-repository 'deb http://repo.qlustar.com/repo/qluman
9.1-trusty-proposed-updates main non-free'</code>
</pre>
					 Else for <code class="literal">Debian/Wheezy</code>: 
<pre class="screen">
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">add-apt-repository 'deb http://repo.qlustar.com/repo/qluman 9.1-wheezy main non-free'</code>
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">add-apt-repository 'deb http://repo.qlustar.com/repo/qluman 9.1-wheezy-proposed-updates main non-free'</code>
</pre>
					 After this you can install qluman-qt the usual way: 
<pre class="screen">
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">apt-get update</code>
<code class="prompt">0 root@workstation ~ #</code>
<code class="command">apt-get install qluman-qt</code>
</pre>

				</div>
				 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
					<div class="para">
						On Ubuntu you need to have the <code class="literal">universe repository</code> enabled in your <code class="literal">apt sources list</code> for the above command to succeed.
					</div>

				</div></div>
				 <div class="para">
					Finally, the QluMan GUI can then be launched as an ordinary user in a shell on the workstation: 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $</code>
<code class="command">qluman-qt &amp;</code>
</pre>
					 <div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition">
						<div class="para">
							The versions of the QluMan packages on the workstation should be the same as on the head-node(s) to ensure correct operation. Some unequal version combinations might work too, but are usually not well tested.
						</div>

					</div></div>

				</div>

			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Creating-Users">
      ⁠</a>1.7. Creating Users</h2></div></div></div>
			
			 <div class="para">
				Authenticating users in the cluster can be done in many ways, hence the creation of users depends on what method is used. The most basic method is to use NIS. If there is no requirement of keeping user authentification in sync with some external service like e.g. <em class="firstterm">LDAP</em> this is sufficient. A NIS database is setup during the initial installation process and cluster users can be authenticated against it. Creating accounts that should use other authentification mechanisms is more complex and beyond the scope of this guide. Some options are explained in the admin manual. Add a test user by executing a command like this: 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">adduser.sh -u test -n "Test User"</code>
</pre>
				 The behavior of the <span class="application"><strong>adduser.sh</strong></span> script can be customized in its configuration file <code class="filename">/etc/qlustar/common/adduser.cf</code>. It also contains the definition of the initial user password.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Compiling-MPI">
      ⁠</a>1.8. Compiling an MPI program</h2></div></div></div>
			
			 <div class="para">
				<a href="http://www.mcs.anl.gov/research/projects/mpi/___blank___">MPI (Message Passing Interface)</a> is the de facto standard for distributed parallel programming on Linux clusters. The default <em class="firstterm">MPI</em> variant in Qlustar is <em class="firstterm">OpenMpi</em> and is automatically installed in the default chroot during installation. You can test the correct installation of MPI with two small "hello world" test programs (one in C the other one in FORTRAN90) as the test user you created earlier: Login on the front-end node as this user and execute 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">mpicc.openmpi-gcc -o hello-world-c hello-world.c</code>
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">mpif90.openmpi-gcc -o hello-world-f hello-world.f90</code>
</pre>
				 After this you should have created two executables. Check it with 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">ls -l hello-world-?</code>
</pre>
				 Now we're prepared to test the queuing system with the two programs.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Running-MPI">
      ⁠</a>1.9. Running an MPI Job</h2></div></div></div>
			
			 <div class="para">
				Still logged in as the test user and assuming at least two demo nodes are started, we can submit the two "hello world" programs created previously as follows (commands are given for slurm): 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">OMPI_MCA_btl="tcp,self" salloc -N 2 --ntasks-per-node=2 -p demo \
srun hello-world-c</code>
</pre>
				 This will run the job interactively on 2 nodes with 2 processes each (total of 4 processes). You should obtain an output like this: 
<pre class="screen">
salloc: Granted job allocation 19
cpu_bind=NULL - beo-201, task  0  0 [13959]: mask 0x1
cpu_bind=NULL - beo-202, task  3  1 [13607]: mask 0x2
cpu_bind=NULL - beo-202, task  2  0 [13606]: mask 0x1
cpu_bind=NULL - beo-201, task  1  1 [13960]: mask 0x2
Hello world from process 1 of 4
Hello world from process 3 of 4
Hello world from process 0 of 4
Hello world from process 2 of 4
salloc: Relinquishing job allocation 19
salloc: Job allocation 19 has been revoked.
</pre>
				 The lines starting with <em class="parameter"><code>cpu_bind=NULL</code></em> are new in Qlustar 9 and appear due to the fact, that we have enabled the verbose setting for the configuration of <em class="parameter"><code>cpusets</code></em> under slurm. They indicate the binding (<span class="bold bold"><strong>core affinity</strong></span>) of the separate MPI tasks to the CPUs/cores of the compute nodes. This is done by the slurm <span class="bold bold"><strong>cgroup plugin</strong></span>, that is now enabled by default. Binding of processes to cores guarantees data (memory) locality and thus improves performance on <em class="firstterm">NUMA systems</em>, since access to local memory is faster than to remote memory. Note that essentially all modern multi-socket (CPU) systems have a NUMA architecture these days (<span class="productname">Intel Xeon</span>, <span class="productname">AMD Opteron</span>, ...), so this is relevant.
			</div>
			 <div class="para">
				Similarly the F90 version can be submitted as a batch job using the script <code class="filename">hello-world-f90-slurm.sh</code> (to see the output, execute <code class="command">cat slurm-<em class="replaceable">job#</em>.out</code> after the job has finished): 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">sbatch -N 2 --ntasks-per-node=2 -p demo hello-world-f90-slurm.sh</code>
</pre>
				 Note that the environment variable <code class="envar">OMPI_MCA_btl="tcp,self"</code> is used in the above two examples to prevent error messages from not finding an <em class="firstterm">Infiniband network</em>. The latter would otherwise occur, because we compile OpenMPI to use an IB network per default and if not found, a TCP network is used as backup. <em class="firstterm">TCP</em> can also be set as the default in the OpenMPI config file (in the chroot, typically under <code class="filename">/srv/apps/chroots/trusty/etc/openmpi/x.y.z/openmpi-mca-params.conf</code>) by adding the entry: 
<pre class="screen">
btl = tcp,self
</pre>

			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Running-Linpack">
      ⁠</a>1.10. Running the Linpack benchmark</h2></div></div></div>
			
			 <div class="para">
				The <a href="http://www.top500.org/project/linpack/___blank___">Linpack benchmark</a> s used to classify supercomputers in the The <a href="http://www.top500.org/___blank___">Top 500</a> list. That's why on most clusters, it's probably run as one of the first parallel programs to check functionality, stability and performance. Qlustar comes with an optimized pre-compiled version of <em class="firstterm">Linpack</em> (using a current version of the <a href="http://www.openblas.net/___blank___">OpenBlas library</a>) , and a script to auto-generate the necessary input file given the number of nodes, processes per node and total amount of RAM for the run.
			</div>
			 <div class="para">
				The test user has some pre-defined shell aliases to simplify the submission of Linpack jobs. Type alias to see what's available. They are defined in <code class="filename">$HOME/.bash/alias</code>. Example submission (assuming you have 4 running demo nodes): 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">linp-4-demo-nodes</code>
</pre>
				 Check that the job is started (output should be similar): 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">squeue</code>
JOBID PARTITION     NAME     USER  ST  TIME  NODES  NODELIST(REASON)
   27      demo linstres     test   R  2:46      4     beo-[201-204]
</pre>
				 ssh to one of the nodes in the <code class="literal">NODELIST</code> and check with top that Linpack is running at full steam, like: 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">top</code>
  PID USER  PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                 
18307 test  20   0  354m 280m 2764 R  100 28.0   6:42.92 xhpl-openblas           
18306 test  20   0  354m 294m 2764 R   99 29.3   6:45.09 xhpl-openblas
</pre>
				 You can check the output of each Linpack run in the files: <code class="filename">$HOME/bench/hpl/run/job-<em class="replaceable">jobid</em>-*/openblas/job-<em class="replaceable">jobid</em>-*-<em class="replaceable">run#</em>.out</code> where <em class="replaceable">jobid</em> is the slurm <code class="literal">JOBID</code> (see the squeue command above) and <em class="replaceable">run#</em> is an integer starting from 1. The way the script is designed, it will run indefinitely, restarting Linpack in an infinite loop. So to stop it, you need to cancel the job like 
<pre class="screen">
<code class="prompt">0 testuser@cl-front ~ $</code>
<code class="command">scancel <em class="replaceable">jobid</em></code>
</pre>

			</div>

		</div>

	</div>
	  <div xml:lang="en-US" class="appendix" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139640066185808">
      ⁠</a>Appendix A. Revision History</h1></div></div></div>
	
	 <div class="revhistory"><table summary="Revision History"><tr><th align="left" valign="top" colspan="3"><strong>Revision History</strong></th></tr>
		<tr><td align="left">Revision 9.1-0</td><td align="left">Thu Jul 31 2015</td><td align="left"><span class="author"><span class="firstname">Qlustar</span> <span class="surname">Doc Team</span></span></td></tr><tr><td align="left" colspan="3">
				<table border="0" summary="Simple list" class="simplelist"><tr><td>Initial version</td></tr></table>

			</td></tr>

	</table></div>
</div>
	 <div class="index"><div class="titlepage"><div><div><h1 class="title"><a id="idm139640066180128">
      ⁠</a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>F</h3><dl><dt>feedback</dt><dd><dl><dt>contact information for Qlustar, <a class="indexterm" href="#idm139640066354544">Feedback requested</a></dt></dl></dd></dl></div></div></div>
</div><div id="site_footer"></div><script type="text/javascript">
			$("#site_footer").load("../../../../../footer.html");
		</script></body></html>