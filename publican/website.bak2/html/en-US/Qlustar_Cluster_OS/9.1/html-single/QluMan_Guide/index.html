<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">QluMan Guide</title><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.0" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Qlustar_Cluster_OS-QluMan_Guide-9.1-en-US-9.1-0" /><meta name="description" content="This is the operation manual for QluMan, the Qlustar cluster management framework." /><link rel="stylesheet" type="text/css" href="../../../../../chrome.css" /><link rel="stylesheet" type="text/css" href="../../../../../db4.css" /><link rel="stylesheet" type="text/css" href="../../../../../qlustar/en-US/css/brand.css" /><link rel="stylesheet" type="text/css" href="../../../../../print.css" media="print" /><script type="text/javascript" src="../../../../../jquery-1.7.1.min.js"></script><script type="text/javascript" src="../../../../labels.js"></script><script type="text/javascript" src="../../../../../toc.js"></script><script type="text/javascript">
		current_book = 'QluMan_Guide';
		current_version = '9.1';
		current_product = 'Qlustar_Cluster_OS';
	   
                toc_path = '../../../..';
		loadMenu();
          </script></head><body class="toc_embeded "><div id="navigation"></div><div id="floatingtoc" class="hidden"></div><p id="title"><a class="left" href="https://qlustar.com"><img alt="Product Site" src="../../../../../qlustar/en-US/images//image_left.png" /></a><a class="right" href="http://qlustar.com/book/docs/main"><img alt="Documentation Site" src="../../../../../qlustar/en-US/images//image_right.png" /></a></p><ul class="docnav"><li class="home">QluMan Guide</li></ul><div xml:lang="en-US" class="book" lang="en-US"><div class="titlepage"><div><div class="producttitle"><span xmlns:d="http://docbook.org/ns/docbook" class="productname">Qlustar Cluster OS</span> <span xmlns:d="http://docbook.org/ns/docbook" class="productnumber">9.1</span></div><div><h1 class="title"><a id="idm139946987925408"></a>QluMan Guide</h1></div><div><h2 class="subtitle"> This is the operation manual for QluMan, the Qlustar cluster management framework. </h2></div><div><h3 class="corpauthor">
		<span class="inlinemediaobject"><img src="../../../../../qlustar/en-US/images/qlustar-logo.png" /></span>

	</h3></div><div><div xml:lang="en-US" class="authorgroup" lang="en-US">
	<div class="author"><h3 class="author"><span class="firstname">Qlustar</span> <span class="surname">Documentation Team</span></h3><div class="affiliation">
			<span xmlns:d="http://docbook.org/ns/docbook" class="orgname">Q-Leap Networks GmbH</span>

		</div><code class="email"><a class="email" href="mailto:qlustar-docs@q-leap.com">qlustar-docs@q-leap.com</a></code></div>
</div></div><div><div class="legalnotice"><a id="idm139947018395696"></a><h1 class="legalnotice">Legal Notice</h1>
	<div class="para">
		Copyright <span class="trademark"></span>©2015 Q-Leap Networks GmbH
	</div>
	<div class="para">
		This material may only be distributed subject to the terms and conditions set forth in the GNU Free Documentation License (GFDL), V1.2 or later (the latest version is presently available at http://www.gnu.org/licenses/fdl.txt).
	</div>
	<div class="para">
		The Qlustar license can be found at <code class="filename">/usr/share/qlustar/LICENSE.html</code> on an installed Qlustar head-node.
	</div>
</div></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p>
		<div class="para">
			This is the operation manual for QluMan, the Qlustar cluster management framework.
		</div>

	</div></div></div></div><div class="toc"><dl class="toc"><dt><span class="preface"><a href="#idm139946986110000">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139946986110944">1. Qlustar Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139946986104624">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#idm139946986103696">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#idm139946986103440">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#idm139946985825344">2. Feedback requested</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Introduction">1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Introduction">1.1. Qlustar Clusters</a></span></dt><dt><span class="section"><a href="#sec-functionality-overview">1.2. Functionality Overview</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Cluster-Connections">2. Cluster Connections</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-connecting-to-cluster">2.1. Connecting to a Cluster</a></span></dt><dt><span class="section"><a href="#sec-manage-cluster">2.2. Managing Clusters</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-add-cluster">2.2.1.  Adding a new Cluster </a></span></dt><dt><span class="section"><a href="#sec-sorting-clusters">2.2.2.  Sorting multiple clusters </a></span></dt><dt><span class="section"><a href="#sec-change-certificate-safe-password">2.2.3.  Changing the certificate safe password </a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Global-Cluster-Settings">3. Global Cluster Settings</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-License-Installation">3.1. License Installation</a></span></dt><dt><span class="section"><a href="#sec-Configuring-the-Network">3.2. Configuring Network Parameters</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Enclosures">4. Enclosures</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Enclosure-View">4.1. Enclosure View</a></span></dt><dt><span class="section"><a href="#sec-Managing-Enclosures">4.2. Managing Enclosures</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Populating-Enclosures">4.2.1. Populating Enclosures</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Adding-Hosts">5. Adding/Configuring Hosts</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Adding-Hosts">5.1. Adding Hosts</a></span></dt><dt><span class="section"><a href="#sec-Configuring-Hosts">5.2. Configuring Hosts</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-HWwizard">6. Hardware Wizard</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-HWwizard-purpose">6.1. Purpose</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-host-selection">6.2. Selecting Hosts</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-template">6.3. Configuring the Host Template</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-hw-prop-set">6.4. Selecting a Hardware Property Set</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-resolve-conflict">6.5. Resolving Hardware Conflicts</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-HWwizard-per-host-hw-prop-set">6.5.1. Resolving by per-host Hardware Property Sets</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-HWwizard-gen-prop-set">6.6. Selecting a Generic Property Set / Config Set</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-summary">6.7. Summary Page</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Config-Classes">7. Config Classes</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Config-Classes-Overview">7.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Writing-Config-Files">7.2. Writing Config Files</a></span></dt><dt><span class="section"><a href="#sec-Boot-Configs">7.3. Boot Configs</a></span></dt><dt><span class="section"><a href="#sec-DHCP-Config">7.4. DHCP Config</a></span></dt><dt><span class="section"><a href="#sec-Disk-Configs">7.5. Disk Configs</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Config">7.6. Slurm Config</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Slurm-Overview">7.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Config-Header">7.6.2. Slurm Config Header</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Node-Groups">7.6.3. Slurm Node Groups</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Partitions">7.6.4. Slurm Partitions</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Property-Editor">7.6.5. Slurm Property Editor</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Gres-Groups">7.6.6. Slurm Gres Groups</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Assign-Hosts">7.6.7. Assigning Hosts to Slurm Node Groups, Partitions and Gres Groups</a></span></dt><dt><span class="section"><a href="#sec-GPUwizard">7.6.8. GPU Wizard</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Other-Configs">8. Other Configs</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Qlustar-OS-Images">8.1. Qlustar OS Images</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Image-Versioning">8.1.1. Image Versioning</a></span></dt><dt><span class="section"><a href="#sec-Image-Properties">8.1.2. Image Properties</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-NIS-Hosts">8.2. NIS hosts</a></span></dt><dt><span class="section"><a href="#sec-SSH-Hosts">8.3. SSH host files</a></span></dt><dt><span class="section"><a href="#sec-UnionFS-Chroots">8.4. UnionFS Chroots</a></span></dt><dt><span class="section"><a href="#sec-Configuring-IB">8.5. Infiniband network</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Configuring-OpenSM">8.5.1. Activating/configuring OpenSM</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-IPMI-Settings">8.6. IPMI settings</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-RX-Engine">9. RXEngine / Remote Execution Engine</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-RXE-Overview">9.1. RXEngine Overview</a></span></dt><dt><span class="section"><a href="#sec-RXE-Pre-Defined">9.2. Executing a pre-defined command</a></span></dt><dt><span class="section"><a href="#sec-RXE-Custom">9.3. Executing a custom command</a></span></dt><dt><span class="section"><a href="#sec-RXE-Output-Analysis">9.4. Analysis of Command Status/Output</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-RXE-Command-Status">9.4.1. Command Status</a></span></dt><dt><span class="section"><a href="#sec-RXE-Host-Grouping">9.4.2. Host Grouping by Status and Output</a></span></dt><dt><span class="section"><a href="#sec-RXE-Filter-OutErr">9.4.3. Filtering by stdout and stderr</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-RXE-Command-Editor">9.5. Command Editor</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-RXE-Command-Editor-Sorting">9.5.1. Sorting commands</a></span></dt><dt><span class="section"><a href="#sec-RXE-Command-Editor-Defining">9.5.2. Defining or editing a command</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-Host-Filters">10. Host Filters</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Host-Filter-Overview">10.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Editor">10.2. Host Filter Editor</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Host-Filter-Edit">10.2.1. Editing a Filter</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Types">10.2.2. Types of Filters</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Inverting">10.2.3. Inverting a Filter</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-AddSub">10.2.4. Additive versus subtractive</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#chap-User-Rights">11. QluMan User and Rights Management</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-User-Rights-Overview">11.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-User-Manage">11.2. Managing QluMan Users</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-User-Add">11.2.1. Adding a User</a></span></dt><dt><span class="section"><a href="#sec-User-Auth-Token">11.2.2. Generating the Auth Token</a></span></dt><dt><span class="section"><a href="#sec-User-Remove">11.2.3. Removing a User</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-Roles-Manage">11.3. Managing User Roles/Permissions</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-LogViewer">12. Log Viewer</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-LogViewer-purpose">12.1. Purpose</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-indicator">12.2. Messages indicator button</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-window">12.3. Log Viewer window</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-filter">12.4. Message Filter</a></span></dt></dl></dd><dt><span class="chapter"><a href="#chap-Look-Feel">13. Customizing the Look&amp;Feel</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Look-Feel-Overview">13.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Fonts">13.2. Customizing Fonts</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Colors">13.3. Customizing Colors</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Clone">13.4. Cloning KDE Settings</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Widget">13.5. Customizing the Widget Style</a></span></dt></dl></dd><dt><span class="appendix"><a href="#idm139946984920672">A. Revision History</a></span></dt><dt><span class="index"><a href="#idm139946984914896">Index</a></span></dt></dl></div>
	
	 <div xml:lang="en-US" class="preface" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139946986110000">
      ⁠</a>Preface</h1></div></div></div>
	
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139946986110944">
      ⁠</a>1. Qlustar Document Conventions</h2></div></div></div>
	
	 <div class="para">
		Qlustar manuals use the following conventions to highlight certain words and phrases and draw attention to specific pieces of information.
	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139946986104624">
      ⁠</a>1.1. Typographic Conventions</h3></div></div></div>
		
		 <div class="para">
			Four typographic conventions are used to call attention to specific words and phrases. These conventions, and the circumstances they apply to, are as follows.
		</div>
		 <div class="para">
			<code class="literal">Mono-spaced Bold</code>
		</div>
		 <div class="para">
			Used to highlight system input, including shell commands, file names and paths. Also used to highlight keys and key combinations. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To see the contents of the file <code class="filename">my_next_bestselling_novel</code> in your current working directory, enter the <code class="command">cat my_next_bestselling_novel</code> command at the shell prompt and press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>

		</blockquote></div>
		 <div class="para">
			The above includes a file name, a shell command and a key, all presented in mono-spaced bold and all distinguishable thanks to context.
		</div>
		 <div class="para">
			Key combinations can be distinguished from an individual key by the plus sign that connects each part of a key combination. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>
			 <div class="para">
				Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> to switch to a virtual terminal.
			</div>

		</blockquote></div>
		 <div class="para">
			The first example highlights a particular key to press. The second example highlights a key combination: a set of three keys pressed simultaneously.
		</div>
		 <div class="para">
			If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code class="literal">mono-spaced bold</code>. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				File-related classes include <code class="classname">filesystem</code> for file systems, <code class="classname">file</code> for files, and <code class="classname">dir</code> for directories. Each class has its own associated set of permissions.
			</div>

		</blockquote></div>
		 <div class="para">
			<span class="application"><strong>Proportional Bold</strong></span>
		</div>
		 <div class="para">
			This denotes words or phrases encountered on a system, including application names; dialog-box text; labeled buttons; check-box and radio-button labels; menu titles and submenu titles. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Choose <span class="guimenu"><strong>System</strong></span> → <span class="guisubmenu"><strong>Preferences</strong></span> → <span class="guimenuitem"><strong>Mouse</strong></span> from the main menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the <span class="guilabel"><strong>Buttons</strong></span> tab, select the <span class="guilabel"><strong>Left-handed mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).
			</div>
			 <div class="para">
				To insert a special character into a <span class="application"><strong>gedit</strong></span> file, choose <span class="guimenu"><strong>Applications</strong></span> → <span class="guisubmenu"><strong>Accessories</strong></span> → <span class="guimenuitem"><strong>Character Map</strong></span> from the main menu bar. Next, choose <span class="guimenu"><strong>Search</strong></span> → <span class="guimenuitem"><strong>Find…</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span> field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back to your document and choose <span class="guimenu"><strong>Edit</strong></span> → <span class="guimenuitem"><strong>Paste</strong></span> from the <span class="application"><strong>gedit</strong></span> menu bar.
			</div>

		</blockquote></div>
		 <div class="para">
			The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in proportional bold and all distinguishable by context.
		</div>
		 <div class="para">
			<code class="command"><em class="replaceable">Mono-spaced Bold Italic</em></code> or <span class="application"><strong><em class="replaceable">Proportional Bold Italic</em></strong></span>
		</div>
		 <div class="para">
			Whether mono-spaced bold or proportional bold, the addition of italics indicates replaceable or variable text. Italics denotes text you do not input literally or displayed text that changes depending on circumstance. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable">username</em>@<em class="replaceable">domain.name</em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</div>
			 <div class="para">
				The <code class="command">mount -o remount <em class="replaceable">file-system</em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</div>
			 <div class="para">
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable">package</em></code> command. It will return a result as follows: <code class="command"><em class="replaceable">package-version-release</em></code>.
			</div>

		</blockquote></div>
		 <div class="para">
			Note the words in bold italics above: username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</div>
		 <div class="para">
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Publican is a <em class="firstterm">DocBook</em> publishing system.
			</div>

		</blockquote></div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139946986103696">
      ⁠</a>1.2. Pull-quote Conventions</h3></div></div></div>
		
		 <div class="para">
			Terminal output and source code listings are set off visually from the surrounding text.
		</div>
		 <div class="para">
			Output sent to a terminal is set in <code class="computeroutput">mono-spaced roman</code> and presented thus:
		</div>
		 
<pre class="screen">books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs
</pre>
		 <div class="para">
			Commands to be executed on certain nodes of a cluster or the admins workstation are indicated by using descriptive shell prompts including user and hostname. Note that by default, the shell prompt on Qlustar nodes always ends in the newline character, thus commands are typed on the line following the prompt. As mentioned above, the command itself is shown in <code class="computeroutput">mono-spaced bold</code> and the output of a command in <code class="computeroutput">mono-spaced roman</code>. Examples:
		</div>
		 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">echo "I'm executed by root on a head-node"</code>
I'm executed by root on a head-node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@beo-01 ~ #</code>
<code class="command">echo "I'm executed by root on a compute node"</code>
I'm executed by root on a compute node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">echo "I'm executed by root on a storage node"</code>
I'm executed by root on a storage node
</pre>
		 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $ </code>
<code class="command">echo "I'm executed by user admin on the admins workstation"</code>
I'm executed by user admin on the admins workstation
</pre>
		 <div class="para">
			Source-code listings are also set in <code class="computeroutput">mono-spaced roman</code> but add syntax highlighting as follows:
		</div>
		 <pre xml:lang="en-US" class="programlisting" lang="en-US"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">book</span>.<span xmlns="" class="perl_Function">jca</span>.<span xmlns="" class="perl_Function">ex1</span>;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.naming.InitialContext;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ExClient
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String args[]) 
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      InitialContext iniCtx = <span xmlns="" class="perl_Keyword">new</span> InitialContext();
<span xmlns="" class="line">​</span>      Object         ref    = iniCtx.<span xmlns="" class="perl_Function">lookup</span>(<span xmlns="" class="perl_String">"EchoBean"</span>);
<span xmlns="" class="line">​</span>      EchoHome       home   = (EchoHome) ref;
<span xmlns="" class="line">​</span>      Echo           echo   = home.<span xmlns="" class="perl_Function">create</span>();
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Created Echo"</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Echo.echo('Hello') = "</span> + echo.<span xmlns="" class="perl_Function">echo</span>(<span xmlns="" class="perl_String">"Hello"</span>));
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139946986103440">
      ⁠</a>1.3. Notes and Warnings</h3></div></div></div>
		
		 <div class="para">
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Notes are tips, shortcuts or alternative approaches to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition">
			<div class="para">
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring a box labeled “Important” will not cause data loss but may cause irritation and frustration.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition">
			<div class="para">
				Warnings should not be ignored. Ignoring warnings will most likely cause data loss.
			</div>

		</div></div>

	</div>
</div>
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139946985825344">
      ⁠</a>2. Feedback requested</h2></div></div></div>
	
	<a id="idm139946985824224" class="indexterm"></a>
	<div class="para">
		Contact <code class="email"><a class="email" href="mailto:qlustar-docs@qlustar.com">qlustar-docs@qlustar.com</a></code> to report errors or missing pieces in this documentation.
	</div>
</div>
</div>
	  <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Introduction">
      ⁠</a>Chapter 1. Introduction</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Introduction">1.1. Qlustar Clusters</a></span></dt><dt><span class="section"><a href="#sec-functionality-overview">1.2. Functionality Overview</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Introduction">
      ⁠</a>1.1. Qlustar Clusters</h2></div></div></div>
		
		 <div class="para">
			A Qlustar HPC cluster is designed to boot and manage compute or storage nodes (hosts) over the network and make them run a minimal OS (Operating System) image in RAM. Local disks (if present) are only used to preserve log files across boots and for temporary storage (e.g. for compute jobs). One or more head-nodes deliver the boot images to the nodes. Additionally, a small <em class="firstterm">NFS</em> share containing part of the configuration space for the nodes is exported from one of the head-nodes. Optionally, the RAM-based root FS (file-system) can be supplemented by a global <a class="link" href="#sec-UnionFS-Chroots">UnionFS chroot</a> to support software not already contained in the boot images themselves. The head-node(s) of the cluster typically provides <em class="firstterm">TFTP/PXE boot services</em>, <em class="firstterm">DHCP service</em>, <em class="firstterm">NIS service</em>, <em class="firstterm">torque</em> or <em class="firstterm">slurm resource management</em> etc. to the cluster. The management of these and all cluster-related components of a <span class="productname">Qlustar</span> installation in general can easily be accomplished through a single administration interface: <span class="application"><strong>QluMan</strong></span>, the <code class="literal">Qlustar Management interface</code>.
		</div>
		 <div class="para">
			The <span class="application"><strong>QluMan</strong></span> GUI is <em class="parameter"><code>multi-user</code></em> as well as <em class="parameter"><code>multi-cluster</code></em> capable: Different users are allowed to work simultaneously with the GUI. Changes made by one user are updated and visible in real-time in the windows opened by all the other users. On the other hand, it is possible to manage a virtually unlimited number of clusters within a single instance of the <span class="application"><strong>QluMan</strong></span> GUI at the same time. Each cluster is shown in a tab or in a separate main window.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-functionality-overview">
      ⁠</a>1.2. Functionality Overview</h2></div></div></div>
		
		 <div class="para">
			A central part of Qlustar are its pre-configured <code class="literal">modular OS images</code>. Different nodes may have different hardware or need to provide specific and varying functionality/services. Therefore, to optimize the use of hardware resources and increase stability/security, Qlustar does not come with just one boot image that covers every use-case. Instead, a number of <code class="literal">image modules</code> with different software components are provided from which <code class="literal">individual custom OS images</code> can be created as needed. A Qlustar OS image just contains what is actually required to accomplish the tasks of a node, nothing more. See below for more details about configuring <a class="link" href="#sec-Qlustar-OS-Images">OS images</a>)
		</div>
		 <div class="para">
			But providing different OS images is still not enough for a flexible yet easily manageable cluster: A node booting a generated image also receives extra configuration options via DHCP and via NFS at boot time, thus allowing to fine-tune the OS configuration at run-time. E.g. it is possible to determine how the local disks are to be used (if any are present), whether additional services like <em class="firstterm">OpenSM</em> or <em class="firstterm">samba</em> should be enabled/disabled and a lot more. Four different configuration/property categories exist in <span class="application"><strong>QluMan</strong></span>:
		</div>
		 <div class="para">
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
					<div class="para">
						<a class="xref" href="#Generic-Properties">Generic Properties</a> are simple on/off options or key+value pairs applicable to groups of nodes, e.g. to flag the reformatting of the local disks at the next boot, add torque node properties, etc.
					</div>

				</li><li class="listitem">
					<div class="para">
						<a class="xref" href="#chap-Config-Classes">Config Classes</a> handle more complex configurations like boot/disk configs, DHCP, etc.
					</div>

				</li><li class="listitem">
					<div class="para">
						<a class="xref" href="#Hardware-Properties">Hardware Properties</a> are not used to configure the nodes themselves but describe their hardware configuration and are of importance e.g. for the slurm or torque resource managers and/or inventory management.
					</div>

				</li><li class="listitem">
					<div class="para">
						Finally, <a class="xref" href="#Specific-Properties">Specific Properties</a> are properties that are unique to a particular node, like its serial number. Therefore, these properties can only be assigned to individual nodes.
					</div>

				</li></ul></div>

		</div>
		 <div class="para">
			Of course, one can configure every host in a cluster individually. But in most clusters, there are large groups of hosts that should be configured identically. However, even if there are several groups, they might share some properties/configurations but not all of them. To provide a simple handling of such scenarios, <span class="application"><strong>QluMan</strong></span> allows to combine generic properties, hardware properties and config classes each into sets. Moreover, it is possible to combine exactly one generic property, one hardware property and one config set into a <code class="classname">Host Template</code>. Assigning a Host Template to a group of hosts makes it possible to specify their complete properties and configuration settings with a single click. Nonetheless, for maximum flexibility, it is also allowed to override or extend the settings from the template of a host by assigning either one of the sets and/or individual properties/config classes to it. In case of conflicts, values from individual properties/config classes have highest priority followed by set values and finally the Host Template values. For more details on this see <a class="xref" href="#sec-Configuring-Hosts">Section 5.2, “Configuring Hosts”</a>.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Cluster-Connections">
      ⁠</a>Chapter 2. Cluster Connections</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-connecting-to-cluster">2.1. Connecting to a Cluster</a></span></dt><dt><span class="section"><a href="#sec-manage-cluster">2.2. Managing Clusters</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-add-cluster">2.2.1.  Adding a new Cluster </a></span></dt><dt><span class="section"><a href="#sec-sorting-clusters">2.2.2.  Sorting multiple clusters </a></span></dt><dt><span class="section"><a href="#sec-change-certificate-safe-password">2.2.3.  Changing the certificate safe password </a></span></dt></dl></dd></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-connecting-to-cluster">
      ⁠</a>2.1. Connecting to a Cluster</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/connect_cluster_dialog/enter_password_safe.png" width="85%" alt="Enter Password" /><div class="caption">
				<div class="para">
					Enter Password
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/connect_cluster_dialog/enter_password_safe_remember.png" width="85%" alt="Remember Password" /><div class="caption">
				<div class="para">
					Remember Password
				</div>
				</div></div>
			 When starting <span class="application"><strong>qluman-qt</strong></span>, it requests the password for your <em class="firstterm">certificate safe</em>. This safe holds the login information for your clusters together with the private keys for the corresponding QluMan user account. The password for the certificate safe is required on every start and whenever changes to the safe need to be written. You can have the client remember the password for the duration it is running by checking the <code class="classname">Remember password</code> check-box. Without enabling this, you will have to input the password again, whenever changes to the safe need to be written. If you are starting <span class="application"><strong>qluman-qt</strong></span> for the first time and therefore have no certificate safe yet, this dialog is skipped and an empty <code class="classname">Connect Cluster</code> dialog opens directly. See <a class="xref" href="#sec-add-cluster">Section 2.2.1, “ Adding a new Cluster ”</a> below about how to add a new cluster.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/connect_cluster_dialog/main.png" width="85%" alt="Connect Cluster Dialog" /><div class="caption">
				<div class="para">
					Connect Cluster Dialog
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/connect_cluster_dialog/select_cluster.png" width="85%" alt="Select a Cluster Connection" /><div class="caption">
				<div class="para">
					Select a Cluster Connection
				</div>
				</div></div>
			 Having entered the correct password for the certificate safe the <code class="classname">Connect Cluster</code> dialog opens. The last cluster used will be pre-selected but a different cluster can be selected from the drop-down menu. Click the <span class="guibutton"><strong>Connect</strong></span> button to connect to the selected cluster. If this is the first time you connect to this cluster, the client generates a random public/private key pair. These keys will eventually be used for permanent authentification of the chosen user with this cluster. Following this, a connection to the server is made with an attempt to authenticate the client using the one-time token. On success, the server stores the public key of the client for future logins and the client stores both the private and public keys in the certificate safe. This finalizes the initial handshake. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					The GUI client asks for the password of the certificate safe to store the generated public/private key pair. It will only do so, when you initially connect with a one-time token. For future connections, it will use the stored key pair to connect and authenticate. The safe contents will then not be changed again.
				</div>

			</div></div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-manage-cluster">
      ⁠</a>2.2. Managing Clusters</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/first_steps/connect_cluster_1.png" width="85%" alt="Starting the connection editor" /><div class="caption">
				<div class="para">
					Starting the connection editor
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/manage_clusters_dialog/main.png" width="85%" alt="The connection editor" /><div class="caption">
				<div class="para">
					The connection editor
				</div>
				</div></div>
			 The <code class="classname">Manage Clusters</code> dialog manages all your accounts on different clusters or as different users on the same cluster. It allows adding new cluster connections, editing existing and removing obsolete ones as well as changing the password for the certificate safe. It can be opened by clicking <span class="guibutton"><strong>Edit</strong></span> in the <code class="classname">Connect Cluster</code> dialog.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-add-cluster">
      ⁠</a>2.2.1.  Adding a new Cluster </h3></div></div></div>
			
			 <div class="para">
				<div class="mediaobject"><img src="images/first_steps/manage_clusters_new.png" width="85%" alt="Adding a new cluster connection" /><div class="caption">
					<div class="para">
						Adding a new cluster connection
					</div>
					</div></div>
				 To add a new cluster click the <span class="guibutton"><strong>New</strong></span> button and select <span class="guibutton"><strong>New Cluster (paste)</strong></span> or <span class="guibutton"><strong>New Cluster (file)</strong></span> from the menu depending on whether you want to paste the one-time token or load it from a file. If you don't have a one-time token for the cluster see <a class="xref" href="#sec-User-Auth-Token">Section 11.2.2, “Generating the Auth Token”</a>.
			</div>
			 <div class="para">
				Paste the one-time token data into the dialog and click <span class="guibutton"><strong>Decrypt</strong></span> or select the file containing the token. When asked for the password, enter the pin 
				<div class="mediaobject"><img src="images/first_steps_new_cluster/paste_1.png" width="85%" alt="Pasting the one-time token" /><div class="caption">
					<div class="para">
						Pasting the one-time token
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/first_steps_new_cluster/file_1.png" width="85%" alt="Using a token from a file" /><div class="caption">
					<div class="para">
						Using a token from a file
					</div>
					</div></div>
				 that was used when creating the token (in case you didn't generate the token yourself, you should have been told the pin by your main cluster administrator). The dialog should then show the cluster/head-node infos that where packed into the one-time token. If you started <span class="application"><strong>qluman-qt</strong></span> on your workstation, then you might have to change the <em class="parameter"><code>Local Hostname</code></em> to use the external hostname of the head-node. Similarly, if you changed the port for qlumand or if you're 
				<div class="mediaobject"><img src="images/first_steps_new_cluster/2.png" width="85%" alt="Entering the pin" /><div class="caption">
					<div class="para">
						Entering the pin
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/first_steps_new_cluster/3.png" width="85%" alt="Customizing the connection" /><div class="caption">
					<div class="para">
						Customizing the connection
					</div>
					</div></div>
				 connecting via port forwarding, you have to adjust that too. The <em class="parameter"><code>Alias</code></em> is the name this cluster will be shown as, when using the drop-down menu in the <code class="classname">Connect Cluster</code> dialog. Click <span class="guibutton"><strong>Ok</strong></span> to add the cluster connection.
			</div>
			 <div class="para">
				<div class="mediaobject"><img src="images/first_steps/manage_clusters_save.png" width="85%" alt="Saving the cluster connection" /><div class="caption">
					<div class="para">
						Saving the cluster connection
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/first_steps/manage_clusters_password.png" width="85%" alt="Certificate password" /><div class="caption">
					<div class="para">
						Certificate password
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/first_steps/manage_clusters_confirm.png" width="85%" alt="Confirm password" /><div class="caption">
					<div class="para">
						Confirm password
					</div>
					</div></div>
				 After adding the new cluster select <span class="guibutton"><strong>Save</strong></span> to save the changes. If this is your first cluster then it will create the certificate safe and ask you to enter and confirm a password. Otherwise it will ask for the existing password unless the <span class="guibutton"><strong>Remember password</strong></span> check-box was enabled.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-sorting-clusters">
      ⁠</a>2.2.2.  Sorting multiple clusters </h3></div></div></div>
			
			 <div class="para">
				<div class="mediaobject"><img src="images/manage_clusters_dialog/new_menu.png" width="85%" alt="Adding a connection group" /><div class="caption">
					<div class="para">
						Adding a connection group
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/manage_clusters_dialog/group.png" width="85%" alt="Naming a connection group" /><div class="caption">
					<div class="para">
						Naming a connection group
					</div>
					</div></div>
				 If multiple cluster connections are registered, the corresponding entries can be reordered using drag&amp;drop. This allows to move them to the desired location in the list. Clusters can also be grouped in sub-menus by first creating a new group (sub_menu) and then dragging cluster entries into it. The tree structure of the <code class="classname">Manage Clusters</code> dialog will be reflected in the drop-down menu 
				<div class="mediaobject"><img src="images/manage_clusters_dialog/group2.png" width="85%" alt="Moving a connection to a group" /><div class="caption">
					<div class="para">
						Moving a connection to a group
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/connect_cluster_dialog/select_cluster_group.png" width="85%" alt="Selecting a cluster in a group" /><div class="caption">
					<div class="para">
						Selecting a cluster in a group
					</div>
					</div></div>
				 of the <code class="classname">Connect Cluster</code> dialog. This allows a nicely structured layout when dealing with a larger number of clusters as e.g. in the case of service providers. Standard cluster admins will most likely not need this feature.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-change-certificate-safe-password">
      ⁠</a>2.2.3.  Changing the certificate safe password </h3></div></div></div>
			
			 <div class="para">
				<div class="mediaobject"><img src="images/manage_clusters_dialog/changing_password.png" width="85%" alt="Select changing the password" /><div class="caption">
					<div class="para">
						Select changing the password
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/manage_clusters_dialog/change_password.png" width="85%" alt="Change password dialog" /><div class="caption">
					<div class="para">
						Change password dialog
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/manage_clusters_dialog/change_password_mismatch.png" width="85%" alt="OK button disabled if mismatch" /><div class="caption">
					<div class="para">
						OK button disabled if mismatch
					</div>
					</div></div>
				 The <code class="classname">Manage Clusters</code> dialog allows changing the password for the certificate safe. This requires entering the old password for the safe as well as the new password and a confirmation of the new password. The <span class="guibutton"><strong>Ok</strong></span> button will only be selectable if the new password and confirmation matches.
			</div>

		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Global-Cluster-Settings">
      ⁠</a>Chapter 3. Global Cluster Settings</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-License-Installation">3.1. License Installation</a></span></dt><dt><span class="section"><a href="#sec-Configuring-the-Network">3.2. Configuring Network Parameters</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-License-Installation">
      ⁠</a>3.1. License Installation</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/license_key/expired.png" width="85%" alt="Expired license key" /><div class="caption">
				<div class="para">
					Expired license key
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/license_key/menu.png" width="85%" alt="Opening the license key window" /><div class="caption">
				<div class="para">
					Opening the license key window
				</div>
				</div></div>
			 To be able to configure your cluster with <span class="application"><strong>QluMan</strong></span>, a license key needs to be installed. Without a valid key, an error will be displayed upon start-up and the QluMan daemon will only allow read-only operations. In read-only mode, you can have a look at all the settings, but you can't change anything.
		</div>
		 <div class="para">
			After closing the error dialog the <code class="classname">License Key window</code> can be opened by selecting <span class="guimenuitem"><strong>File</strong></span>-&gt;<span class="guimenuitem"><strong>License Key</strong></span> in the main Menu. If you never installed a license key before, the window will come up mostly empty.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/license_key/empty.png" width="85%" alt="The License Key window" /><div class="caption">
				<div class="para">
					The License Key window
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/license_key/key_info.png" width="85%" alt="The Key Info Dialog" /><div class="caption">
				<div class="para">
					The Key Info Dialog
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/license_key/request.png" width="85%" alt="Saving the key request file" /><div class="caption">
				<div class="para">
					Saving the key request file
				</div>
				</div></div>
			 To request a license key, click the <span class="guibutton"><strong>Request Key</strong></span> button and a <code class="classname">Key Info Dialog</code> will open asking you for your name and address info. If you intend to use <code class="classname">Qlustar Basic Edition</code>, checkmark <span class="guibutton"><strong>Free / non-profit license</strong></span> at the bottom of the dialog. Select <span class="guibutton"><strong>OK</strong></span> to continue saving the key request in a file. Enter a file-name and save. You will now have to send an e-mail specifying the required number of nodes and features (see <a href="http://qlustar.com/order/___blank___">our order page</a>) with this key file attached to <a href="mailto:order@q-leap.com?Subject=License%20request">order@q-leap.com</a>
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/license_key/key.png" width="85%" alt="The license info" /><div class="caption">
				<div class="para">
					The license info
				</div>
				</div></div>
			 After a while, you will receive a license key by mail, that you can import using the <span class="guibutton"><strong>Import Key</strong></span> button. If the import was successful, the license terms will be displayed. After accepting the license, you're ready to start working with <span class="application"><strong>QluMan</strong></span>.
		</div>
		 <div class="para">
			After a successful license installation, you can move on to the interesting stuff. Upon start-up, the QluMan client automatically connects to the local QluMan daemon and opens the <code class="classname">Enclosure View</code> window.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Configuring-the-Network">
      ⁠</a>3.2. Configuring Network Parameters</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/main_window/network_config.png" width="85%" alt="Opening the cluster network config dialog" /><div class="caption">
				<div class="para">
					Opening the cluster network config dialog
				</div>
				</div></div>
			 During the installation of Qlustar, the configuration parameters for the cluster network had to be entered and normally you won't need to change them. For the rare circumstances, where they do need to be changed, or in case you just want to verify the settings, you can select <span class="guibutton"><strong>Manage Cluster</strong></span>-&gt;<span class="guibutton"><strong>Network Config</strong></span> from the main windows menu.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Note, that changing anything in this dialog involves a fundamental reconfiguration of the cluster setup, including rebooting the whole cluster. For this reason, changes in the <code class="classname">Global Cluster Network Config</code> do not take effect immediately after being changed in the dialog. They require a further confirmation by clicking the <span class="guibutton"><strong>Save</strong></span> button, that will then actually commit the changes.
			</div>

		</div></div>
		 <h3><a id="idm139946985662752">
      ⁠</a> Configuring Ethernet </h3> <div class="para">
			<div class="mediaobject"><img src="images/network_config/ethernet.png" width="85%" alt="The global cluster network config dialog" /><div class="caption">
				<div class="para">
					The global cluster network config dialog
				</div>
				</div></div>
			 Changing the Ethernet network configuration is the most involved and requires several steps. In the <code class="classname">Global Cluster Network Config</code> there are 3 settings relevant for <em class="firstterm">Ethernet</em>: The Cluster Network IP address, the netmask and the cluster internal Head IP address. When changing the Cluster Network IP address or netmask, the IP addresses of all hosts configured in QluMan will be remapped to reflect their new values. This requires that the new netmask is large enough, so that the resulting network range can include all existing hosts in the cluster. Therefore, the GUI won't let you pick anything too small. If there are unused address ranges in your existing network and you need a smaller netmask than currently selectable, you will first have to change some host addresses so that all of them combined occupy a small enough subset of the current network.
		</div>
		 <div class="para">
			Changing the network address IP will automatically remap the cluster internal Head IP address as well, while changing the netmask will not. Note, that the Qlustar convention, to use the second last IP of the cluster network as the Head IP, is obviously not a requirement. Hence, this is not done automatically when changing the netmask. Furthermore, changing the Head IP involves some additional steps without which the nodes in the cluster won't function or even boot. The point is that the Head IP also appears in the <code class="classname">Global DHCP Template</code>, NIS Host header and SSH Hosts / Known Hosts. These templates are simple, freely editable text blobs. A change of the Head IP in the <code class="classname">Global Cluster Network Config</code> will not change them, so you need to check and adjust each of them manually.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/network_config/proxy.png" width="85%" alt="Configuring an http proxy" /><div class="caption">
				<div class="para">
					Configuring an http proxy
				</div>
				</div></div>
			 If the head-node does not have direct access to the Internet, a <em class="parameter"><code>http proxy</code></em> must be configured. Qluman uses this proxy to download packages from the <span class="guilabel"><strong>Qlustar repository</strong></span>, when creating a new chroot. Click the checkmark before <span class="guilabel"><strong>Http Proxy</strong></span> to enable proxy support and enter the hostname together with the port of the proxy. If the proxy requires authentication, click the checkmark before <span class="guilabel"><strong>Authenticate</strong></span> and enter a username and password. Like usual, the new settings will only take affect, when you click the <span class="guibutton"><strong>Save</strong></span> button.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Enclosures">
      ⁠</a>Chapter 4. Enclosures</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Enclosure-View">4.1. Enclosure View</a></span></dt><dt><span class="section"><a href="#sec-Managing-Enclosures">4.2. Managing Enclosures</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Populating-Enclosures">4.2.1. Populating Enclosures</a></span></dt></dl></dd></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Enclosure-View">
      ⁠</a>4.1. Enclosure View</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/startup.png" width="85%" alt="The Enclosure View" /><div class="caption">
				<div class="para">
					The Enclosure View
				</div>
				</div></div>
			 The <code class="classname">Enclosure View</code> shows an overview of the cluster in a tree structure. The tree structure is designed to reflect the physical structure of the cluster. At the lowest level are the hosts. A host can be a head, storage or compute node but also a switch e.g. In general, anything in the cluster that has a name, IP and MAC address is a host. A host is represented by its <code class="literal">bare board</code> and should be placed into a <em class="firstterm"> host enclosure</em>. 1U, 2U, 3U or 4U enclosures contain exactly one board, while others like a Twin or Blade chassis can have multiple boards. Once defined, host enclosures can be placed into <em class="firstterm">racks</em>, racks grouped into rows, rows into rooms and so on. The tree has a simple drag&amp;drop interface. E.g. you can select a number of nodes (by holding the <span class="keycap"><strong>CTRL</strong></span> key and clicking or holding the <span class="keycap"><strong>shift key</strong></span> and dragging the mouse) and drag&amp;drop them into a <em class="firstterm">Blade enclosure</em>.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_host.png" width="85%" alt="Selected host in Enclosure View" /><div class="caption">
				<div class="para">
					Selected host in Enclosure View
				</div>
				</div></div>
			 Selecting a node in the tree displays its configuration info on the right hand side: The hostname, IP and MAC can be edited and saved by pressing <span class="keycap"><strong>return</strong></span>. The check-mark to the right of the field shows the state of the change. If the entered value is not valid, the check-box is cleared
		</div>
		 <div class="para">
			The check-boxes tool-tip (you'll see it when the mouse moves on top of it) gives the reason, why the entered value is invalid. If the entered value is valid but has not yet been saved, the check-box is checked but ghosted. Finally, after the value has been saved in the database, the check-box shows a solid check.
		</div>
		 <div class="para">
			For nodes that are not part of a <code class="literal">multi-host enclosure</code> (like a Blade or Twin chassis) the enclosure type can be changed to one of the single-slot host enclosures (1U, 2U, etc.). A new enclosure of the chosen type will then be created if the node is not already part of one. If a node is included in a multi-host enclosure, this field will be ghosted.
		</div>
		 <div class="para">
			The template field allows to select a so-called <a class="link" href="#Host-Templates">Host Template</a> for the node. Usually, large groups of nodes have an identical hardware and software configuration and will use the same template. Deviations from the properties coming from the template can be set for individual hosts by direct assignment of either a property set or individual properties directly to the host through its context menu. In case of unique properties direct assignments override settings from the template (or property set), for non-unique properties this is additive. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					Any changes made in the configuration only affects the active node (as indicated by the hostname in the info part of the enclosure view), and not all selected nodes. Configurations for all selected nodes can be made by using the context menu (right click) in the tree view.
				</div>

			</div></div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Managing-Enclosures">
      ⁠</a>4.2. Managing Enclosures</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_twin2.png" width="85%" alt="Showing the enclosure layout" /><div class="caption">
				<div class="para">
					Showing the enclosure layout
				</div>
				</div></div>
			 Similar to host nodes, selecting an enclosure entry displays the physical layout of the corresponding enclosure on the right. Controls to select the visibility level and special slots are available at the top of the display. See below for more details about these. The name of the enclosure and its type (in brackets) is shown in the title. In the above case, both name and type are "Twin². Below the title you have a representation of the physical layout of the enclosure. For this example, you see the 2x2 slots that are characteristic of a 
			<div class="mediaobject"><img src="images/enclosure_view/select_rack_specials.png" width="85%" alt="Activate special rack slots" /><div class="caption">
				<div class="para">
					Activate special rack slots
				</div>
				</div></div>
			 Twin² enclosure. Two slots are filled with <code class="systemitem">beo-01</code> and <code class="systemitem">beo-02</code> and two slots remain empty, showing only the number of each slot in brackets.
		</div>
		 <div class="para">
			Selecting a rack shows a more complex picture. The current example rack holds ten enclosures in its central 19 inch slots: A FatTwin, a Twin, a Twin², a Blade 1, 3 Blade 2, another Twin² and two 1U enclosures containing <code class="systemitem">beo-11</code> and <code class="systemitem">beo-12</code>. The special top, left, right and bottom (not visible) slots are empty. In future versions a network switch or power controller, that is mounted at some special position of the rack, can be placed into these special slots.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_rack.png" width="85%" alt="A rack with one visible level" /><div class="caption">
				<div class="para">
					A rack with one visible level
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/enclosure_view/select_rack_deep.png" width="85%" alt="A rack with two visible levels" /><div class="caption">
				<div class="para">
					A rack with two visible levels
				</div>
				</div></div>
			 Now let's explain the effect of the two controls at the top in more detail: The <span class="guibutton"><strong>Show special slots</strong></span> check-box controls the visibility of the top, left, right and bottom special slots. Especially if these slots are empty, this will provide a more compact view of the interesting central slots. The other control, the visibility level, controls how many levels of the enclosure hierarchy are shown: Selecting a depth of 2 shows not only the selected rack with its slots but also the contents of the enclosures in each slot.
		</div>
		 <div class="para">
			Since the current version of <span class="application"><strong>QluMan</strong></span> only supports host enclosures (Twin, Blade, ...) and racks, a depth larger than 2 has no effect yet. In future versions, it will be possible to group racks into rows, rows into rooms, rooms into buildings and so on. This will allow you to reflect the physical layout of your cluster in as much detail, as you like.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Populating-Enclosures">
      ⁠</a>4.2.1. Populating Enclosures</h3></div></div></div>
			
			 <div class="para">
				New enclosures can be added through the context menu. The new enclosure must be given a name and its type can be selected. Currently, enclosure types cannot be manipulated yet. This will change in a future version.
			</div>
			 <div class="para">
				<div class="mediaobject"><img src="images/enclosure_view/new_enclosure.png" width="85%" alt="Adding new enclosures" /><div class="caption">
					<div class="para">
						Adding new enclosures
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/enclosure_view/new_enclosure2.png" width="85%" alt="The New Enclosures Dialog" /><div class="caption">
					<div class="para">
						The New Enclosures Dialog
					</div>
					</div></div>
				 Suitable for ordinary servers, a host being selected in the enclosure view can be placed into a single slot host enclosure directly by selecting the correct type in the host info part of the window (see <a class="xref" href="#sec-Enclosure-View">Section 4.1, “Enclosure View”</a>). For host enclosures that can hold more than one server/node (twin servers, blades etc.), drag&amp;drop may be used to move hosts into them. Moreover, it's also possible to create larger (non-host) enclosures (like racks) and move host enclosures into them also by using using drag&amp;drop. Note, that a bare host cannot be placed directly into a non-host enclosure, only if it is already inside a host enclosure.
			</div>
			 <div class="para">
				Another option to place hosts into enclosures is by selecting a number of them and then choosing a host enclosure from the context menu. This way, a new enclosure of the selected type is automatically created and all selected hosts are moved into it. If more hosts than can fit into a single enclosure of the chosen type are selected, additional enclosures of the same type will be created such that all hosts can be placed into one of them. This makes it easy to position large numbers of identical hosts into their enclosures. If the selected hosts were in an enclosure before and that enclosure becomes empty and is not itself part of a larger enclosure then the empty enclosure is automatically removed.
			</div>
			 <div class="para">
				<div class="mediaobject"><img src="images/enclosure_view/select_host_enclosure.png" width="85%" alt="Placing hosts into an enclosure" /><div class="caption">
					<div class="para">
						Placing hosts into an enclosure
					</div>
					</div></div>
				 <div class="mediaobject"><img src="images/enclosure_view/select_host_enclosure2.png" width="85%" alt="Enclosure hosts" /><div class="caption">
					<div class="para">
						Enclosure hosts
					</div>
					</div></div>
				 Relocating hosts by selecting a different host enclosure is supported not only on directly selected hosts but also on hosts inside selected enclosures. This allows changing the type of enclosure a group of hosts is in by selecting the old enclosure(s) and choosing a new one from the context menu. Note that this procedure does not change the type of the old enclosure but rather creates a new one, moves all the hosts to it and then deletes the now empty old enclosure(s).
			</div>
			 <div class="para">
				<div class="mediaobject"><img src="images/enclosure_view/select_host_enclosure3.png" width="85%" alt="Changing the type of an enclosure" /><div class="caption">
					<div class="para">
						Changing the type of an enclosure
					</div>
					</div></div>
				 Try it out: Place a number of hosts into a large enclosure (like a blade), then select the enclosure and choose a small enclosure (like 1U) to relocate them. In general, such an operation will create one enclosure of the new type and fill all its slots before creating a second one. Hosts having been in different enclosures before, can end up in the same enclosure and hosts that were in the same enclosure before can end up in different enclosures after this operation.
			</div>
			 <div class="para">
				When using drag&amp;drop for the relocation, the host or enclosure is always placed into the lowest suitable slot of the target enclosure. This reflects our experience, that usually enclosures are simply filled from left to right and bottom to top. 
				<div class="mediaobject"><img src="images/enclosure_view/move_to_slot.png" width="85%" alt="Moving to a different slot" /><div class="caption">
					<div class="para">
						Moving to a different slot
					</div>
					</div></div>
				 But sometimes this is not the case and a host or enclosure should be in a different slot as compared to the automatic placement. In this case, the host or enclosure can be moved through the context menu. The latter shows all the free slots the host or enclosure can be relocated to and a checked mark indicates the current location. Of course the relocation is only allowed into free slots. Hence, it may require removing (drag&amp;drop out of the enclosure) a host or enclosure temporarily to free space for moving things around.
			</div>
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-Host-Selections">
      ⁠</a>4.2.1.1. Host Selections</h4></div></div></div>
				
				 <div class="para">
					There are situations, where one wants to change a property or config of a whole set of hosts. For example, you may want to change all nodes located in a particular blade to no longer format their disk on boot. This can be achieved by selecting a set of hosts in the enclosure view with the mouse. A range of hosts can be selected by clicking on the first host and then clicking on the last host, while pressing the shift key. Hosts can also be added or removed from the selection by clicking on a host while pressing the <span class="keycap"><strong>CTRL</strong></span> key. Once a set of hosts is selected, changes can be made to all selected hosts through the context menu. For instance, this allows changing the Host Template or add/alter a generic property of a set of hosts. 
					<div class="mediaobject"><img src="images/enclosure_view/selection_button.png" width="85%" alt="Alternative selection of hosts" /><div class="caption">
						<div class="para">
							Alternative selection of hosts
						</div>
						</div></div>

				</div>
				 <div class="para">
					An alternative and more powerful way to select a set of hosts is available via the <span class="guibutton"><strong>Selection</strong></span> button at the bottom of the <code class="classname">Enclosure View</code>. When pressed, at the top of the appearing selection menu you'll find 3 items: To select all hosts, clear the selection or to invert the selection.
				</div>
				 <div class="para">
					<div class="mediaobject"><img src="images/enclosure_view__selection/menu.png" width="85%" alt="Different ways of selecting hosts" /><div class="caption">
						<div class="para">
							Different ways of selecting hosts
						</div>
						</div></div>
					 <div class="mediaobject"><img src="images/enclosure_view__selection/submenu.png" width="85%" alt="Different selection operators" /><div class="caption">
						<div class="para">
							Different selection operators
						</div>
						</div></div>
					 Below these items is a list of filters by which subsets of hosts were defined according to specific criteria. For more details on how to construct such Host Filters see <a class="xref" href="#chap-Host-Filters">Chapter 10, <em>Host Filters</em></a>. When pressing <span class="guibutton"><strong>Select</strong></span>, the selection is set to the hosts defined by the corresponding filter, dropping any previously selected hosts. <span class="guibutton"><strong>Add to</strong></span>&gt; adds, while <span class="guibutton"><strong>Remove from</strong></span> removes the hosts defined by the filter from the current selection. <span class="guibutton"><strong>Intersection</strong></span> sets the selection to only those hosts in the current selection, that are also part of the set defined by the filter.
				</div>

			</div>

		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Adding-Hosts">
      ⁠</a>Chapter 5. Adding/Configuring Hosts</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Adding-Hosts">5.1. Adding Hosts</a></span></dt><dt><span class="section"><a href="#sec-Configuring-Hosts">5.2. Configuring Hosts</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Adding-Hosts">
      ⁠</a>5.1. Adding Hosts</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/new_host/window.png" width="85%" alt="The New Hosts Window" /><div class="caption">
				<div class="para">
					The New Hosts Window
				</div>
				</div></div>
			 To add new hosts to the cluster you can either select "New Hosts" from the context menu in the Enclosure View tree or from the "Manage Hosts" menu. This opens the "Hosts Window".
		</div>
		 <div class="para">
			Adding a new host requires the specification of an IP address, hostname and MAC in the corresponding three text fields of the dialog. The entered values are checked for their validity. If one of them is not valid, the check-box to its right remains cleared. The tool-tip of the check-box will then show, why it is invalid. If all the values are valid, all check-boxes will show a solid check and the <span class="guibutton"><strong>Add Host</strong></span> button will become selectable.
		</div>
		 <div class="para">
			For convenience and if it makes sense, the IP address and the numeric part of the hostname (if there is one) will automatically be incremented by one, after a host was added. So in most cases, these fields will not have to be changed manually to add the next host. Only the new MAC will need to be entered.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/new_host/window-select.png" width="85%" alt="Table of unknown MACs" /><div class="caption">
				<div class="para">
					Table of unknown MACs
				</div>
				</div></div>
			 To help adding new hosts, qlumand scans the <code class="filename">DHCP log file</code> for unknown hosts that have requested an IP address. For each unknown host found in the logs, the table at the top of the window shows the time of the first and last appearance in the log, its MAC address as well as the hardware vendor this MAC is assigned too (if known). Selecting a MAC in the table copies it into the MAC text field at the bottom and a double-click adds the host with the selected MAC. One can also select multiple lines (by holding the <span class="keycap"><strong>CTRL</strong></span> key and clicking or holding the <span class="keycap"><strong>shift</strong></span> key and dragging the mouse) and then click the <span class="guibutton"><strong>Add Selected</strong></span> button at the bottom to add them all using the auto-increment feature for the IP address and hostname. If unsure, try adding a single host first and check the auto-increment does the right thing before adding a group of hosts.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/new_host/window-template.png" width="85%" alt="Selecting a template for new hosts" /><div class="caption">
				<div class="para">
					Selecting a template for new hosts
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/new_host/window-copy_host.png" width="85%" alt="Select host to copy settings from" /><div class="caption">
				<div class="para">
					Select host to copy settings from
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/new_host/window-copy_host2.png" width="85%" alt="Copy settings to new hosts" /><div class="caption">
				<div class="para">
					Copy settings to new hosts
				</div>
				</div></div>
			 One easy way to add groups of hosts is to power them on one at a time with a short delay (say 30 seconds). The hosts will then appear in the Unknown MACs table in the order they were powered on and can be added as a group with the click of a single button.
		</div>
		 <div class="para">
			At the bottom of the window a <a class="link" href="#Host-Templates">Host Template</a> can be selected that will be used as the default for new hosts. Most of the time, no additional configuration is needed for a new host. As an alternative way to make settings for the new hosts, one can select an existing properly configured host and choose to copy its settings to the new ones.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Configuring-Hosts">
      ⁠</a>5.2. Configuring Hosts</h2></div></div></div>
		
		 <div class="para">
			The configuration of a host consists of the definition and assignment of different types of properties and config classes. Properties are always a key + value pair and are further split into generic, hardware and specific properties.
		</div>
		 <h3><a id="Hardware-Properties">
      ⁠</a>Hardware Properties</h3> <div class="para">
			<code class="literal">Hardware properties</code> are used to describe the hardware of a host. Amongst others, hardware properties like the amount of RAM or number of CPU cores are used to configure resource management systems like slurm or torque, so jobs can be assigned to the desired hosts. Others, like e.g. the server model or BIOS version, are purely informational and might be used for inventory management.
		</div>
		 <h3><a id="Generic-Properties">
      ⁠</a>Generic Properties</h3> <div class="para">
			A property that is not hardware related and not specific to a host is called generic. <code class="literal">Generic properties</code> can be configuration options, like <em class="parameter"><code>OpenSM Host</code></em>, or purely informational, like <em class="parameter"><code>Paid by</code></em>. While hardware properties are meant to be more rigid, typically with a configurable set of fixed values, generic properties are more flexible and can be defined at will. This will become more apparent in future versions of <span class="application"><strong>QluMan</strong></span>. <code class="literal">Generic properties</code> are also not necessarily unique, making it possible to assign multiple values for a single generic property. This is useful e.g. to add multiple torque host tags or to put hosts in multiple groups for dsh/pdsh (via the 'Host tag').
		</div>
		 <h3><a id="Specific-Properties">
      ⁠</a>Specific Properties</h3> <div class="para">
			As the name suggests, <code class="literal">specific properties</code> are specific to a single host. The best example for such a property is the serial number of the host.
		</div>
		 <h3><a id="PropConf-Sets">
      ⁠</a>Property/Config Sets</h3> <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_template.png" width="85%" alt="Selecting a Host Template" /><div class="caption">
				<div class="para">
					Selecting a Host Template
				</div>
				</div></div>
			 Individual generic properties, hardware properties and config classes can be used to define generic property sets, hardware property sets and config sets. This is simply a means of grouping them together so they can be used as a single entity. A <code class="literal">Host Template</code> can then be created by choosing one generic property set, one hardware property set and one config set.
		</div>
		 <h3><a id="Host-Templates">
      ⁠</a>Host Templates</h3> <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_template2.png" width="85%" alt="Selecting a Host Template for multiple hosts" /><div class="caption">
				<div class="para">
					Selecting a Host Template for multiple hosts
				</div>
				</div></div>
			 When a correct <code class="literal">Host Template</code> exists, a host can be configured by selecting the desired template in the <code class="classname">Enclosure View</code> window. For a single host, this can be done by selecting it in the tree view. This brings up the host information on the right and a template can be selected from the drop-down menu. To configure multiple hosts, you would select them in the tree view and choose a <code class="literal">Host Template</code> from the context menu. The check-marks in the sub-menu indicate which <code class="literal">Host Templates</code> are currently assigned (if any) for the selected nodes. This action will override the previous assignment.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/enclosure_view/select_generic_property.png" width="85%" alt="Selecting a Generic Property" /><div class="caption">
				<div class="para">
					Selecting a Generic Property
				</div>
				</div></div>
			 <code class="literal">Generic properties</code> can also be assigned to a host individually. Such assigned properties take precedence over ones of the same type selected through the <code class="literal">Host Template</code>. This is useful when a property should be changed temporarily for some hosts or when a property should not be changeable globally through the Host Template. Note that by default, every new host has the generic property <em class="parameter"><code>Schedule Format: always</code></em>, which is required to format the disk on the first boot. This should be removed after the first successful boot of the host, so that log files will be preserved across boots in the future.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-HWwizard">
      ⁠</a>Chapter 6. Hardware Wizard</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-HWwizard-purpose">6.1. Purpose</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-host-selection">6.2. Selecting Hosts</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-template">6.3. Configuring the Host Template</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-hw-prop-set">6.4. Selecting a Hardware Property Set</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-resolve-conflict">6.5. Resolving Hardware Conflicts</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-HWwizard-per-host-hw-prop-set">6.5.1. Resolving by per-host Hardware Property Sets</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-HWwizard-gen-prop-set">6.6. Selecting a Generic Property Set / Config Set</a></span></dt><dt><span class="section"><a href="#sec-HWwizard-summary">6.7. Summary Page</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-purpose">
      ⁠</a>6.1. Purpose</h2></div></div></div>
		
		 <div class="para">
			When setting up new hosts, there are a number of configuration or other settings to be made. They are used to specify their hardware configuration, to determine what OS they should boot and to fine-tune the behavior of applications running on them. All the necessary steps for the desired configuration of the nodes can be done manually and also be changed later through the various dialogs from the main window.
		</div>
		 <div class="para">
			As a convenient alternative, the <code class="classname">Hardware Wizard</code> guides you through the necessary configuration steps with a special emphasis on the hardware configuration. It uses the auto-detected hardware properties of hosts to suggest their optimal configuration options. Furthermore, it tries to keep a balance between the available configuration strategies: Using templates, property/config sets or individual properties/config classes.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-host-selection">
      ⁠</a>6.2. Selecting Hosts</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/host_selection.png" width="85%" alt="Selecting hosts for configuration" /><div class="caption">
				<div class="para">
					Selecting hosts for configuration
				</div>
				</div></div>
			 The first step is to select the hosts that should be configured. Initially, the lists of hosts is empty. One or more of the four buttons at the bottom have to be pressed to pre-select hosts that should be considered. The <span class="guibutton"><strong>Unconfigured</strong></span> button adds all hosts that do not have any hardware configured at all. A freshly added host without an assigned <code class="classname">Host Template</code> will fall into this category. The <span class="guibutton"><strong>Partially Configured</strong></span> button adds hosts that already have some hardware configured correctly but not all of it. The <span class="guibutton"><strong>Wrongly Configured</strong></span> button adds hosts, where the configured hardware properties do not match the hardware detected at boot, e.g. when nodes have been updated with more ram. Finally, the <span class="guibutton"><strong>Selected</strong></span> button adds hosts, that have been selected in the enclosure view, including hosts that are configured correctly already.
		</div>
		 <div class="para">
			Once one or more of the buttons are pressed, the affected hosts will show up in the table. To keep things compact, hosts with identically detected hardware are grouped together and shown in <span class="emphasis"><em>hostlist syntax</em></span>. By default, all shown groups are selected and will be configured using a single <code class="classname">Host Template</code> and therefore single <code class="classname">Hardware Property</code>, <code class="classname">Generic Property</code> and <code class="classname">Config Set</code>. The possible differences in hardware configurations within the list of selected hosts will be handled by the wizard with the <span class="emphasis"><em>per host</em></span> settings. In case all the groups shouldn't use the same <code class="classname">Host Template</code>, groups may be selected or deselected individually and the remaining ones can be configured by running the wizard again later. Groups of hosts with identical hardware can't be split up though. If this is required, select the hosts individually in the <code class="classname">Enclosure View</code> and use only the <span class="guibutton"><strong>Selected</strong></span> button. Once the desired groups of hosts have been selected click <span class="guibutton"><strong>Next</strong></span> to continue configuring them.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-template">
      ⁠</a>6.3. Configuring the Host Template</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/template-existing.png" width="85%" alt="A well matching Hardware Property set" /><div class="caption">
				<div class="para">
					A well matching Hardware Property set
				</div>
				</div></div>
			 As explained in <a class="xref" href="#sec-Configuring-Hosts">Section 5.2, “Configuring Hosts”</a> the major part of a hosts configuration is derived from a <code class="classname">Host Template</code>. One of the wizard's goals is, to find an existing <code class="classname">Host Template</code> with a <code class="classname">Hardware Property set</code> that optimally matches the detected hardware for at least some of the selected hosts. If such a <code class="classname">Host Template</code> is found, it will be pre-selected and the <span class="guibutton"><strong>Use existing Host Template</strong></span> choice will be active.
		</div>
		 <div class="para">
			The settings inherited from this template, are shown underneath in tree format and below the property tree, a list of hosts, that currently use the selected template, is shown for informational purpose.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/template-existing-tooltip.png" width="85%" alt="Tooltip explaining the coloring" /><div class="caption">
				<div class="para">
					Tooltip explaining the coloring
				</div>
				</div></div>
			 The individual properties belonging to the <code class="classname">Hardware Property Set</code> of the selected <code class="classname">Host Template</code> are color-coded, to show how well they fit the detected values of the host groups being configured. Hovering over a hardware property brings up a helpful tool-tip explaining the coloring. A green bulb indicates, that the property matches the detected value for all hosts. A yellow one, that it matches some but not all hosts. This happens, when some of the selected hosts have different hardware and means that the selected template is still a good fit. A red bulb indicates that the value matches none of the hosts and is a bad fit. Such a property value may be changed later in the follow-up pages or a different <code class="classname">Host Template</code> can be selected right-away.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/template-existing-menu.png" width="85%" alt="Choosing alternative Host Templates" /><div class="caption">
				<div class="para">
					Choosing alternative Host Templates
				</div>
				</div></div>
			 In case the pre-selected <code class="classname">Host Template</code> is not the desired choice, a different one can be selected from the drop-down menu. The choices are again color-coded to indicate how well they match the detected properties of the selected hosts. Here a green bulb means that the <code class="classname">Host Template</code> matches the detected hardware of at least one host perfectly. A yellow one means that not all hardware properties for the hosts are part of the template, but at least nothing is configured wrongly.
		</div>
		 <div class="para">
			Finally, a red bulb indicates, that the <code class="classname">Host Template</code> includes a hardware property, that matches none of the hosts and would be a bad fit. Nonetheless such a template might still be the right choice, since it can be modified for an optimal fit in the follow-up page. Alternatively, the correct hardware properties can be set on a per host basis by the wizard at a later stage .
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/template-clone.png" width="85%" alt="Cloning a Host Template" /><div class="caption">
				<div class="para">
					Cloning a Host Template
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/template-new.png" width="85%" alt="Generating a new Host Template" /><div class="caption">
				<div class="para">
					Generating a new Host Template
				</div>
				</div></div>
			 If none of the existing <code class="classname">Host Templates</code> are suitable, a new one can be created in one of two ways: Either an existing template can be cloned or a completely new one can be created. In both cases, a name for the new template must be given.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-hw-prop-set">
      ⁠</a>6.4. Selecting a Hardware Property Set</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-existing.png" width="85%" alt="Using an existing HW Property Set" /><div class="caption">
				<div class="para">
					Using an existing HW Property Set
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-existing-menu.png" width="85%" alt="Choose an alternative HW Property Set" /><div class="caption">
				<div class="para">
					Choose an alternative HW Property Set
				</div>
				</div></div>
			 This page selects the <code class="classname">HW Property Set</code> to be used in the selected <code class="classname">Host Template</code>. It is the main source for the node's hardware configuration. Like in the previous page an existing <code class="classname">HW Property Set</code> can be used/cloned or a new one may be created. Most likely an existing set will be suggested by the wizard. Alternatives are selectable from the drop-down menu. The available choices are again color-coded indicating how well they match the detected host properties.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-modify_template.png" width="85%" alt="Confirm HW Property Set modification" /><div class="caption">
				<div class="para">
					Confirm HW Property Set modification
				</div>
				</div></div>
			 Changing the <code class="classname">HW Property Set</code> at this stage, will affect the selected <code class="classname">Host Template</code>. If an existing <code class="classname">Host Template</code> was chosen in the previous page, changing it might affect hosts other than the ones being configured in the wizard. In such a case, the wizard will ask for confirmation that such a change is desired.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-existing-select_hw_prop.png" width="85%" alt="Select alternative values for HW properties" /><div class="caption">
				<div class="para">
					Select alternative values for HW properties
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-existing-copied.png" width="85%" alt="HW Property Set in edit-mode" /><div class="caption">
				<div class="para">
					HW Property Set in edit-mode
				</div>
				</div></div>
			 A selected existing <code class="classname">HW Property Set</code> may be modified for a better fit by using the auto-detected <code class="classname">HW Properties</code> displayed at the bottom right. If multiple groups of hosts are being configured at the same time, the properties, where hosts differ, will have a drop-down menu to select the most suitable value. Once the desired selection is made, the properties can be copied over the existing <code class="classname">HW Property Set</code> by clicking the <span class="guibutton"><strong>&lt;&lt;</strong></span> button. The wizard will ask for confirmation, in case this would impact hosts not currently being configured. Finally, it will set the <code class="classname">HW Property Set</code> displayed at the bottom left into edit-mode.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-clone.png" width="85%" alt="Cloning a HW Property Set" /><div class="caption">
				<div class="para">
					Cloning a HW Property Set
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-new.png" width="85%" alt="Creating an empty new HW Property Set" /><div class="caption">
				<div class="para">
					Creating an empty new HW Property Set
				</div>
				</div></div>
			 The described behavior is analogous when cloning or creating a new set. The difference between the two cases lies merely in the <code class="classname">HW Properties</code> that will be pre-selected: While cloning will start with the properties of the cloned set, creating a new one initially will have none.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-new-add_property.png" width="85%" alt="Adding a new HW Property" /><div class="caption">
				<div class="para">
					Adding a new HW Property
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/hw_prop_set-new-remove_property.png" width="85%" alt="Removing a HW Property" /><div class="caption">
				<div class="para">
					Removing a HW Property
				</div>
				</div></div>
			 In all three cases, the <code class="classname">HW Property Set</code> can be further edited by selecting different values for properties, adding new ones or by removing some of them (both from the context-menu). Once the desired <code class="classname">HW Properties</code> are selected, click <span class="guibutton"><strong>Next</strong></span> to continue.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-resolve-conflict">
      ⁠</a>6.5. Resolving Hardware Conflicts</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/resolve_hardware_conflict.png" width="85%" alt="Resolving conflicts by direct property assignment" /><div class="caption">
				<div class="para">
					Resolving conflicts by direct property assignment
				</div>
				</div></div>
			 If more than one group of hosts is being configured at the same time or if the selected <code class="classname">HW Property Set</code> doesn't match all properties of the hosts to be configured, then the <code class="classname">Resolve Hardware Conflict</code> page will appear next. At the bottom of it, the conflicting or missing <code class="classname">HW Properties</code> are listed showing the detected value for each group of hosts. If only a single property is missing, the wizard will suggest to add this property individually per host.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/resolve_hardware_conflict-sets.png" width="85%" alt="Resolving conflicts by direct property set assignment" /><div class="caption">
				<div class="para">
					Resolving conflicts by direct property set assignment
				</div>
				</div></div>
			 On the other hand, if multiple properties are missing, adding a directly assigned <code class="classname">HW Property Set</code> per host might be preferable and will be the pre-selected choice. There is not really a wrong choice here. To some extent, the chosen option is a matter of taste.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				One can also choose <span class="guibutton"><strong>configure manually later</strong></span> to tell the wizard to ignore the conflict. Be aware, that this will result in hosts that are only partially or wrongly configured and hence will need to be corrected later.
			</div>

		</div></div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-HWwizard-per-host-hw-prop-set">
      ⁠</a>6.5.1. Resolving by per-host Hardware Property Sets</h3></div></div></div>
			
			 <div class="para">
				<div class="mediaobject"><img src="images/hw_wizard/per_host_hw_prop_set.png" width="85%" alt="Selecting or creating a HW Property Set" /><div class="caption">
					<div class="para">
						Selecting or creating a HW Property Set
					</div>
					</div></div>
				 If per-host <code class="classname">HW Property Sets</code> was chosen in the previous page, the set to be used for each group must be picked here. The Wizard will try to find an existing <code class="classname">HW Property Set</code> that already contains the correct <code class="classname">Hardware Properties</code> for each group. If such a set is found, it will be pre-selected. Otherwise, the only option is to generate a new set, for which a name must be entered, before it's possible to continue.
			</div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-gen-prop-set">
      ⁠</a>6.6. Selecting a Generic Property Set / Config Set</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/gen_prop_set.png" width="85%" alt="Selecting a Generic Property Set" /><div class="caption">
				<div class="para">
					Selecting a Generic Property Set
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/config_set.png" width="85%" alt="Selecting a Config Set" /><div class="caption">
				<div class="para">
					Selecting a Config Set
				</div>
				</div></div>
			 To complete the setup of the <code class="classname">Host Template</code>, a <code class="classname">Generic Property Set</code> and a <code class="classname">Config Set</code> must be selected. The two wizard pages handling this are very much alike, and similar to the one for selecting the <code class="classname">HW Property Set</code>. Again, there are three main options: Using/cloning an existing set, or creating a new empty one. Since there is no auto-detection for the values in these two types of sets, there is no color-coding of the choices in this case.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/gen_prop_set-add_property.png" width="85%" alt="Selecting Generic Properties" /><div class="caption">
				<div class="para">
					Selecting Generic Properties
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/hw_wizard/config_set-add_property.png" width="85%" alt="Selecting values for Config Classes" /><div class="caption">
				<div class="para">
					Selecting values for Config Classes
				</div>
				</div></div>
			 An existing set can not be modified in the current <code class="classname">QluMan</code> version, but if <span class="guibutton"><strong>clone existing set</strong></span> or <span class="guibutton"><strong>new empty set</strong></span> is chosen, the properties and configs can be added to or removed from the new set. If the hosts have IPMI, the IPMI properties might need to be set in the <code class="classname">Select Generic Property Set</code> page. On the other hand, in the <code class="classname">Select Config Set</code> page, the Boot, Disk, and Slurm configs, are the most likely candidates for settings that need to be selected and fine-tuned.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-HWwizard-summary">
      ⁠</a>6.7. Summary Page</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/hw_wizard/summary.png" width="85%" alt="The wizard's summary page" /><div class="caption">
				<div class="para">
					The wizard's summary page
				</div>
				</div></div>
			 This is the concluding page of the wizard. It asks for the final confirmation of all the choices made, before the corresponding settings will actually be stored in the database. At the top of the page, the configurations derived from the <code class="classname">Host Template</code> (hence common to all hosts) are shown in tree-form. At the bottom, the additional <code class="classname">Hardware Properties</code> and/or <code class="classname">Hardware Property Sets</code>, that will be set for each group of hosts on a per-host basis, are listed. In case of conflicts, they potentially override the values of the <code class="classname">Host Template</code>. Host groups with no per-host overrides are not shown here.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				If an existing <code class="classname">Host Template</code> or <code class="classname">Hardware Property Set</code> was modified during the wizard procedure, then this is the last chance to drop out. By clicking <span class="guibutton"><strong>Finish</strong></span>, all the modifications are made permanent, and the configuration settings will be assigned to the selected hosts. The latter should then be fully configured, and after writing the changes (see <a class="xref" href="#sec-Writing-Config-Files">Section 7.2, “Writing Config Files”</a>), will be ready to (re)boot.
			</div>

		</div></div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Config-Classes">
      ⁠</a>Chapter 7. Config Classes</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Config-Classes-Overview">7.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Writing-Config-Files">7.2. Writing Config Files</a></span></dt><dt><span class="section"><a href="#sec-Boot-Configs">7.3. Boot Configs</a></span></dt><dt><span class="section"><a href="#sec-DHCP-Config">7.4. DHCP Config</a></span></dt><dt><span class="section"><a href="#sec-Disk-Configs">7.5. Disk Configs</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Config">7.6. Slurm Config</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Slurm-Overview">7.6.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Config-Header">7.6.2. Slurm Config Header</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Node-Groups">7.6.3. Slurm Node Groups</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Partitions">7.6.4. Slurm Partitions</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Property-Editor">7.6.5. Slurm Property Editor</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Gres-Groups">7.6.6. Slurm Gres Groups</a></span></dt><dt><span class="section"><a href="#sec-Slurm-Assign-Hosts">7.6.7. Assigning Hosts to Slurm Node Groups, Partitions and Gres Groups</a></span></dt><dt><span class="section"><a href="#sec-GPUwizard">7.6.8. GPU Wizard</a></span></dt></dl></dd></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Config-Classes-Overview">
      ⁠</a>7.1. Overview</h2></div></div></div>
		
		 <div class="para">
			<code class="classname">Config Classes</code> manage configurations that are too complex to fit into the key + value scheme used by properties. Therefore, there is no common interface to configure all classes. Instead, each class has its own configuration dialog, presenting the specific options it provides. Furthermore, some classes depend on sub-classes (e.g. <code class="classname">Boot Configs</code> depend on <code class="classname">Qlustar Images</code>). Only the top-level <code class="classname">Config Classes</code> are directly assignable to a <code class="classname">Config Set</code> or a host. Sub-classes are assigned indirectly via their parent class. Most of the functional subsystems of <span class="productname">Qlustar</span> have a dedicated <code class="classname">Config Class</code>. Currently, there are four of them: <code class="classname">Boot</code>, <code class="classname">DHCP</code>, <code class="classname">Disk</code>, and <code class="classname">Slurm Configs</code> complemented by a single sub-class, <code class="classname">Qlustar Images</code>.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Writing-Config-Files">
      ⁠</a>7.2. Writing Config Files</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/write_files/main.png" width="85%" alt="The Write Files dialog" /><div class="caption">
				<div class="para">
					The Write Files dialog
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/write_files/with_changes.png" width="85%" alt="The Write Files dialog with pending changes" /><div class="caption">
				<div class="para">
					The Write Files dialog with pending changes
				</div>
				</div></div>
			 The configurations managed in the <span class="application"><strong>QluMan</strong></span> GUI via <code class="classname">Config Classes</code> and sub-classes, are translated into automatically generated configuration files on the head-node(s). While <span class="application"><strong>QluMan</strong></span> configuration options are usually saved in the <span class="application"><strong>QluMan</strong></span> database immediately after they have been entered in the GUI, the write process of the real configuration files on disk is a separate step, that needs to be specifically initiated and confirmed.
		</div>
		 <div class="para">
			Each configuration dialog of a config class has a <span class="guibutton"><strong>Preview</strong></span> and a <span class="guibutton"><strong>Write</strong></span> button for its own config files. Additionally, there is a dedicated dialog for writing and previewing <span class="bold bold"><strong>all</strong></span> configuration files. You can access the latter from <span class="guimenuitem"><strong>Manage Cluster</strong></span>-&gt;<span class="guimenuitem"><strong>Write Files</strong></span> or via the <span class="guibutton"><strong>Write Files</strong></span> button at the bottom right of the main window.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/preview_diff/view.png" width="85%" alt="Display of a config's content" /><div class="caption">
				<div class="para">
					Display of a config's content
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/preview_diff/diff_one.png" width="85%" alt="Display of a single config's content including a diff" /><div class="caption">
				<div class="para">
					Display of a single config's content including a diff
				</div>
				</div></div>
			 <div class="mediaobject"><img src="images/preview_diff/diff_many.png" width="85%" alt="Display of multiple configs including their diffs" /><div class="caption">
				<div class="para">
					Display of multiple configs including their diffs
				</div>
				</div></div>
			 If a config class has no pending changes, the <span class="guibutton"><strong>Preview</strong></span> button becomes a <span class="guibutton"><strong>View</strong></span> button and the <span class="guibutton"><strong>Write</strong></span> button becomes ghosted. The Preview window shows both, the new version of the config file that will be written, as well as a <em class="parameter"><code>context diff</code></em> of the changes compared to the current file on disk (if there are any differences). If a <code class="classname">Config Class</code> changes only one file, that file will be shown directly. If multiple files are involved, there will be one tab for each file.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Checking the optional <span class="guibutton"><strong>Force</strong></span> button, will initiate a rewrite of all config files, even if they haven't changed.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				The actual write command is performed via the <a class="link" href="#chap-RX-Engine">Qlustar RXEngine</a>. This allows for <span class="bold bold"><strong>consistent management</strong></span> of multiple head-nodes e.g. in a high-availability configuration.
			</div>

		</div></div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Boot-Configs">
      ⁠</a>7.3. Boot Configs</h2></div></div></div>
		
		 <div class="para">
			<div class="mediaobject"><img src="images/boot_config/collapsed.png" width="85%" alt="Boot Config dialog" /><div class="caption">
				<div class="para">
					Boot Config dialog
				</div>
				</div></div>
			 The <code class="classname">Boot Config</code> dialog allows to define settings for the PXE/tftp boot server. A boot configuration determines which <a class="link" href="#sec-Qlustar-OS-Images">Qlustar OS image</a> is delivered to a node, and optionally permits the specification of <em class="firstterm">PXELinux</em> commands and/or Linux kernel parameters. When opened, the <code class="classname">Boot Config</code> window shows a collapsed tree-list of all boot configs currently defined, sorted by their names.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Note that the <code class="classname">default config</code> is special: It applies to any node without a specifically assigned (either through a template or directly) <code class="classname">Boot Config</code>. This means, that in the simplest configuration, where all nodes should boot identically, having just the <code class="classname">default config</code> will be sufficient.
			</div>

		</div></div>
		 <div class="para">
			<div class="mediaobject"><img src="images/boot_config/context_menu.png" width="85%" alt="Changing a Boot Config" /><div class="caption">
				<div class="para">
					Changing a Boot Config
				</div>
				</div></div>
			 By expanding a <code class="classname">Boot Config</code> item, the configured <span class="productname">Qlustar</span> image, PXELinux command, and kernel parameters become visible. You can change any of the values, by simply selecting a different option from the drop-down menus. In case of kernel parameters, you can also directly edit the entry and save the result by pressing <span class="keycap"><strong>return</strong></span>. Furthermore, it is possible to add more kernel parameters or remove them through the context menu.
		</div>
		 <div class="para">
			<div class="mediaobject"><img src="images/boot_config/new.png" width="85%" alt="Creating new Boot Configs" /><div class="caption">
				<div class="para">
					Creating new Boot Configs
				</div>
				</div></div>
			 The context menu also lets you create new <code class="classname">Boot Configs</code> and edit or delete an existing one. Alternatively, a new <code class="classname">Boot Config</code> can be created by clicking the <span class="guibutton"><strong>New</strong></span> button at the bottom of the dialog. Both, the context menu and the button bring up the <code class="classname">New Boot Config</code> dialog. Simply enter the name and description for the new config, select a Qlustar image and (optionally) a PXELinux command. Finally press <span class="guibutton"><strong>OK</strong></span> to create it. The new config will then appear in the <code class="classname">Boot Config</code> window and will be ready for use.
		</div>
		 <div class="para">
			Pressing the <span class="guibutton"><strong>Boot Parameter Editor</strong></span> button at the bottom of the dialog, will bring up a small edit dialog, where kernel parameters can be created, edited, or deleted.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-DHCP-Config">
      ⁠</a>7.4. DHCP Config</h2></div></div></div>
		
		 <div class="para">
			 The <code class="classname">DHCP config</code> dialog allows the configuration of the DHCP server and is provide by the main menu <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>DHCP Configs</strong></span>. The final DHCP server configuration file on disk is assembled from the header which defines global settings and the host part which contains the MAC/IP address and hostname of all the hosts registered with <span class="application"><strong>QluMan</strong></span>. The header can freely be edited in the <code class="classname">Global DHCP Template</code> part of the dialog. An initial version of it is created during installation and in most cases doesn't need to be changed. It contains many important parameters required for the cluster to function properly. Please consult the documentation of the DHCP server and the <code class="filename">dhcpd.conf</code> man page for the syntax of this file.
		</div>
		 <div class="para">
			 To prevent multiple persons from editing at the same time and overwriting each others changes accidentally you must acquire a lock for the template by clicking the <span class="guibutton"><strong>Edit</strong></span> button. If another user is already editing the file the button will be ghosted and the tool tip will show which user is holding a lock for the template.
		</div>
		 <div class="para">
			 After having finished editing a template don't forget to save your changes by clicking the <span class="guibutton"><strong>Save</strong></span> button. It will be ghosted, if there is nothing to save. You can undo all your changes up to the last time the template was saved by clicking the <span class="guibutton"><strong>Undo</strong></span> button. In case another admin has made changes to a template while you are viewing or editing it, the <span class="guibutton"><strong>Refresh</strong></span> button will become enabled. By clicking it, the updated template is shown and you loose any unsaved changes you have already made in your own edit field. To delete a template click the <span class="guibutton"><strong>Delete</strong></span> button. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					Note that the "Global Template" can not be deleted, since it is needed for the DHCP server to function correctly.
				</div>

			</div></div>

		</div>
		 <div class="para">
			 The template lock expires automatically after some time without activity so that the template is not deadlocked if someone forgets to release the lock. In such a case the above dialog will be shown notifying you about it. By selecting <span class="guibutton"><strong>OK</strong></span> a new lock will be requested. If another user is editing the template at that time though the request will fail and an error dialog will inform you of the failure.
		</div>
		 <div class="para">
			 DHCP options can also be set in separate group templates and targeted to specific hosts. For simple clusters, this is hardly ever needed, but for large clusters e.g. you might want to have more than one boot server to speed up cluster boot time. In this case you could assign different groups of hosts to different boot servers using this method. The defined group templates are available as configs to be added to config sets or hosts directly. You can select a group template from the drop-down menu at the bottom to view or edit it. As an example 2 templates specifying different boot-servers are included.
		</div>
		 <div class="para">
			  The drop-down menu also lets you create new templates by selecting the <span class="guimenuitem"><strong>new DHCP group</strong></span> entry. Enter the name of the template in the text field and fill in the contents and description of the template. Pressing <span class="keycap"><strong>return</strong></span> after entering the name will automatically acquire a lock for the new template and go into edit mode. You can then enter the contents of the new template. Don't forget to click the <span class="guibutton"><strong>Save</strong></span> button at the end.
		</div>
		 <div class="para">
			When you are satisfied with your changes, you can preview the resulting <code class="filename">dhcpd.conf</code> file together with a diff to the old version on disk by clicking the <span class="guibutton"><strong>Preview</strong></span> button. The changes will only take full effect when you click the <span class="guibutton"><strong>Write</strong></span> button. This will also tell the DHCP server to reload its configuration. The same can also be done through the main menus <span class="guimenuitem"><strong>Manage Cluster</strong></span>-&gt;<span class="guimenuitem"><strong>Write Files</strong></span> entry or the <span class="guibutton"><strong>Write Files</strong></span> button at the bottom of the cluster window and then selecting <span class="guibutton"><strong>Preview</strong></span> or <span class="guibutton"><strong>Write</strong></span> button in the DHCP Configs row.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Disk-Configs">
      ⁠</a>7.5. Disk Configs</h2></div></div></div>
		
		 <div class="para">
			<span class="productname">Qlustar</span> has a powerful mechanism to manage the configuration of disks on a node. This mechanism is partly based on the setup_storage module of <a href="http://fai-project.org/___blank___">FAI</a>. It basically allows for any automatic setup of your hard drives including kernel software RAID (md) and <em class="firstterm">LVM</em> setups. A detailed description of the syntax for disk configurations is <a href="http://fai-project.org/doc/man/setup-storage.html"> available</a>. Since the OS of a <span class="productname">Qlustar</span> node is always running from RAM, a disk-less configuration is obviously also possible. Note, that for flawless operation this requires some extra configuration (handling of log messages and in/output of batch jobs) that will be explained in the <span class="productname">Qlustar</span> admin guide. Valid configurations require definitions for two filesystems /var and /scratch as well as swap space (see examples). To permit the initial formatting of a new disk configuration on a node, it must have assigned the <em class="parameter"><code>Schedule Format: always</code></em> generic property during the initial boot (see the discussion <a class="xref" href="#PropConf-Sets">Property/Config Sets</a>.
		</div>
		 <div class="para">
			 Disk configurations can be managed using the <code class="classname">Disk Configs</code> dialog accessible from the main menu <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>Disk Configs</strong></span>. You can select the config to be viewed/edited from the drop-down menu at the bottom left. A couple of example configurations are created during the installation. Note that there are two special configs: (a) "disk-less" (not editable or deletable) and (b) "default" (editable but not deletable). The default config is used for any node that doesn't have a specific assignment to a disk config (via a Host Template, config set). The configuration itself can be edited in the text field at the top of the dialog and should conform to setup_storage syntax (see above). New configs can be created by choosing <span class="guimenuitem"><strong>new disk config</strong></span> from the drop-down menu. As usual, enter the name of the new config in the text field and fill in the contents and description.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Slurm-Config">
      ⁠</a>7.6. Slurm Config</h2></div></div></div>
		
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Overview">
      ⁠</a>7.6.1. Overview</h3></div></div></div>
			
			 <div class="para">
				The slurm configuration module comes in four parts:
			</div>
			 <div class="para">
				<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
						<div class="para">
							The overall slurm configuration being controlled through two templates in the <code class="classname">Config Header</code> tab.
						</div>

					</li><li class="listitem">
						<div class="para">
							The configuration of slurm nodes done via the <code class="classname">Node Groups</code> tab.
						</div>

					</li><li class="listitem">
						<div class="para">
							The configuration of partitions achieved by using the <code class="classname">Partitions</code> tab.
						</div>

					</li><li class="listitem">
						<div class="para">
							The configuration of gres groups achieved using the <code class="classname">Gres Groups</code> tab.
						</div>

					</li></ul></div>

			</div>
			 <div class="para">
				Assignment of hosts to node groups and/or partitions is possible by adding the latter to the relevant <code class="classname">Config Sets</code> and <code class="classname">Host Templates</code> or by direct assignment through the generic property context menu.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Config-Header">
      ⁠</a>7.6.2. Slurm Config Header</h3></div></div></div>
			
			 <div class="para">
				    The overall slurm configuration is split into two templates, the slurm config and <code class="filename">cgroups.conf</code>. On write, <span class="application"><strong>QluMan</strong></span> adds the NodeName and PartitionName lines at the end of the slurm config template to generate the <code class="filename">slurm.conf</code> file, while the <code class="filename">cgroup.conf</code> file gets written as is. For the syntax of both templates, please refer to the slurm documentation (e.g. <code class="code">man slurm.conf</code>). To edit one of the templates, select it, click the <span class="guibutton"><strong>Edit</strong></span> button and start making changes. Click <span class="guibutton"><strong>Save</strong></span> to save the changes or <span class="guibutton"><strong>Undo</strong></span> to discard them. Use the <span class="guibutton"><strong>Preview</strong></span> button to check changes before writing them.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Node-Groups">
      ⁠</a>7.6.3. Slurm Node Groups</h3></div></div></div>
			
			 <div class="para">
				 Slurm node properties are configured from two sources:
			</div>
			 <div class="para">
				<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
						<div class="para">
							The <a class="xref" href="#Hardware-Properties">Hardware Properties</a> assigned to a host. The number of CPUs, sockets, cores and the size of its main memory is taken from there.
						</div>

					</li><li class="listitem">
						<div class="para">
							The second source are the slurm node groups. Every host can belong to at most one such group. The membership is defined (see <a class="xref" href="#sec-Slurm-Assign-Hosts">Section 7.6.7, “Assigning Hosts to Slurm Node Groups, Partitions and Gres Groups”</a>) by adding the desired group to the <a class="link" href="#PropConf-Sets">Config Set</a> that is assigned to the node via its <a class="link" href="#Host-Templates">Host Template</a>. Each Node Group is a collection of slurm node properties, that will be set for the members of the group. Per default, only the <code class="code">MemSpecLimit</code> property is defined, but other properties like <em class="parameter"><code>Feature</code></em> or <em class="parameter"><code>Goes</code></em> can be added by using the <a class="link" href="#sec-Slurm-Property-Editor">Slurm Property Editor</a>.
						</div>

					</li></ul></div>

			</div>
			 <div class="para">
				   A new node group can be created by clicking the <span class="guibutton"><strong>New Node Group</strong></span> button or selecting <span class="guimenuitem"><strong>New Node Group</strong></span> from the context menu. This opens a dialog asking for the name of the new group. An existing node group can be renamed or deleted from the context menu.
			</div>
			 <div class="para">
				    The context menu also allows to add properties to a group. Note, that some properties are <span class="bold bold"><strong>unique</strong></span>, i.e. only one value can be selected for the property. Adding a second value of the same property will automatically replace the old value in that case. Other properties are not unique. Adding multiple values to such properties results in a comma separated list of values in the <code class="filename">slurm.conf</code> file. An example for this is the <em class="parameter"><code>Feature</code></em> property. Properties can also be changed directly using the pull-down menu. If a change will cause a duplicate value, the previous (duplicate) value is automatically removed.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Partitions">
      ⁠</a>7.6.4. Slurm Partitions</h3></div></div></div>
			
			 <div class="para">
				 The management of Slurm partitions works exactly the same way as with slurm node groups. Please see <a class="xref" href="#sec-Slurm-Node-Groups">Section 7.6.3, “Slurm Node Groups”</a> for how to create, rename and change partitions.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Property-Editor">
      ⁠</a>7.6.5. Slurm Property Editor</h3></div></div></div>
			
			 <div class="para">
				The Slurm property editor for node or partition properties can be opened by clicking the <span class="guibutton"><strong>Properties</strong></span> button at the bottom of the Slurm main dialog. If the <code class="classname">Node Groups</code> tab is selected, the editor for node properties will be opened. If the <code class="classname">Partitions</code> tab is selected, the editor for partition properties will be opened.
			</div>
			 <div class="para">
				  To add a new property, enter the name of the property in the name field. If the name does not already exist, the <span class="guibutton"><strong>New Property</strong></span> button will be enabled. Click on it to create the property. <span class="application"><strong>QluMan</strong></span> has a white-list of known valid properties, e.g. <em class="parameter"><code>Gres</code></em> and allows adding such a property without further questions. In this case, <span class="application"><strong>QluMan</strong></span> will also set the unique flag and add all known property values automatically.
			</div>
			 <div class="para">
				  When a property is created that is not on the white-list (<em class="parameter"><code>Gres</code></em> in the screenshot) a dialog opens up, asking for confirmation. Note that adding an unknown property can lead to a failure when trying to restart slurm. Therefore make sure to only add properties you are certain slurm will know about. A property without values can be deleted by clicking the <span class="guibutton"><strong>Delete</strong></span> button.
			</div>
			 <div class="para">
				    To add values to a property, first select the desired property using the pull-down menu from the name. Then enter the new property using <span class="guibutton"><strong>Add Value</strong></span> at the bottom and press <span class="keycap"><strong>return</strong></span> to add it. To delete a value, select <span class="guimenuitem"><strong>Delete value</strong></span> from the context menu.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Gres-Groups">
      ⁠</a>7.6.6. Slurm Gres Groups</h3></div></div></div>
			
			 <div class="para">
				  Currently, Slurm Gres Groups are used in Qluman mainly to handle the setup of GPUs for slurm. The <a class="link" href="#sec-GPUwizard">GPU Wizard</a> is the best way to create such resource groups. But the Gres Groups tab allows creating and managing any type of resource group, as well as binding GPUs to specific CPU sets, which the wizard does not use. To view or modify a Gres Group, select the group from the drop down menu. Use the <span class="guibutton"><strong>Preview</strong></span> button to check changes before writing them.
			</div>
			 <div class="para">
				      A new gres group can be created by clicking the <span class="guibutton"><strong>New Gres Group</strong></span> button. This opens a dialog asking for the type, name and description of the new group. An existing type can be selected from the drop down menu or a new type can be entered directly. After entering a new unique group name the <span class="guibutton"><strong>OK</strong></span> button becomes select-able. A group that is not in use can be deleted by clicking <span class="guibutton"><strong>Delete Group</strong></span>.
			</div>
			 <div class="para">
				       A Gres Group can have multiple entries. A new entry can be added to a group by clicking on <span class="guibutton"><strong>New Entry</strong></span>. At first the entry is blank and at a minimum the type column must be filled in. For resources that can be allocated in pieces the a count can be set for the number of pieces available. For resources that have a device file associated with it that can be set in the File column. Note that resources that have a file associated the count is not applicable since there is always only exactly one file. Last the entry can be associated with a set of CPUs. The CPUs to use can be entered as comma separated list or, for recurring sets, selected from the drop down menu. An entry can be deleted from the group by selecting <span class="guibutton"><strong>Delete Entry</strong></span> and a group that is no longer in use can be deleted by selecting <span class="guibutton"><strong>Delete Group</strong></span>.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Slurm-Assign-Hosts">
      ⁠</a>7.6.7. Assigning Hosts to Slurm Node Groups, Partitions and Gres Groups</h3></div></div></div>
			
			 <div class="para">
				   Host are assigned to Slurm <code class="classname">Node Groups</code> and <span class="bold bold"><strong>Partitions</strong></span> by use of a <a class="link" href="#Host-Templates">Host Template</a> and its corresponding <a class="link" href="#PropConf-Sets">Config Set</a>. A <code class="classname">Config Set</code> may contain at most one <code class="classname">Node Group</code> but any number of <span class="bold bold"><strong>Partitions</strong></span>, since a host can be member of an arbitrary number of slurm   partitions. Both can be added by selecting them via <span class="guimenuitem"><strong>Add Config</strong></span> in the context menu of the <code class="classname">Config Set</code>.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-GPUwizard">
      ⁠</a>7.6.8. GPU Wizard</h3></div></div></div>
			
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-GPUwizard-purpose">
      ⁠</a>7.6.8.1. Purpose</h4></div></div></div>
				
				 <div class="para">
					When setting up slurm, the general configuration for the hardware is taken from the hosts Hardware Properties. But configuring the GPUs is more complex and has is done through the Slurm Gres Groups as part of the slurm config glass. They are used to specify the type and number of GPUs, to determine what slurm jobs they should run. All the necessary steps for the desired configuration of the nodes can be done manually and also be changed later through the slurm config dialog from the main window.
				</div>
				 <div class="para">
					As a convenient alternative, the <code class="classname">GPU Wizard</code> guides you through the necessary configuration steps. It uses the auto-detected GPUs of hosts to suggest their optimal configuration options. Furthermore, it tries to keep a balance between the available configuration strategies: Using templates, config sets or individual config classes.
				</div>
				 <div class="para">
					Note: For GPUs to be detected on a host the host must first boot a Qlustar image that includes the nvidia module. Otherwise GPUs will be missed. Only nodes where GPUs have been detected can be configured through the GPU Wizard.
				</div>

			</div>
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-GPUwizard-host-selection">
      ⁠</a>7.6.8.2. Selecting Hosts</h4></div></div></div>
				
				 <div class="para">
					<div class="mediaobject"><img src="images/gpu_wizard/gpu_wizard__host_selection1.png" width="85%" alt="The host selection window" /><div class="caption">
						<div class="para">
							The host selection window
						</div>
						</div></div>
					 <div class="mediaobject"><img src="images/gpu_wizard/gpu_wizard__host_selection2.png" width="85%" alt="Selecting a host group for configuration" /><div class="caption">
						<div class="para">
							Selecting a host group for configuration
						</div>
						</div></div>
					 The first step is to select the hosts that should be configured. Initially, the lists of hosts is empty. One or more of the four buttons at the bottom have to be pressed to pre-select hosts that should be considered. The <span class="guibutton"><strong>Unconfigured</strong></span> button adds all hosts that do not have any GPU configured at all. The <span class="guibutton"><strong>Partially Configured</strong></span> button adds hosts that already have some GPUs configured correctly but not all of them. The <span class="guibutton"><strong>Wrongly Configured</strong></span> button adds hosts, where the configured GPUs do not match the GPUs detected at boot, e.g. when the GPU cards have been swapped for a newer model on the hosts. Finally, the <span class="guibutton"><strong>Selected</strong></span> button adds hosts, that have been selected in the enclosure view, including hosts that are configured correctly already.
				</div>
				 <div class="para">
					Note: Only hosts with auto-detected GPUs will be shown even if others are selected.
				</div>
				 <div class="para">
					Once one or more of the buttons are pressed, the affected hosts will show up in the table. To keep things compact, hosts with identically detected GPUs are grouped together and shown in <span class="emphasis"><em>hostlist syntax</em></span>. Select one of the shown groups and click <span class="guibutton"><strong>Next</strong></span> to start the configuration.
				</div>
				
			</div>

		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Other-Configs">
      ⁠</a>Chapter 8. Other Configs</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Qlustar-OS-Images">8.1. Qlustar OS Images</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Image-Versioning">8.1.1. Image Versioning</a></span></dt><dt><span class="section"><a href="#sec-Image-Properties">8.1.2. Image Properties</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-NIS-Hosts">8.2. NIS hosts</a></span></dt><dt><span class="section"><a href="#sec-SSH-Hosts">8.3. SSH host files</a></span></dt><dt><span class="section"><a href="#sec-UnionFS-Chroots">8.4. UnionFS Chroots</a></span></dt><dt><span class="section"><a href="#sec-Configuring-IB">8.5. Infiniband network</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Configuring-OpenSM">8.5.1. Activating/configuring OpenSM</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-IPMI-Settings">8.6. IPMI settings</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Qlustar-OS-Images">
      ⁠</a>8.1. Qlustar OS Images</h2></div></div></div>
		
		 <div class="para">
			 Qlustar OS images can be defined and configured in the <code class="classname">Qlustar Images</code> dialog accessible via <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>Qlustar Images</strong></span>. Each image has a unique name, a flavor (e.g. <code class="classname">trusty</code>), a version, a <a class="link" href="#sec-UnionFS-Chroots">chroot</a> and one or more image modules.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Image-Versioning">
      ⁠</a>8.1.1. Image Versioning</h3></div></div></div>
			
			 <div class="para">
				Currently available image versions are 9, 9.0 (both meta-versions) and 9.0.0. Note, that selecting meta-versions has implications on the update process. They allow tracking the newest x.y (x.y.z) releases automatically. Example: If you have installed version 9 of the modules, you will currently get the 9.0 (most recent 9.y) versions, but when 9.1 will be  available, <code class="code">apt-get dist-upgrade</code> will update to 9.1 versions automatically. So with this choice, updates will usually include larger changes, since new <span class="bold bold"><strong>feature</strong></span> releases (like 9.1) will automatically be installed.
			</div>
			 <div class="para">
				Similar, if you have selected the 9.0 version (currently default after a fresh installation) you will currently get 9.0.0 (most recent 9.0.z version) and <code class="code">apt-get dist-upgrade</code> will update the modules/images to 9.0.1 automatically once available. So this choice will update to new <span class="bold bold"><strong>maintenance</strong></span> releases automatically. The most conservative choice would be to explicitly select a x.y.z version (currently 9.0.0), since then images will only receive bug fix updates without explicitly changing the version in <span class="productname">Qlustar</span>. See also the discussion in the general <a href="../Administration_Manual/index.html#chap-Updating-Qlustar___blank___"> Qlustar Update Guide</a>
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Image-Properties">
      ⁠</a>8.1.2. Image Properties</h3></div></div></div>
			
			 <div class="para">
				 A couple of images are pre-defined during the installation process. The dialog shows the images sorted by their names. Expanding an entry shows its configuration and allows to select a UnionFS chroot via the drop-down menu. Each image must contain at least the core module. Additional modules can be added or removed using the context menu when hovering over an entry. Only modules that are not already chosen are available for selection.
			</div>
			 <div class="para">
				New images can be added through the context menu or by pressing the <span class="guibutton"><strong>New</strong></span> button at the bottom of the dialog. Like before, you should then enter the name for the new config, choose a UnionFS group and optionally provide a description for the new image. Existing images can be removed via the context menu.
			</div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-NIS-Hosts">
      ⁠</a>8.2. NIS hosts</h2></div></div></div>
		
		 <div class="para">
			 NIS (Network Information System) is used to manage hostname resolution within the cluster. For all hosts that are managed within <span class="application"><strong>QluMan</strong></span> itself, a corresponding NIS entry is created automatically. However, administrators might want to add other hosts external to the cluster to the NIS database as well. To achieve this, the creation of the NIS hosts database is split into a header part that can be freely edited by the admin, and a part that is auto-created with the hosts managed by <span class="application"><strong>QluMan</strong></span>. To edit the header part, choose <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>NIS Host Header</strong></span> from the main menu. The top part of the window popping up can then freely be edited. Note that entries for the head-node are automatically created upon installation and should remain unchanged unless one of the head-nodes IP changes. The resulting NIS hosts file can then be previewed and written to disk by pressing the corresponding dialogs at the bottom of the dialog. Upon writing the file, the NIS database is automatically rebuilt on the NIS master server.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-SSH-Hosts">
      ⁠</a>8.3. SSH host files</h2></div></div></div>
		
		 <div class="para">
			 To simplify ssh remote logins to cluster nodes, three ssh configuration files are provided and managed by <span class="application"><strong>QluMan</strong></span>: (a) <code class="filename">ssh_known_hosts</code> (holds ssh host keys of cluster nodes), (b) <code class="filename">shosts.equiv</code> (enables login without password between machines within the cluster) and (c) <code class="filename">authorized_keys</code>, which is used to allow password-less root login to nodes with the specified ssh public keys. The first two config files consist of a configurable header part, where additional hosts can freely be entered and an auto-generated part for the hosts managed by <span class="application"><strong>QluMan</strong></span>. The last one just has the configurable part. Ssh host info for the head-node and a possibly configured frontend-node are automatically inserted during the installation process.
		</div>
		 <div class="para">
			  Management of the three configs is similar to the <code class="classname">NIS hosts</code> dialog: To edit the header part of either config, select <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>SSH Configs</strong></span> from the main menu. Then choose the config to work on by using the drop-down menu at the bottom left. The top part of the window popping up can then freely be edited. Finally, the resulting ssh host files can be previewed and written to disk by pressing the corresponding dialogs at the bottom of the dialog. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					There is no preview of the <code class="filename">authorized_keys</code> file, as this is automatically written during the boot phase on hosts, that are not head-nodes.
				</div>

			</div></div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-UnionFS-Chroots">
      ⁠</a>8.4. UnionFS Chroots</h2></div></div></div>
		
		 <div class="para">
			In most practical cases, a <span class="productname">Qlustar</span> image should be configured with an associated UnionFS chroot. Exceptions are single purpose images e.g. for Lustre servers. By design, images are stripped down to the functionality (programs) that is most often needed on a compute/storage node. This keeps them small while still providing fast, network-independent access to programs/files typically used.
		</div>
		 <div class="para">
			To complement the image and provide the full richness of the packages/programs available in the chosen Linux distribution, the UnionFS chroot (holding a full installation of e.g. Ubuntu) is exported via NFS by one of the head-nodes and technically <span class="bold bold"><strong>merged below</strong></span> the content of the <code class="classname">Qlustar OS image</code>. In practice, this means that all files belonging to the chroot will be available on the nodes configured to use it, but if a file/program is also in the node's image, that one will be used. Hence, this method combines the <span class="bold bold"><strong>compactness and speed</strong></span> of the imaging approach with the <span class="bold bold"><strong>completeness</strong></span> of a full OS installation to give you the best of all worlds.
		</div>
		 <div class="para">
			  The chroot associated with a Qlustar image is easily selectable as explained (see <a class="xref" href="#sec-Qlustar-OS-Images">Section 8.1, “Qlustar OS Images”</a>). Management of the chroots themselves is possible via the <code class="classname">Manage Chroots</code> dialog which is accessible via the main menu <span class="guimenuitem"><strong>Manage Cluster</strong></span>-&gt;<span class="guimenuitem"><strong>Manage Chroots</strong></span>. It provides a number of actions related to chroots. Manipulation of the contents of chroots is explained <a href="../First_Steps_Guide/index.html#sec-Adding-Software___blank___">elsewhere</a>.
		</div>
		 <div class="para">
			 To <span class="bold bold"><strong>specify a chroot to operate on</strong></span>, select it via the corresponding pull-down menu. This will show its description, as well as its properties like the NFS server that hosts it, the filesystem path on the server, the flavor (edge platform, precise/wheezy/...) and the version of the <span class="productname">Qlustar</span> feature release (always being of the form x.y, e.g 8.1).
		</div>
		 <div class="para">
			  When <span class="bold bold"><strong>generating a new chroot</strong></span>, a name for the chroot must be specified and optionally a description of its purpose. Furthermore, you can select an NFS server where the chroot will be located (currently only one option), a flavor (aka edge platform) and <span class="productname">Qlustar</span> version. Finally you have the possibility to select <code class="classname">Qlustar tasks</code>. These are topic package bundles, each consisting of a collection of packages relevant to a certain field of HPC applications. Pressing the <span class="guibutton"><strong>OK</strong></span> button then starts the generation of the chroot. You can follow the rather lengthy process (count a couple of minutes) in its own window.
		</div>
		 <div class="para">
			   <span class="bold bold"><strong>Cloning an existing chroot</strong></span> is mostly useful when you want to test an upgrade to a new release or for other tests. Pressing the <span class="guibutton"><strong>Clone</strong></span> button opens a sub-window in which you can specify the name of the new cloned chroot and optionally a description of its purpose. Pressing the <span class="guibutton"><strong>OK</strong></span> button then starts the cloning process. You can again watch it in its own window. Editing a chroot let's you edit it's description.
		</div>
		 <div class="para">
			   <span class="bold bold"><strong>Removal of a chroot</strong></span> by pressing the <span class="guibutton"><strong>Remove</strong></span> button first asks you for a final confirmation. If you then press the <span class="guibutton"><strong>Delete</strong></span> button, the chroot will be removed provided it is not still in use by a Qlustar image. If it is still in use, a list of images that are associated with the chroot is given. You would then first have to reconfigure these images to use another chroot before trying to remove again. <span class="bold bold"><strong>Renaming of a chroot</strong></span> is not supported directly. To rename you'd have to clone the original chroot giving the clone the new desired name and afterwards remove the old chroot.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Configuring-IB">
      ⁠</a>8.5. Infiniband network</h2></div></div></div>
		
		 <div class="para">
			For most practical purposes, Infiniband (IB) adapters need to be configured with an IP address (IPoIB) just like Ethernet adapters. If you have chosen to configure an IB network during installation, this section is mostly about how to review or change the initial  settings. If not, IB first has to be activated in the <a class="link" href="#sec-Configuring-the-Network">Network Configuration</a> dialog. An IB Network address IP and netmask can then be chosen. The Infiniband network must not collide with the Cluster (Ethernet) or IPMI network. This is prevented automatically in the settings dialog. The Infiniband IP of each host is computed by mapping the host part of its Cluster Network IP to the IB Network. Example: IP Cluster Network 192.168.52.100 - IP IB network 192.168.53.100. Note, that this mechanism requires the IB netmask to be at least as large as the Cluster Network netmask. Hence, smaller values won't be selectable.
		</div>
		 <div class="para">
			 To actually have a node's IB adapter be configured during the boot process, additional steps are necessary. It is not uncommon, that a cluster consists of hosts with IB and hosts without. Therefore, the pre-defined hardware property <em class="parameter"><code>IB Adapter</code></em> with a value of <em class="parameter"><code>true</code></em> must be assigned to a host, to explicitly enable IB for it. This is done most conveniently, by adding this property to the Hardware Property Set(s) used in the Host Template(s) for nodes with IB. If this assignment exists, Infiniband modules will be loaded and IP-over-IB will be configured during the boot process of the corresponding nodes with the IP mapping described above.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Configuring-OpenSM">
      ⁠</a>8.5.1. Activating/configuring OpenSM</h3></div></div></div>
			
			 <div class="para">
				In an IB fabric, at least one node (or switch) has to run a subnet manager to manage the routing tables. Qlustar provides <span class="application"><strong>OpenSM</strong></span> for this task. If the head-node is also part of the IB network, it's usually best to configure it to run OpenSM. This might have  been chosen during installation, in which case there is nothing more to be done. If not, you have the option to run OpenSM on ordinary nodes too. In this case, it is advisable to run OpenSM on two or three nodes (not more) for redundancy reasons. It is therefore best, to configure this directly for the chosen hosts, rather than using a Host Template or generic property set. After selecting the host or hosts where OpenSM should run in the Enclosure View, open the context menu and select <span class="guimenuitem"><strong>Set Generic Property</strong></span>-&gt;<span class="guimenuitem"><strong>OpenSM Ports</strong></span>-&gt;<span class="guimenuitem"><strong>ALL</strong></span>. The next time the hosts boots, the OpenSM daemon will be started on all its Infiniband ports.
			</div>
			 <div class="para">
				  If a host has more than one IB port, OpenSM can also be configured to run only on a specific port instead of all of them. The port can be specified by its number or by its unique ID. As this is an uncommon configuration and the unique ID is unknown beforehand, there is no preset value for this. To create a new value, first select an existing value, e.g. ALL, for the generic property <code class="literal">OpenSM Ports</code>. You can then edit the value in the <code class="classname">Generic Properties</code> box of a host. Editing the line and pressing <span class="keycap"><strong>return</strong></span> will create the new value. Beware that this will only affect one shown host. To assign the new value to other hosts, select them and then change the OpenSM Ports property through the context menu.
			</div>
			 <div class="para">
				  In some circumstances it might be necessary to run OpenSM with extra options. This can also be configured via generic properties. The only preset value is the empty string, so you need to create a new value for the options you require. First add the empty value of the generic property <code class="classname">OpenSM Options</code> to one host. Edit the value to your requirements and press <span class="keycap"><strong>return</strong></span> to create it. Finally add/change the OpenSM Options generic property to all relevant hosts.
			</div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-IPMI-Settings">
      ⁠</a>8.6. IPMI settings</h2></div></div></div>
		
		 <div class="para">
			 Configuring IPMI is similar to Infiniband and also involves multiple steps, because there are a number of options to set. If you have chosen to configure an IPMI network during installation, a larger part of this section is about how to review or change the initial settings. If not, IPMI first has to be activated in the <a class="link" href="#sec-Configuring-the-Network">Network Configuration</a> dialog. There you can set the IPMI Network address IP and netmask. The IPMI address of a host is then determined with the same mapping as used when <a class="link" href="#sec-Configuring-IB">configuring IB</a> and the same restrictions for the choice of netmask apply.
		</div>
		 <div class="para">
			 Often not all nodes in a cluster have IPMI. Therefore, in <span class="application"><strong>QluMan</strong></span> per default no host is configured to setup IPMI, unless it is assigned the hardware property <code class="literal">IPMI Adapter</code> with a value of <em class="parameter"><code>true</code></em>. The easiest way to achieve this, is to add the <code class="literal">IPMI Adapter</code> property to the Hardware Property Set(s) used in the Host Template(s) for the nodes with IPMI. With this assignment, a node is ready for monitoring its temperature and fan speeds.
		</div>
		 <div class="para">
			  Enabling IPMI nodes for remote control involves two more settings. The first one is the generic property <em class="parameter"><code>Initialize IPMI</code></em>. Per default the settings of the IPMI cards are not touched by <span class="productname">Qlustar</span>. However, while the <em class="parameter"><code>Initialize IPMI</code></em> generic property is assigned and set to <em class="parameter"><code>true</code></em>, the IPMI card settings of the corresponding host will be reset every time it boots. Changing the value of this property to <em class="parameter"><code>true</code></em> and after booting back to <em class="parameter"><code>false</code></em> allows a one-time setup of the cards properties.
		</div>
		 <div class="para">
			 The second generic property is the <em class="parameter"><code>IPMI Channel</code></em> to use. Per default channel 1 is used and this is the only preset value for the property. If you need to use a different channel, first add the generic property <em class="parameter"><code>IPMI Channel</code></em> to the <code class="classname">Generic Property Set</code> (or to a host directly) and then edit the value.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-RX-Engine">
      ⁠</a>Chapter 9. RXEngine / Remote Execution Engine</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-RXE-Overview">9.1. RXEngine Overview</a></span></dt><dt><span class="section"><a href="#sec-RXE-Pre-Defined">9.2. Executing a pre-defined command</a></span></dt><dt><span class="section"><a href="#sec-RXE-Custom">9.3. Executing a custom command</a></span></dt><dt><span class="section"><a href="#sec-RXE-Output-Analysis">9.4. Analysis of Command Status/Output</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-RXE-Command-Status">9.4.1. Command Status</a></span></dt><dt><span class="section"><a href="#sec-RXE-Host-Grouping">9.4.2. Host Grouping by Status and Output</a></span></dt><dt><span class="section"><a href="#sec-RXE-Filter-OutErr">9.4.3. Filtering by stdout and stderr</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-RXE-Command-Editor">9.5. Command Editor</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-RXE-Command-Editor-Sorting">9.5.1. Sorting commands</a></span></dt><dt><span class="section"><a href="#sec-RXE-Command-Editor-Defining">9.5.2. Defining or editing a command</a></span></dt></dl></dd></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-RXE-Overview">
      ⁠</a>9.1. RXEngine Overview</h2></div></div></div>
		
		 <div class="para">
			 <span class="application"><strong>QluMan</strong></span> provides a powerful remote command execution engine, that allows to run shell commands on any number of hosts in <span class="bold bold"><strong>parallel</strong></span> and analyze their output/status in <span class="bold bold"><strong>real-time</strong></span>. Commands fall into two categories: <code class="literal">Pre-defined</code> and <code class="literal">custom</code> commands. The RXengine has the following capabilities:
		</div>
		 <div class="para">
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
					<div class="para">
						The command can be a single command or a series of commands in <span class="application"><strong>bash</strong></span> shell syntax.
					</div>

				</li><li class="listitem">
					<div class="para">
						The hosts are specified in <code class="literal">Hostlist format</code> or through a <a class="link" href="#chap-Host-Filters">Host Filter</a>, so that even large groups can be represented by a short string.
					</div>

				</li><li class="listitem">
					<div class="para">
						The commands run in parallel on all hosts.
					</div>

				</li><li class="listitem">
					<div class="para">
						The network connection used for remote execution is both <span class="bold bold"><strong>encrypted and authenticated</strong></span>. It employs the same high-speed/high-security elliptic-curve cryptography that is used for the connection between the <span class="application"><strong>QluMan server</strong></span> and the <span class="application"><strong>QluMan GUI</strong></span>.
					</div>

				</li><li class="listitem">
					<div class="para">
						The output is <span class="bold bold"><strong>analyzed</strong></span> and updated in short intervals during the execution phase.
					</div>

				</li><li class="listitem">
					<div class="para">
						Hosts with equal output are <span class="bold bold"><strong>grouped</strong></span> together to reduce the noise.
					</div>

				</li><li class="listitem">
					<div class="para">
						The output can further be <span class="bold bold"><strong>filtered</strong></span> by the return code of the command and by (de)selecting <code class="literal">stdout</code> and/or <code class="literal">stderr</code>.
					</div>

				</li></ul></div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-RXE-Pre-Defined">
      ⁠</a>9.2. Executing a pre-defined command</h2></div></div></div>
		
		 <div class="para">
			   Pre-Defined commands can be created using the <code class="classname">Command Editor</code> (see <a class="xref" href="#sec-RXE-Command-Editor">Section 9.5, “Command Editor”</a> for details). To execute a pre-defined command, open the pull-down menu of the <span class="guibutton"><strong>Execute button</strong></span> at the bottom of the <code class="classname">Enclosure View</code> and select an entry. This opens a new <code class="classname">Command Execution</code> window for pre-defined commands. At the very top of it, the selected pre-defined command is shown. It can be changed if required. Below that is a list of arguments, the selected command accepts. <span class="guilabel"><strong>Execute on</strong></span> is always present showing where the command will be executed. If defined, additional arguments of the command are displayed underneath. Further below, the final command is shown, with its arguments inserted at the right places. The command will be executed upon clicking the <span class="guibutton"><strong>Execute</strong></span> button.
		</div>
		 <div class="para">
			   Arguments to a pre-defined command can be set fixed to a <a class="link" href="#chap-Host-Filters">Host Filter</a> , in which case the filter and its resulting hostlist are shown as plain text and can not be edited. Optionally, specification of arguments in Hostlist format may also be left up to the user. In that case, a combo-box is shown, followed by the evaluation of the specified input shown as plain text. When hosts were selected in the <code class="classname">Enclosure View</code>, the combo-box will contain the hostlist corresponding to the selection as default. The text can be edited directly or a filter can be chosen from the dropdown menu. Any argument starting with "%" is assumed to be a filter. If this is not intended, the "%" must be escaped by another "%", but only at the start of an argument. For more details about specifying arguments in pre-defined commands see <a class="xref" href="#sec-RXE-Command-Editor">Section 9.5, “Command Editor”</a>.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-RXE-Custom">
      ⁠</a>9.3. Executing a custom command</h2></div></div></div>
		
		 <div class="para">
			  To execute a custom command, open the pull-down menu of the <span class="guimenu"><strong>Execute button</strong></span> at the bottom of the <code class="classname">Enclosure View</code> and select custom command from the menu. This opens a new blank <code class="classname">Command Execution</code> window. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					The initial hostlist is empty in the screenshot examples, since no hosts where selected in the <code class="classname">Enclosure View</code>
				</div>

			</div></div>
			.
		</div>
		 <div class="para">
			   In case hosts were selected in the <code class="classname">Enclosure View</code> before clicking the <span class="guibutton"><strong>Execute</strong></span> button, a hostlist representing these hosts will be present in the <code class="classname">Command Execution</code> window. This allows <span class="bold bold"><strong>easy selection of hosts</strong></span> to run a command on by <a class="link" href="#sec-Host-Selections">selecting them</a> in the <code class="classname">Enclosure View</code>. The hostlist can also be updated at a later time from the currently selected hosts in the Enclosure View by clicking the <span class="guibutton"><strong>Update</strong></span> button. This makes it simple, to run the same command on different sets of hosts. When a command is executed, it is added to the <code class="literal">history</code> and can be accessed again later through the pull-down menu. This allows rerunning recently used commands without having to retype them every time. 
			<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					Note, that the history is stored in the users home directory, hence every user has his own. The preferred way to manage frequently used commands is by pre-defining them (explained in <a class="xref" href="#sec-RXE-Command-Editor">Section 9.5, “Command Editor”</a>).
				</div>

			</div></div>

		</div>
		 <h3><a id="idm139946985108144">
      ⁠</a> Passing input to a command </h3> <div class="para">
			 Sometimes it is necessary to pass some input to a command. This can be done by clicking the <span class="guibutton"><strong>Input</strong></span> button near the top. Another text box will then be added to the window and will allow to specify, what should be passed to <code class="literal">stdin</code> of the command on each host. 
		</div>
		 <h3><a id="idm139946985099072">
      ⁠</a> Command Syntax </h3> <div class="para">
			Commands will be interpreted/executed by the <code class="literal">BASH</code> shell on every host matching the hostlist. The full <code class="literal">BASH</code> syntax is supported. Redirection of output to files, as in the last example, and working with variables works as expected. Please refer to the <code class="literal">BASH</code> documentation (e.g. <code class="code">man bash</code>) for more details.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-RXE-Output-Analysis">
      ⁠</a>9.4. Analysis of Command Status/Output</h2></div></div></div>
		
		 <div class="para">
			 Once the hostlist is added, a command can simply be run by entering it in the command box and hitting the <span class="guibutton"><strong>Execute</strong></span> button. It will then start to run in parallel on all listed hosts and the command output will be collected. Periodically, in short but increasing intervals, the <span class="bold bold"><strong>output will be sorted</strong></span>&gt; and displayed. Hence, for short running programs you will see it immediately. Due to the increasing display intervals, long running and noisy commands won't cause constant flickering of the output, allowing you to more easily follow it.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-RXE-Command-Status">
      ⁠</a>9.4.1. Command Status</h3></div></div></div>
			
			 <div class="para">
				 After the <span class="guibutton"><strong>Execute</strong></span> button has been pressed, all hosts will start in the <code class="literal">Pending state</code>. Once a host confirms that it has started its command, it will change to the <code class="literal">Running state</code>. When the command concludes, the state becomes one of <code class="literal">Failed</code>, <code class="literal">Errors</code> or <code class="literal">Success</code>. If the command exited with a return code other than 0, the host will enter the <code class="literal">Failed</code> state. If the command exited with a return code of 0, but produced output on <code class="literal">stderr</code>, it will enter the <code class="literal">Errors</code> state. Otherwise, it enters the <code class="literal">Success</code> state.
			</div>
			 <div class="para">
				  In the screenshot example, the hosts <code class="systemitem">sn-1</code> and <code class="systemitem">sn-2</code> were down, so they remained in the <code class="literal">Pending</code> state. By clicking the <span class="guibutton"><strong>Pending</strong></span> button, a hostlist of the pending hosts is displayed. The <span class="application"><strong>QluMan server</strong></span> will start the command on those hosts, when they become online again. If you do not want that to happen, or if the command does not terminate on its own, then the <span class="guibutton"><strong>Kill</strong></span> button allows you to stop the command. A killed command counts as failed, so <code class="systemitem">sn-1</code> and <code class="systemitem">sn-2</code> now enter that state. The command output also reflects that the command was killed.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-RXE-Host-Grouping">
      ⁠</a>9.4.2. Host Grouping by Status and Output</h3></div></div></div>
			
			 <div class="para">
				 Hosts executing a command are not only grouped by their execution state, the command output produced by the different hosts is also <span class="bold bold"><strong>analyzed and compared</strong></span> to each other. Hosts with identical output are put into a group. Their output is only displayed once, prefixed with the hostlist representing the hosts in each group. For a quick overview, the number of hosts and groups is also displayed below each state button. In the screenshot example, two hosts (<code class="systemitem">sn-1</code> and <code class="systemitem">sn-2</code>) have failed, because they where offline and the command was killed before starting. The output of both was identical, so they form one group. Similar, one host (<code class="systemitem">ql-head-pr-t</code>) completed the command successfully and builds its own group.
			</div>
			 <div class="para">
				The <span class="guibutton"><strong>S</strong></span> buttons next to the numbers add or remove the hosts in each state to form a new hostlist. Press the button to include the corresponding hosts and press it once more to exclude them again. This is convenient, e.g. to quickly select only the hosts for which a command failed: Analyze the errors and later relaunch with an adjusted command. Another example: Select only the successful hosts to run a follow-up command etc.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-RXE-Filter-OutErr">
      ⁠</a>9.4.3. Filtering by stdout and stderr</h3></div></div></div>
			
			 <div class="para">
				 Commands usually output regular text to <code class="literal">stdout</code> and warnings as well as errors to <code class="literal">stderr</code>. In the latter case, the command ends up in the <code class="literal">Errors</code> state, because this is usually something that needs further inspection. The screenshot example prints two lines, one to <code class="literal">stderr</code> and one to <code class="literal">stdout</code>. Unfortunately Unix does not enforce any order between output to <code class="literal">stdout</code> and <code class="literal">stderr</code>. Therefore, as in this example, it can happen, that a small delay between the command output and reading from the file descriptors causes the order to slightly change.
			</div>
			 <div class="para">
				  Some commands produce a lot of output. Error messages are then easily overseen in between the lines. Similarly a command might report a lot of harmless errors, that hide the interesting output going to <code class="literal">stdout</code>. To simplify an analysis of the command output for such cases, the two buttons <span class="guibutton"><strong>stdout</strong></span> and <span class="guibutton"><strong>stderr</strong></span> at the bottom of the window allow <span class="bold bold"><strong>toggling the visibility</strong></span> of <code class="literal">stdout</code> and <code class="literal">stderr</code> output selectively on and off.
			</div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-RXE-Command-Editor">
      ⁠</a>9.5. Command Editor</h2></div></div></div>
		
		 <div class="para">
			  The <code class="classname">command editor</code> shows all the pre-defined commands in a tree view on the left. A number of useful commands are already defined by default. Selecting a command shows its definition on the right-hand side, where it can also be edited. Every command has a unique name/alias under which it appears in the tree view on the left, the execute menu in the <code class="classname">Enclosure View</code> and in the drop down menu of the pre-defined commands execution window. In the future, it will also be possible to limit commands to specific user roles, but for now all commands are unrestricted. A user either has rights to execute any pre-defined commands or none. Below the role selector, the command itself is defined.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-RXE-Command-Editor-Sorting">
      ⁠</a>9.5.1. Sorting commands</h3></div></div></div>
			
			 <div class="para">
				 Commands are kept in a tree structure, grouping similar commands together. They can be sorted freely using the context menu to make frequently used commands easier to select. The <span class="guimenuitem"><strong>Move Up</strong></span> and <span class="guimenuitem"><strong>Move Down</strong></span> menu items move a command or group up or down within the group respectively. The <span class="guimenuitem"><strong>Move to group</strong></span> sub-menu allows moving a command up or down in the tree hierarchy. Groups can be created, renamed and deleted to give any desired hierarchy of commands.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-RXE-Command-Editor-Defining">
      ⁠</a>9.5.2. Defining or editing a command</h3></div></div></div>
			
			 <div class="para">
				   To define a new command, select <span class="guimenuitem"><strong>New Command</strong></span> from the context menu. The new command will be created in the group, where the context menu was opened or in the root, if the mouse is outside of any group. Initially, the command will have no definitions.
			</div>
			 <div class="para">
				To edit a command, it needs to be selected first. Then its definitions will be shown on the right-hand side. The name/alias of a command can be edited by clicking in the text box at the top and entering the new name. The check-box to the right of the name indicates, whether your name is valid. Press enter, to save the new name and the check-box will become fully checked again. To undo editing, simply reselect the command in the tree view.
			</div>
			 <div class="para">
				  A command can be executed on any host or set of hosts in the cluster. The <span class="guilabel"><strong>Execute on</strong></span> field governs how that host or set of hosts is constructed. The default is <em class="parameter"><code>User input</code></em>. This means, the user will have to choose the hostlist, where the command will run, at the time, when it will be executed. Alternatively, the hostlist of the command can be preset by selecting one of the filters from the dropdown menu. If a filter is selected, the hostlist, it currently evaluates to, is displayed below it.
			</div>
			 <div class="para">
				  Editing the command itself may take a while. To avoid conflicts from concurrent editing attempts by different <span class="application"><strong>QluMan</strong></span> users, only one person can edit a command at a time. To start the editing process, click the <span class="guibutton"><strong>Edit</strong></span> button at the bottom. After that, changes to the command can be entered. Commands will be interpreted/executed by the <code class="literal">BASH</code> shell on every host matching the hostlist. The full BASH syntax is supported. Redirection of output to files and working with variables works as expected. Please refer to the BASH documentation (e.g. <code class="code">man bash</code>) for more details. There is one exception to this: A "%" character followed by a number specifies additional arguments for the command, as explained in more detail below.
			</div>
			 <div class="para">
				   Sometimes it is necessary, to pass some input to a pre-defined command. This can be done by clicking the <span class="guibutton"><strong>Input</strong></span> check-box. It will bring up an input text-box, where the desired input text can be entered.
			</div>
			 <div class="para">
				To finish editing the command, click the <span class="guibutton"><strong>Save</strong></span> button at the bottom. This actually saves the command text and input, if any, in the database and releases the lock on the command. This also scans the command text for argument placeholders and updates the entries in the <code class="classname">Arguments</code> box.
			</div>
			 <div class="para">
				 The definition of command arguments use the same mechanism as detailed for the <code class="literal">Execute on</code> definition. They can either be left up to the user to fill in, when the command is executed or be specified by a filter selectable from the dropdown menu. When executed, the <em class="replaceable">num</em> placeholders in the command text are replaced by the user specified arguments or the resulting hostlist of the filter. There are always as many arguments as there are placeholders in the command. To add an argument, edit the command text and add a placeholder there. To remove an argument, edit the command text and remove the placeholder.
			</div>
			 <div class="para">
				 In the screenshot example, the test command is defined to execute on all head-nodes (<code class="systemitem">qlu-dev</code> is the only head node in the cluster). It has some input and two extra arguments. The first one is fixed to a Hostname filter, that evaluates to any host starting with <code class="systemitem">beo</code>. The second one is left for the user to be specified, hence, when executing the command, only the second argument is editable. In the screenshot, the <code class="literal">ONLINE</code> filter was chosen for this argument, but any other text would have been possible too. For easy verification, the command text, with all the arguments substituted, is shown together with the command input (if defined). Note that in the example, the specified input is simply output by the <code class="command">cat</code> command, so in the output shown, it appears between the two <code class="command">echo</code> commands.
			</div>

		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Host-Filters">
      ⁠</a>Chapter 10. Host Filters</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Host-Filter-Overview">10.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Editor">10.2. Host Filter Editor</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-Host-Filter-Edit">10.2.1. Editing a Filter</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Types">10.2.2. Types of Filters</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-Inverting">10.2.3. Inverting a Filter</a></span></dt><dt><span class="section"><a href="#sec-Host-Filter-AddSub">10.2.4. Additive versus subtractive</a></span></dt></dl></dd></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Host-Filter-Overview">
      ⁠</a>10.1. Overview</h2></div></div></div>
		
		 <div class="para">
			 Host filters define a set of hosts by specifying any number of criteria. The set of hosts defined by a filter is dynamic: Changes made to the properties of hosts are automatically reflected in the hostlist a filter evaluates to. Every time a filter is used, the criteria defining it are evaluated from scratch. Hence, host filters provide a powerful tool to classify hosts into groups, in a way that will dynamically take into account changes made to the cluster. They can be used in various ways within <span class="application"><strong>QluMan</strong></span>:
		</div>
		 <div class="para">
			<div xmlns:d="http://docbook.org/ns/docbook" class="itemizedlist"><ul><li class="listitem">
					<div class="para">
						In <a class="link" href="#sec-RXE-Pre-Defined">pre-defined commands</a>, to either specify, the set of hosts, where a command should be executed or to supply the resulting hostlist as an argument to the command.
					</div>

				</li><li class="listitem">
					<div class="para">
						As user input for <a class="link" href="#sec-RXE-Pre-Defined">pre-defined</a> or <a class="link" href="#sec-RXE-Custom">custom commands</a>.
					</div>

				</li><li class="listitem">
					<div class="para">
						In the <a class="link" href="#sec-Enclosure-View">Enclosure View</a> to modify the selection.
					</div>

				</li></ul></div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Host-Filter-Editor">
      ⁠</a>10.2. Host Filter Editor</h2></div></div></div>
		
		 <div class="para">
			 The filter editor window is split into two areas. At the top the definition of the currently selected filter is shown. You can select the filter to be displayed from the dropdown menu. At the bottom the hosts that pass all the filters are displayed in the compact HostList format. This format is used by a number of other programs including pdsh and SLURM (the <a href="https://code.google.com/p/pdsh/wiki/HostListExpressions___blank___">pdsh Wiki</a> has a detailed discussion on the syntax).
		</div>
		 <div class="para">
			    
		</div>
		 <div class="para">
			Select <span class="guimenuitem"><strong>new filter</strong></span> from the dropdown menu to start defining a new filter. Then add filters from the context menu, until the desired subset of hosts is displayed in the bottom half of the window. Using their context menu, filters can be edited or removed and sub-filters be added. The <span class="guimenuitem"><strong>Reset filter</strong></span> menu item clears the filter, so one can start from scratch. To finally create (save) the new filter click <span class="guibutton"><strong>Save as</strong></span> and enter a name for it.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Host-Filter-Edit">
      ⁠</a>10.2.1. Editing a Filter</h3></div></div></div>
			
			 <div class="para">
				Editing a filter is similar to creating a new one. First select the filter from the dropdown menu to display it's current definition. Then add, edit or remove individual filters as desired. Finally click <span class="guibutton"><strong>Save as</strong></span> to save the altered filter, Using an existing name will replace the old filter. Using a different name will create a new filter.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Host-Filter-Types">
      ⁠</a>10.2.2. Types of Filters</h3></div></div></div>
			
			 <div class="para">
				 A filter can be added from the context menu (right mouse click) in the top area. For a host to show up in the filtered list (bottom part), it must pass all the filters added. Each filter narrows down the list. Any number of filters can be added and they do not have to be unique. For example you can add a Hostname filter that selects all hosts that begin with <code class="systemitem">beo</code> and a Host Template filter that selects all <code class="systemitem">Demo VM</code> nodes. A host has to pass all top-level filters to show up. Currently, <span class="application"><strong>QluMan</strong></span> provides six top-level filters: Hostname, HostTemplate, Enclosure, HEADNODE, HEADNODES and ONLINE. Additional ones will be added in future versions.
			</div>
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-Host-Filter-Hostname">
      ⁠</a>10.2.2.1. Hostname Filter</h4></div></div></div>
				
				 <div class="para">
					   Adding a Hostname filter opens up a pop-up dialog asking for the hostname or a regular expression to filter for. The input must be a regular expression in <code class="literal">python</code> syntax and is matched against the beginning of the hostname. If a match against the full hostname is desired then "$" should be added at the end. A ".*" can be added to the front, to match anywhere in the hostname instead of matching against the beginning.
				</div>
				 <div class="para">
					Multiple hostname patterns can be added to a Hostname filter through the context menu. 
					<div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
						<div class="para">
							Note that this is <span class="bold bold"><strong>additive</strong></span>: If a host matches at least one pattern, it will be included in the resulting list.
						</div>

					</div></div>

				</div>

			</div>
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-Host-Filter-HostTemplate">
      ⁠</a>10.2.2.2. Host Template Filter</h4></div></div></div>
				
				 <div class="para">
					     Adding a Host Template filter does not pop up a dialog. Instead it adds an empty Host Template filter. This simply selects all hosts with an assigned Host Template. Hosts that do not have a Host Template will not pass this filter. The filter can be made more specific by adding Host Template patterns to it through the context menu. This opens up a pop-up dialog, from where an existing Host Template name can be selected.
				</div>
				 <div class="para">
					The result is a list of hosts, for which the associated Host Template matches the given pattern. Adding multiple Host Template names is again additive, just like with Hostname patterns.
				</div>

			</div>
			 <div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sec-Host-Filter-Enclosure">
      ⁠</a>10.2.2.3. Enclosure Filter</h4></div></div></div>
				
				 <div class="para">
					    Adding an Enclosure filter also does not bring up a dialog. Like a Host Template filter, it selects all hosts that are part of an enclosure. Unlike the Hostname and Host Template filters though, an Enclosure filter allows for two different specifications: The name <span class="bold bold"><strong>and</strong></span> the type of an enclosure can be matched. Just like Hostname and Host Template filters the Enclosure filter is additive. Adding sub-filters for both the Enclosure name and the Enclosure type will filter hosts that match at least one of those criteria. To filter for hosts that match both, an Enclosure name and an Enclosure type two separate Enclosure filters have to be used, to get the intersection of both filters. The first one to filter the name and the second to filter the type.
				</div>

			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Host-Filter-Inverting">
      ⁠</a>10.2.3. Inverting a Filter</h3></div></div></div>
			
			 <div class="para">
				Every filter, sub-filter and pattern can be inverted through the context menu. The context menu for a pattern contains menu entries for both the pattern and the enclosing filter separated by a line. The first <span class="bold bold"><strong>Invert</strong></span> entry will invert the specific pattern that was selected, while the second <span class="bold bold"><strong>Invert</strong></span> will invert the whole filter.
			</div>
			 <div class="para">
				   Besides the obvious, this can also be useful in finding hosts that are not configured correctly. For example, adding an empty Host Template filter and inverting it, will show all hosts without a Host Template. Adding a second filter, that selects all switches, power controllers and other special devices (they usually don't need a Host Template) and also inverting that, results in a list of all hosts, that are neither properly configured nodes (missing Host Template) nor special devices.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-Host-Filter-AddSub">
      ⁠</a>10.2.4. Additive versus subtractive</h3></div></div></div>
			
			 <div class="para">
				 When constructing a filter, it is important to remember, that all top-level filters are subtractive. A host must pass all top-level filters to show up in the result. On the other hand, all patterns and sub-filters are additive. Matching any one of them within a top-level filter adds the host to the result of that filter. Hence, when subtractive behavior is desired for patterns or sub-filters, each pattern or sub-filter must be added to its own top-level filter. For example, to select all hosts that start with <code class="systemitem">beo</code> as well as end on "1" two Hostname filters have to be added.
			</div>

		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-User-Rights">
      ⁠</a>Chapter 11. QluMan User and Rights Management</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-User-Rights-Overview">11.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-User-Manage">11.2. Managing QluMan Users</a></span></dt><dd><dl><dt><span class="section"><a href="#sec-User-Add">11.2.1. Adding a User</a></span></dt><dt><span class="section"><a href="#sec-User-Auth-Token">11.2.2. Generating the Auth Token</a></span></dt><dt><span class="section"><a href="#sec-User-Remove">11.2.3. Removing a User</a></span></dt></dl></dd><dt><span class="section"><a href="#sec-Roles-Manage">11.3. Managing User Roles/Permissions</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-User-Rights-Overview">
      ⁠</a>11.1. Overview</h2></div></div></div>
		
		 <div class="para">
			<span class="application"><strong>QluMan</strong></span> is <code class="literal">multi-user capable</code> and provides an interface to configure and control users as well as their permissions when they work with <span class="application"><strong>QluMan</strong></span>. The <span class="application"><strong>QluMan</strong></span> users are not connected to system users in any way. To simplify permission management, the concept of <code class="literal">user roles</code> can be used. User roles allow to predefine a <span class="bold bold"><strong>collection of permissions</strong></span> for <span class="application"><strong>QluMan</strong></span> operations. Once defined, they can be assigned to a user.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-User-Manage">
      ⁠</a>11.2. Managing QluMan Users</h2></div></div></div>
		
		 <div class="para">
			  The <code class="literal">admin user</code> is pre-defined and has the <code class="literal">admin role</code>, meaning all possible rights. Roles for the admin user can not be changed, just like the root user in a Linux system always has all rights. When running <span class="application"><strong>QluMan</strong></span> for the first time, you should set the correct email address for the admin user.
		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-User-Add">
      ⁠</a>11.2.1. Adding a User</h3></div></div></div>
			
			 <div class="para">
				    To create a new user, click <span class="guibutton"><strong>New User</strong></span> and enter the name for the new user to create it. Then select the user from the drop-down menu and fill out the remaining fields. The changes will be saved automatically when <span class="keycap"><strong>return</strong></span> is pressed or the input field looses the focus. New users have no roles assigned to them and will have no rights to change something. They can only inspect the cluster config (read-only mode). See <a class="xref" href="#sec-Roles-Manage">Section 11.3, “Managing User Roles/Permissions”</a> for how to create new roles and assign them to the user by checking the respective checkboxes. If the <span class="guibutton"><strong>New User</strong></span> button is not selectable, then the user lacks sufficient rights to create new users. The <span class="guibutton"><strong>Roles</strong></span> buttons will then also be disabled, preventing an unauthorized user from giving himself or others extra roles.
			</div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-User-Auth-Token">
      ⁠</a>11.2.2. Generating the Auth Token</h3></div></div></div>
			
			 <div class="para">
				 A new user is also created without login credentials, so initially, he can't connect to QluMan. Hence, the next step is to generate a <code class="literal">one-time token</code> for the user by clicking <span class="guibutton"><strong>New Auth Token</strong></span>. Generating the one-time token may take a little time to finish and happens before the <code class="classname">New Auth Token</code> dialog opens. The dialog shows a certificate containing the generated one-time token as well as the other login information required to connect to the server. The certificate is protected by an auto-generated 8 digit pin, so that it can be transfered over unencrypted communication channels like e-mail or chat programs. In such a case the pin should be send over a second, different, communication channel, e.g. reading it over the phone.
			</div>
			 <div class="para">
				As a special case, when a user clicks <span class="guibutton"><strong>New Auth Token</strong></span> for himself, the generated token is imported into his running client and replaces the current login credentials. A reconnect is then triggered automatically which forces the client to generate a new random public/private key pair and use the new one-time token to authenticate itself to the server. This should be used to invalidate the old keys and replace them with fresh ones, in case a user suspects the certificate safe might have been compromised by an attacker.
			</div>
			 <div class="para">
				 The <code class="classname">New Auth Token</code> dialog also has 3 usefull buttons at the right bottom corner. The <span class="guibutton"><strong>Import</strong></span> button allows adding the certificate directly to the running client. The use case for this is when creating a user account for oneself when working as admin. It is recommendd that for clusters with multiple users with admin role that every user has their own user account and the admin user is only used to create those.   The <span class="guibutton"><strong>Save</strong></span> button allows saving the certificate into a file and the <span class="guibutton"><strong>Mail</strong></span> button sends the certificate to the email configured for the user. In both cases only the certificate is saved or mailed and the password needs to be send separately.
			</div>
			 <div class="para">
				For optimal security, it is recommened to leave a new user without roles, until he has logged in using the one-time token. That way, if the certificate was intercepted, it will be useless to an attacker, since he won't be able to perform any actions within QluMan. Also, if the attacker manages to intercept and use the certificate before the real intended user does, the real user won't be able to use it anymore and notice that something is wrong, most likely reporting to the main cluster administrator.
			</div>
			 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
				<div class="para">
					The certificate contains the information about the cluster telling the client how to connect to it and the public key of the <code class="systemitem">qlumand</code> server that ensures the client will only talk to the desired server and can't be eavesdropped. It also contains a one-time token allowing any client to log in exactly once within the next 48 hours. On the first login with a correct one-time token, the client's public key (generated randomly and uniquely for the cluster/user pair) is stored by the server and used to authenticate the user in the future. The client's and server's public and private keys are also used when connecting, to safely exchange session keys enabling <span class="bold bold"><strong>encryption with perfect forward-security</strong></span>.
				</div>

			</div></div>

		</div>
		 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="sec-User-Remove">
      ⁠</a>11.2.3. Removing a User</h3></div></div></div>
			
			 <div class="para">
				  A user other than admin can be deleted by clicking the <span class="guibutton"><strong>Delete User</strong></span> button. Just like the <span class="guibutton"><strong>New User</strong></span> button, it is only enabled if the current user has sufficient rights.
			</div>

		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Roles-Manage">
      ⁠</a>11.3. Managing User Roles/Permissions</h2></div></div></div>
		
		 <div class="para">
			The <span class="application"><strong>QluMan</strong></span> server performs <span class="bold bold"><strong>many individual rights</strong></span> checks, before it allows/performs an operation. Many of those correspond directly to a specific window in the GUI, giving the user the right to alter settings in that window. For example, the right to configure Qlustar images corresponds directly to operations available from the <code class="literal">Qlustar Images</code> window opened from <span class="guimenuitem"><strong>Manage Configs</strong></span>-&gt;<span class="guimenuitem"><strong>Qlustar Images</strong></span>. Others govern the right to specific actions or to alter specific properties. For example, the right to configure OpenSM on hosts enables the user to add, alter or delete the <code class="literal">OpenSM Ports</code> and <code class="literal">OpenSM Options</code> property of hosts in the <code class="classname">Enclosure View</code>.
		</div>
		 <div class="para">
			The rights are grouped into 4 categories: <code class="literal">Admin rights</code> covers rights with global impact and root access to nodes, <code class="literal">Booting</code> covers all settings that affect how nodes will boot, <code class="literal">Services</code> covers the configuration of daemons and <code class="literal">Host Config</code> covers the general configuration of hosts.
		</div>
		 <div class="para">
			   Creating and editing roles is simple. Click <span class="guibutton"><strong>New</strong></span> to create a new role, fill in a name and description for it and click <span class="guibutton"><strong>OK</strong></span>. To change the rights associated with a role, first select it using the dropdown menu at the top. Next click the checkmark boxes to the left of the rights you want to change, grant or remove from the role. Click <span class="guibutton"><strong>Save</strong></span> to save the changes or <span class="guibutton"><strong>Undo</strong></span> to reset the rights to the last saved settings.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-LogViewer">
      ⁠</a>Chapter 12. Log Viewer</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-LogViewer-purpose">12.1. Purpose</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-indicator">12.2. Messages indicator button</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-window">12.3. Log Viewer window</a></span></dt><dt><span class="section"><a href="#sec-LogViewer-filter">12.4. Message Filter</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-LogViewer-purpose">
      ⁠</a>12.1. Purpose</h2></div></div></div>
		
		 <div class="para">
			Often things happen when one is not looking. For that reason Qluman keeps a log of messages showing what happened, when, where and how important the event was.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-LogViewer-indicator">
      ⁠</a>12.2. Messages indicator button</h2></div></div></div>
		
		 <div class="para">
			At the right bottom of the main window qluman-qt displays a <span class="guibutton"><strong>Messages</strong></span>. The button shows the highest priority of pending messages as well as the number of messages pending. Clicking the button opens the <span class="emphasis"><em>Messages</em></span> window. The <span class="emphasis"><em>Messages</em></span> window can also be opened through the Manage Cluster -&gt; Messages menu item.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-LogViewer-window">
      ⁠</a>12.3. Log Viewer window</h2></div></div></div>
		
		 <div class="para">
			Opening the Messages window shows a list of messages sorted by time with the oldest message at the top. The messages can be sorted ascending and descending by clicking on any of the column headers. Only the short text of each message is shown to keep the window compact. Hovering over a row will show the long text for that row as tool-tip. The long text can also be seen in a separate window by clicking the <span class="guibutton"><strong>Details</strong></span> button. The extra window makes it easier to read multi-line messages and allows copy+paste.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-LogViewer-filter">
      ⁠</a>12.4. Message Filter</h2></div></div></div>
		
		 <div class="para">
			Not every message is of interest to a user, especially messages that have already been seen. Each user can create their own filter for messages by clicking on the <span class="guibutton"><strong>Edit Filter</strong></span>. Filter consist of a number of matches shown as rows with an action as well as a default action. The filtering process goes through the rows one by one and if all fields in a row that are set match a message then the action set for the row is executed, the message is hidden from view or included in the messages window. If none of the rows match a message the default action is taken.
		</div>
		 <div class="para">
			The most common filter is to hide message with the <span class="emphasis"><em>seen</em></span> flag. Without this entry the seen flag has no effect. The filter can be freely edited and can be saved to act as the new default filter or reset to the filter that was saved last.
		</div>
		  
	</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="chap-Look-Feel">
      ⁠</a>Chapter 13. Customizing the Look&amp;Feel</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#sec-Look-Feel-Overview">13.1. Overview</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Fonts">13.2. Customizing Fonts</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Colors">13.3. Customizing Colors</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Clone">13.4. Cloning KDE Settings</a></span></dt><dt><span class="section"><a href="#sec-Look-Feel-Widget">13.5. Customizing the Widget Style</a></span></dt></dl></div>
	
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Look-Feel-Overview">
      ⁠</a>13.1. Overview</h2></div></div></div>
		
		 <div class="para">
			There are three aspects of <span class="application"><strong>QluMan's</strong></span> appearance that can be customized: Fonts, colors and widget style. Since QluMan is a QT application, it's Look&amp;Feel can be controlled with <a href="http://www.kde.org/___blank___">KDE</a> tools. Select the <span class="guimenuitem"><strong>Manage Cluster-&gt;Preferences</strong></span> menu entry to bring up the KDE <code class="classname">System Settings</code> dialog. Now click on the <code class="classname">Application Appearance</code> icon and you'll have the options to modify fonts, colors and style.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Look-Feel-Fonts">
      ⁠</a>13.2. Customizing Fonts</h2></div></div></div>
		
		 <div class="para">
			When you click on the <span class="guiicon"><strong>Fonts</strong></span> icon, you'll see a list of different font identifiers for which you can change the font settings. The relevant identifiers to be adjusted for <span class="application"><strong>QluMan</strong></span> are <code class="literal">General</code>, <code class="literal">Menu</code> and <code class="literal">Window Title</code>. Changing one of the values and clicking the <span class="guibutton"><strong>Apply</strong></span> button changes the corresponding font on the fly.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Look-Feel-Colors">
      ⁠</a>13.3. Customizing Colors</h2></div></div></div>
		
		 <div class="para">
			 Click on the <span class="guiicon"><strong>Colors</strong></span> icon and choose the <span class="guimenuitem"><strong>Colors</strong></span> tab. There you can adjust the color of the different elements of the <span class="application"><strong>QluMan GUI</strong></span>. You can narrow down the color identifiers to the ones affecting particular GUI elements by choosing a specific color set with the corresponding pull-down menu. Changing one of the values and clicking the <span class="guibutton"><strong>Apply</strong></span> button changes the corresponding color on the fly.
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Look-Feel-Clone">
      ⁠</a>13.4. Cloning KDE Settings</h2></div></div></div>
		
		 <div class="para">
			If you're using <em class="firstterm">KDE4</em> on you're desktop, instead of configuring using the <code class="classname">System Settings</code> dialog, you can also move <code class="filename">/root/.kde/share/config</code> to <code class="filename">/root/.kde/share/config.bak</code> and copy your personal configured <code class="filename">.kde/share/config</code> directory to <code class="filename">/root/.kde/share</code>. As long as you're not using any non-standard KDE themes, this should just apply the favorite desktop settings you're familiar with to <span class="application"><strong>QluMan</strong></span> (restart of QluMan GUI required).
		</div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sec-Look-Feel-Widget">
      ⁠</a>13.5. Customizing the Widget Style</h2></div></div></div>
		
		 <div class="para">
			 Changing the widget style can be a little more involved. First you need to start the QT configurator <span class="application"><strong>qtconfig</strong></span> and choose a GUI style (default is QtCurve). The following assumes you're running <span class="application"><strong>qluman-qt</strong></span> on the head- or FE node. In case you have it installed on your workstation, just execute <span class="application"><strong>qtconfig</strong></span> there. 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $</code>
<code class="command">ssh -X root@servername qtconfig</code>
</pre>

		</div>
		 <div class="para">
			When you're done, select <span class="guimenuitem"><strong>File</strong></span>-&gt;<span class="guimenuitem"><strong>Save</strong></span> and you'll already see the changes. After this you can exit qtconfig. If you want further customization of the widget style (note that only some styles are configurable, among them QtCurve), you can now go back to the <code class="classname">Application Appearance</code> Dialog (see above), click on the <span class="guiicon"><strong>Style</strong></span> icon, choose the  style you've selected in qtconfig as <code class="literal">Widget style</code> and press the <span class="guibutton"><strong>Configure...</strong></span> button. You'll see a large number of options for customization. When you're satisfied with your modifications, press the <span class="guibutton"><strong>OK</strong></span> button and finally the <span class="guibutton"><strong>Apply</strong></span> button of the <code class="classname">Style - System Settings</code> window. Note, that you will see the resulting changes only after performing some actions (pressing a button, etc.) in the <span class="application"><strong>QluMan GUI</strong></span>.
		</div>
		 <div class="para">
			To have more options for changing the widget style from the default of QtCurve, you can install additional kde-style packages (.e.g <span class="package">kde-style-oxygen</span>) on the machine, where you're executing the <span class="application"><strong>QluMan GUI</strong></span>.
		</div>

	</div>
</div>
	  <div xml:lang="en-US" class="appendix" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139946984920672">
      ⁠</a>Appendix A. Revision History</h1></div></div></div>
	
	 <div class="revhistory"><table summary="Revision History"><tr><th align="left" valign="top" colspan="3"><strong>Revision History</strong></th></tr>
		<tr><td align="left">Revision 9.1-0</td><td align="left">Aug 27 2015</td><td align="left"><span class="author"><span class="firstname">Qlustar</span> <span class="surname">Doc Team</span></span></td></tr><tr><td align="left" colspan="3">
				<table border="0" summary="Simple list" class="simplelist"><tr><td>Initial version</td></tr></table>

			</td></tr>

	</table></div>
</div>
	 <div class="index"><div class="titlepage"><div><div><h1 class="title"><a id="idm139946984914896">
      ⁠</a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>F</h3><dl><dt>feedback</dt><dd><dl><dt>contact information for Qlustar, <a class="indexterm" href="#idm139946985825344">Feedback requested</a></dt></dl></dd></dl></div></div></div>
</div><div id="site_footer"></div><script type="text/javascript">
			$("#site_footer").load("../../../../../footer.html");
		</script></body></html>