<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title xmlns:d="http://docbook.org/ns/docbook">Quick Start Guides</title><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.0" /><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content="Qlustar_DataStack-Quick_Start_Guides-9.1-en-US-9.1-0" /><meta name="description" content="Quick start guides for the Qlustar DataStack components. Enables you to setup a basic working configuration with little effort and time." /><link rel="stylesheet" type="text/css" href="../../../../../chrome.css" /><link rel="stylesheet" type="text/css" href="../../../../../db4.css" /><link rel="stylesheet" type="text/css" href="../../../../../qlustar/en-US/css/brand.css" /><link rel="stylesheet" type="text/css" href="../../../../../print.css" media="print" /><script type="text/javascript" src="../../../../../jquery-1.7.1.min.js"></script><script type="text/javascript" src="../../../../labels.js"></script><script type="text/javascript" src="../../../../../toc.js"></script><script type="text/javascript">
		current_book = 'Quick_Start_Guides';
		current_version = '9.1';
		current_product = 'Qlustar_DataStack';
	   
                toc_path = '../../../..';
		loadMenu();
          </script></head><body class="toc_embeded "><div id="navigation"></div><div id="floatingtoc" class="hidden"></div><p id="title"><a class="left" href="https://qlustar.com"><img alt="Product Site" src="../../../../../qlustar/en-US/images//image_left.png" /></a><a class="right" href="http://qlustar.com/book/docs/main"><img alt="Documentation Site" src="../../../../../qlustar/en-US/images//image_right.png" /></a></p><ul class="docnav"><li class="home">Quick Start Guides</li></ul><div xml:lang="en-US" class="book" lang="en-US"><div class="titlepage"><div><div class="producttitle"><span xmlns:d="http://docbook.org/ns/docbook" class="productname">Qlustar DataStack</span> <span xmlns:d="http://docbook.org/ns/docbook" class="productnumber">9.1</span></div><div><h1 class="title"><a id="idm139836402214256"></a>Quick Start Guides</h1></div><div><h2 class="subtitle"> A collection of quick start guides for the components of the Qlustar DataStack. </h2></div><div><h3 class="corpauthor">
		<span class="inlinemediaobject"><img src="../../../../../qlustar/en-US/images/qlustar-logo.png" /></span>

	</h3></div><div><div xml:lang="en-US" class="authorgroup" lang="en-US">
	<div class="author"><h3 class="author"><span class="firstname">Qlustar</span> <span class="surname">Documentation Team</span></h3><div class="affiliation">
			<span xmlns:d="http://docbook.org/ns/docbook" class="orgname">Q-Leap Networks GmbH</span>

		</div><code class="email"><a class="email" href="mailto:qlustar-docs@q-leap.com">qlustar-docs@q-leap.com</a></code></div>
</div></div><div><div class="legalnotice"><a id="idm139836402209344"></a><h1 class="legalnotice">Legal Notice</h1>
	<div class="para">
		Copyright <span class="trademark"></span>©2015 Q-Leap Networks GmbH
	</div>
	<div class="para">
		This material may only be distributed subject to the terms and conditions set forth in the GNU Free Documentation License (GFDL), V1.2 or later (the latest version is presently available at http://www.gnu.org/licenses/fdl.txt).
	</div>
	<div class="para">
		The Qlustar license can be found at <code class="filename">/usr/share/qlustar/LICENSE.html</code> on an installed Qlustar head-node.
	</div>
</div></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p>
		<div class="para">
			Quick start guides for the Qlustar DataStack components. Enables you to setup a basic working configuration with little effort and time.
		</div>

	</div></div></div></div><div class="toc"><dl class="toc"><dt><span class="preface"><a href="#idm139836402211344">Preface</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139836402202768">1. Qlustar Document Conventions</a></span></dt><dd><dl><dt><span class="section"><a href="#idm139836431134576">1.1. Typographic Conventions</a></span></dt><dt><span class="section"><a href="#idm139836402200608">1.2. Pull-quote Conventions</a></span></dt><dt><span class="section"><a href="#idm139836402200352">1.3. Notes and Warnings</a></span></dt></dl></dd><dt><span class="section"><a href="#idm139836402152336">2. Feedback requested</a></span></dt></dl></dd><dt><span class="chapter"><a href="#idm139836402149040">1. BeeGFS on Qlustar - Quick Start</a></span></dt><dd><dl><dt><span class="section"><a href="#initial-config-tasks-on-head-nodes">1.1. Initial configuration tasks on the head-node</a></span></dt><dt><span class="section"><a href="#setting-meta-storage-nodes">1.2. Setting up BeeGFS meta and storage target on the storage nodes</a></span></dt></dl></dd><dt><span class="appendix"><a href="#idm139836402077904">A. Revision History</a></span></dt><dt><span class="index"><a href="#idm139836402072240">Index</a></span></dt></dl></div>
	
	 <div xml:lang="en-US" class="preface" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139836402211344">
      ⁠</a>Preface</h1></div></div></div>
	
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139836402202768">
      ⁠</a>1. Qlustar Document Conventions</h2></div></div></div>
	
	 <div class="para">
		Qlustar manuals use the following conventions to highlight certain words and phrases and draw attention to specific pieces of information.
	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139836431134576">
      ⁠</a>1.1. Typographic Conventions</h3></div></div></div>
		
		 <div class="para">
			Four typographic conventions are used to call attention to specific words and phrases. These conventions, and the circumstances they apply to, are as follows.
		</div>
		 <div class="para">
			<code class="literal">Mono-spaced Bold</code>
		</div>
		 <div class="para">
			Used to highlight system input, including shell commands, file names and paths. Also used to highlight keys and key combinations. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To see the contents of the file <code class="filename">my_next_bestselling_novel</code> in your current working directory, enter the <code class="command">cat my_next_bestselling_novel</code> command at the shell prompt and press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>

		</blockquote></div>
		 <div class="para">
			The above includes a file name, a shell command and a key, all presented in mono-spaced bold and all distinguishable thanks to context.
		</div>
		 <div class="para">
			Key combinations can be distinguished from an individual key by the plus sign that connects each part of a key combination. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Press <span class="keycap"><strong>Enter</strong></span> to execute the command.
			</div>
			 <div class="para">
				Press <span class="keycap"><strong>Ctrl</strong></span>+<span class="keycap"><strong>Alt</strong></span>+<span class="keycap"><strong>F2</strong></span> to switch to a virtual terminal.
			</div>

		</blockquote></div>
		 <div class="para">
			The first example highlights a particular key to press. The second example highlights a key combination: a set of three keys pressed simultaneously.
		</div>
		 <div class="para">
			If source code is discussed, class names, methods, functions, variable names and returned values mentioned within a paragraph will be presented as above, in <code class="literal">mono-spaced bold</code>. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				File-related classes include <code class="classname">filesystem</code> for file systems, <code class="classname">file</code> for files, and <code class="classname">dir</code> for directories. Each class has its own associated set of permissions.
			</div>

		</blockquote></div>
		 <div class="para">
			<span class="application"><strong>Proportional Bold</strong></span>
		</div>
		 <div class="para">
			This denotes words or phrases encountered on a system, including application names; dialog-box text; labeled buttons; check-box and radio-button labels; menu titles and submenu titles. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Choose <span class="guimenu"><strong>System</strong></span> → <span class="guisubmenu"><strong>Preferences</strong></span> → <span class="guimenuitem"><strong>Mouse</strong></span> from the main menu bar to launch <span class="application"><strong>Mouse Preferences</strong></span>. In the <span class="guilabel"><strong>Buttons</strong></span> tab, select the <span class="guilabel"><strong>Left-handed mouse</strong></span> check box and click <span class="guibutton"><strong>Close</strong></span> to switch the primary mouse button from the left to the right (making the mouse suitable for use in the left hand).
			</div>
			 <div class="para">
				To insert a special character into a <span class="application"><strong>gedit</strong></span> file, choose <span class="guimenu"><strong>Applications</strong></span> → <span class="guisubmenu"><strong>Accessories</strong></span> → <span class="guimenuitem"><strong>Character Map</strong></span> from the main menu bar. Next, choose <span class="guimenu"><strong>Search</strong></span> → <span class="guimenuitem"><strong>Find…</strong></span> from the <span class="application"><strong>Character Map</strong></span> menu bar, type the name of the character in the <span class="guilabel"><strong>Search</strong></span> field and click <span class="guibutton"><strong>Next</strong></span>. The character you sought will be highlighted in the <span class="guilabel"><strong>Character Table</strong></span>. Double-click this highlighted character to place it in the <span class="guilabel"><strong>Text to copy</strong></span> field and then click the <span class="guibutton"><strong>Copy</strong></span> button. Now switch back to your document and choose <span class="guimenu"><strong>Edit</strong></span> → <span class="guimenuitem"><strong>Paste</strong></span> from the <span class="application"><strong>gedit</strong></span> menu bar.
			</div>

		</blockquote></div>
		 <div class="para">
			The above text includes application names; system-wide menu names and items; application-specific menu names; and buttons and text found within a GUI interface, all presented in proportional bold and all distinguishable by context.
		</div>
		 <div class="para">
			<code class="command"><em class="replaceable">Mono-spaced Bold Italic</em></code> or <span class="application"><strong><em class="replaceable">Proportional Bold Italic</em></strong></span>
		</div>
		 <div class="para">
			Whether mono-spaced bold or proportional bold, the addition of italics indicates replaceable or variable text. Italics denotes text you do not input literally or displayed text that changes depending on circumstance. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				To connect to a remote machine using ssh, type <code class="command">ssh <em class="replaceable">username</em>@<em class="replaceable">domain.name</em></code> at a shell prompt. If the remote machine is <code class="filename">example.com</code> and your username on that machine is john, type <code class="command">ssh john@example.com</code>.
			</div>
			 <div class="para">
				The <code class="command">mount -o remount <em class="replaceable">file-system</em></code> command remounts the named file system. For example, to remount the <code class="filename">/home</code> file system, the command is <code class="command">mount -o remount /home</code>.
			</div>
			 <div class="para">
				To see the version of a currently installed package, use the <code class="command">rpm -q <em class="replaceable">package</em></code> command. It will return a result as follows: <code class="command"><em class="replaceable">package-version-release</em></code>.
			</div>

		</blockquote></div>
		 <div class="para">
			Note the words in bold italics above: username, domain.name, file-system, package, version and release. Each word is a placeholder, either for text you enter when issuing a command or for text displayed by the system.
		</div>
		 <div class="para">
			Aside from standard usage for presenting the title of a work, italics denotes the first use of a new and important term. For example:
		</div>
		 <div class="blockquote"><blockquote class="blockquote">
			<div class="para">
				Publican is a <em class="firstterm">DocBook</em> publishing system.
			</div>

		</blockquote></div>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139836402200608">
      ⁠</a>1.2. Pull-quote Conventions</h3></div></div></div>
		
		 <div class="para">
			Terminal output and source code listings are set off visually from the surrounding text.
		</div>
		 <div class="para">
			Output sent to a terminal is set in <code class="computeroutput">mono-spaced roman</code> and presented thus:
		</div>
		 
<pre class="screen">books        Desktop   documentation  drafts  mss    photos   stuff  svn
books_tests  Desktop1  downloads      images  notes  scripts  svgs
</pre>
		 <div class="para">
			Commands to be executed on certain nodes of a cluster or the admins workstation are indicated by using descriptive shell prompts including user and hostname. Note that by default, the shell prompt on Qlustar nodes always ends in the newline character, thus commands are typed on the line following the prompt. As mentioned above, the command itself is shown in <code class="computeroutput">mono-spaced bold</code> and the output of a command in <code class="computeroutput">mono-spaced roman</code>. Examples:
		</div>
		 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">echo "I'm executed by root on a head-node"</code>
I'm executed by root on a head-node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@beo-01 ~ #</code>
<code class="command">echo "I'm executed by root on a compute node"</code>
I'm executed by root on a compute node
</pre>
		 
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">echo "I'm executed by root on a storage node"</code>
I'm executed by root on a storage node
</pre>
		 
<pre class="screen">
<code class="prompt">0 user@workstation ~ $ </code>
<code class="command">echo "I'm executed by user admin on the admins workstation"</code>
I'm executed by user admin on the admins workstation
</pre>
		 <div class="para">
			Source-code listings are also set in <code class="computeroutput">mono-spaced roman</code> but add syntax highlighting as follows:
		</div>
		 <pre xml:lang="en-US" class="programlisting" lang="en-US"><span xmlns="" class="line">​</span>package org.<span xmlns="" class="perl_Function">jboss</span>.<span xmlns="" class="perl_Function">book</span>.<span xmlns="" class="perl_Function">jca</span>.<span xmlns="" class="perl_Function">ex1</span>;
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">import javax.naming.InitialContext;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_Keyword">class</span> ExClient
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>   <span xmlns="" class="perl_Keyword">public</span> <span xmlns="" class="perl_DataType">static</span> <span xmlns="" class="perl_DataType">void</span> <span xmlns="" class="perl_Function">main</span>(String args[]) 
<span xmlns="" class="line">​</span>       <span xmlns="" class="perl_Keyword">throws</span> Exception
<span xmlns="" class="line">​</span>   {
<span xmlns="" class="line">​</span>      InitialContext iniCtx = <span xmlns="" class="perl_Keyword">new</span> InitialContext();
<span xmlns="" class="line">​</span>      Object         ref    = iniCtx.<span xmlns="" class="perl_Function">lookup</span>(<span xmlns="" class="perl_String">"EchoBean"</span>);
<span xmlns="" class="line">​</span>      EchoHome       home   = (EchoHome) ref;
<span xmlns="" class="line">​</span>      Echo           echo   = home.<span xmlns="" class="perl_Function">create</span>();
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Created Echo"</span>);
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>      System.<span xmlns="" class="perl_Function">out</span>.<span xmlns="" class="perl_Function">println</span>(<span xmlns="" class="perl_String">"Echo.echo('Hello') = "</span> + echo.<span xmlns="" class="perl_Function">echo</span>(<span xmlns="" class="perl_String">"Hello"</span>));
<span xmlns="" class="line">​</span>   }
<span xmlns="" class="line">​</span>}</pre>

	</div>
	 <div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm139836402200352">
      ⁠</a>1.3. Notes and Warnings</h3></div></div></div>
		
		 <div class="para">
			Finally, we use three visual styles to draw attention to information that might otherwise be overlooked.
		</div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
			<div class="para">
				Notes are tips, shortcuts or alternative approaches to the task at hand. Ignoring a note should have no negative consequences, but you might miss out on a trick that makes your life easier.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition">
			<div class="para">
				Important boxes detail things that are easily missed: configuration changes that only apply to the current session, or services that need restarting before an update will apply. Ignoring a box labeled “Important” will not cause data loss but may cause irritation and frustration.
			</div>

		</div></div>
		 <div xmlns:d="http://docbook.org/ns/docbook" class="warning"><div class="admonition_header"><p><strong>Warning</strong></p></div><div class="admonition">
			<div class="para">
				Warnings should not be ignored. Ignoring warnings will most likely cause data loss.
			</div>

		</div></div>

	</div>
</div>
	 <div xml:lang="en-US" class="section" lang="en-US"><div class="titlepage"><div><div><h2 class="title"><a id="idm139836402152336">
      ⁠</a>2. Feedback requested</h2></div></div></div>
	
	<a id="idm139836402151216" class="indexterm"></a>
	<div class="para">
		Contact <code class="email"><a class="email" href="mailto:qlustar-docs@qlustar.com">qlustar-docs@qlustar.com</a></code> to report errors or missing pieces in this documentation.
	</div>
</div>
</div>
	 <div xml:lang="en-US" class="chapter" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139836402149040">
      ⁠</a>Chapter 1. BeeGFS on Qlustar - Quick Start</h1></div></div></div><div class="toc"><dl class="toc"><dt><span class="section"><a href="#initial-config-tasks-on-head-nodes">1.1. Initial configuration tasks on the head-node</a></span></dt><dt><span class="section"><a href="#setting-meta-storage-nodes">1.2. Setting up BeeGFS meta and storage target on the storage nodes</a></span></dt></dl></div>
	
	 <div class="para">
		<a href="http://www.beegfs.com/___blank___">BeeGFS</a> (formerly FhGFS) is a <span class="emphasis"><em>parallel cluster file system</em></span><a id="idm139836402146848" class="indexterm"></a>, developed and maintained by the Fraunhofer Center for High Performance Computing with a strong focus on performance and designed for very easy installation and management. It transparently spreads user data across multiple servers. By increasing the number of servers and disks in the system, you can simply scale performance and capacity of the file system to the level that you need.
	</div>
	 <div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition">
		<div class="para">
			BeeGFS is a <span class="emphasis"><em>non-free</em></span> but fully integrated component of Qlustar. If used in any Qlustar context other than the <a href="https://qlustar.com/content/qlustar-basic-edition___blank___">Basic Edition</a>, a specific BeeGFS support contract has to be purchased from Q-Leap Networks.
		</div>

	</div></div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="initial-config-tasks-on-head-nodes">
      ⁠</a>1.1. Initial configuration tasks on the head-node</h2></div></div></div>
		
		 <div class="task"><a id="sec-install-beegfs">
      ⁠</a><p class="title"><strong>Select BeeGFS mgmt option upon installation</strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ul><li class="step">
				<div class="para">
					Check that it is running on the head-node 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">/etc/init.d/beegfs-mgmtd status</code>
</pre>

				</div>

			</li></ul></div></div> <div class="task"><a id="sec-setting-up-beegfs">
      ⁠</a><p class="title"><strong>Setting up a BeeGFS server node in QluMan</strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step">
				<p class="title"><strong>Create a Qlustar image with the required modules</strong></p>
				 <div class="para">
					In QluMan, create an image (named e.g. <em class="parameter"><code>StorNode</code></em>) that contains the module <code class="literal">beegfs-<em class="replaceable">version</em>-server</code> (current version 2014.01). If you want to mount the BeeGFS FS also on the storage nodes additionaly include the <code class="literal">beegfs-<em class="replaceable">version</em>-client</code> module. On compute nodes that don't run any BeeGFS meta/storage targets, only the <code class="literal">beegfs-<em class="replaceable">version</em>-client</code> module is required.
				</div>

			</li><li class="step">
				<p class="title"><strong>Create a boot config with this image</strong></p>
				 <div class="para">
					Create a new <code class="classname">boot config</code> (named e.g. <em class="parameter"><code>StorNode</code></em>) and select the image just created. If necessary, add kernel parameters to the <code class="classname">boot config</code> as well.
				</div>

			</li><li class="step">
				<p class="title"><strong>Create a config set that includes this boot config</strong></p>
				 <div class="para">
					Create a new <code class="classname">config set</code> (named e.g. <em class="parameter"><code>StorNode</code></em>) and add the <code class="classname">boot config</code> (<em class="parameter"><code>StorNode</code></em>) just created.
				</div>

			</li><li class="step">
				<p class="title"><strong>Create a disk config for the storage nodes</strong></p>
				 <div class="para">
					Create a new <code class="classname">disk config</code> (named e.g. <em class="parameter"><code>StorNode</code></em>) to define the <em class="firstterm">ZFS</em> setup.
				</div>
				 <ol class="substeps a">
					<li class="step">
						<p class="title"><strong>Examples</strong></p>
						 <ol class="substeps i">
							<li class="step">
								<p class="title"><strong>Create a BeeGFS FS using the local disks of compute nodes</strong></p>
								 <div class="para">
									A single SSD in the compute nodes is to be used for a meta and storage target.
								</div>
								 <div class="para">
									Copy the definitions of the default <code class="classname">disk config</code> and add bmeta/bstor as follows: 
<pre class="screen">
ZFS = var, scratch, bmeta, bstor
[bmeta]
zpool = SYS
mountpoint = /beegfs/meta
compress = lz4
[bstor]
zpool = SYS
mountpoint = /beegfs/stor
compress = lz4
</pre>

								</div>

							</li>

						</ol>

					</li>

				</ol>
				 <div class="para">
					Add the new <code class="classname">disk config</code> to the new <code class="classname">config set</code> (<em class="parameter"><code>StorNode</code></em>)
				</div>

			</li><li class="step">
				<p class="title"><strong>Create a new host template with the above definitions</strong></p>
				 <div class="para">
					Create a new host template (named e.g. <em class="parameter"><code>StorNode</code></em>) and select the just created <code class="classname">config set</code> <em class="parameter"><code>StorNode</code></em>. Use (or create) a sensible generic/hardware property set matching the properties of the storage nodes.
				</div>

			</li><li class="step">
				<p class="title"><strong>Register and boot the storage nodes</strong></p>
				 <div class="para">
					Register the storage nodes like any other nodes and assign the just created host template (<em class="parameter"><code>StorNode</code></em>) to them. Reboot them. After they come up again, you should see the following ZFS filesystems mounted:
				</div>
				 
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">df -h | grep -E '^Filesystem|beegfs'</code>
Filesystem                  Size  Used Avail Use% Mounted on
SYS/bmeta                  1002T     0 1002T   0% /beegfs/meta
SYS/bstor                  1002T     0 1002T   0% /beegfs/stor
</pre>
				 <div class="important"><div class="admonition_header"><p><strong>Important</strong></p></div><div class="admonition">
					<div class="para">
						Note that by default, every new host has the generic QluMan property <em class="parameter"><code>Schedule Format: always</code></em>, which is required to format the disk on the first boot. After the initial boot of a node with the desired disk config in place, you should remove this property or set <em class="parameter"><code>Schedule Format: never</code></em> to prevent repeated reformatting and hence losing data.
					</div>

				</div></div>

			</li></ol></div></div>
	</div>
	 <div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="setting-meta-storage-nodes">
      ⁠</a>1.2. Setting up BeeGFS meta and storage target on the storage nodes</h2></div></div></div>
		
		 <div class="para">
			On each storage node perform the following steps (We assume that the above disk config <em class="parameter"><code>StorNode</code></em> is initialized on each node. We further assume that the servers are named as <code class="systemitem">sn-1</code>, <code class="systemitem">sn-2</code>, ... such that <code class="envar">${HOSTNAME##*-}</code> is the storage node number):
		</div>
		 <div class="task"><a id="create-server-instance">
      ⁠</a><p class="title"><strong> Create Metadata server instance </strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step">
				<p class="title"><strong> Initialize meta target </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">beegfs-setup-meta -p /beegfs/meta -s ${HOSTNAME##*-} -m beosrv-c</code>
Preparing storage directory: /beegfs/meta
 * Creating format.conf file...
 * Creating server numeric ID file: /beegfs/meta/nodeNumID
Updating config file: /etc/beegfs/meta/available/default.conf
 * Setting management host: beosrv-c
 * Setting storage directory in config file...
 * Disabling usage of uninitialized storage directory in config file...
 * Setting usage of extended attributes to: true
All done.
</pre>

				</div>

			</li><li class="step">
				<p class="title"><strong> Start meta server </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">/etc/init.d/beegfs-meta start</code>
</pre>

				</div>

			</li><li class="step">
				<p class="title"><strong> Check meta status </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">/etc/init.d/beegfs-meta status</code>

<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">less /var/log/beegfs/beegfs-meta.log</code>
</pre>

				</div>

			</li></ol></div></div> <div class="task"><a id="create-storage-server-inst">
      ⁠</a><p class="title"><strong> Create Storage server instance </strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step">
				<p class="title"><strong> Initialize storage target </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">beegfs-setup-storage -p /beegfs/stor -s ${HOSTNAME##*-} \
-i ${HOSTNAME##*-}01 -m beosrv-c</code>
Preparing storage target directory: /beegfs/storage
 * Creating format.conf file...
 * Creating chunks directory...
 * Creating mirror directory...
 * Creating target numeric ID file: /beegfs/storage/targetNumID
 * Creating server numeric ID file: /beegfs/storage/nodeNumID
Updating config file: /etc/beegfs/storage/available/default.conf
 * Setting management host: beosrv-c
 * Appending to target directory list in config file...
 * Disabling usage of uninitialized storage targets in config file...
All done.
</pre>

				</div>

			</li><li class="step">
				<p class="title"><strong> Start storage server </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">/etc/init.d/beegfs-storage start</code>
</pre>

				</div>

			</li><li class="step">
				<p class="title"><strong> Check storage status </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">/etc/init.d/beegfs-storage status</code>

<code class="prompt">0 root@sn-1 ~ #</code>
<code class="command">less /var/log/beegfs/beegfs-storage.log</code>
</pre>

				</div>

			</li></ol></div></div> <div class="task"><a id="register-config-file">
      ⁠</a><p class="title"><strong> Register the config files on the head-node for automatic start on boot </strong></p><div xmlns:d="http://docbook.org/ns/docbook" class="procedure"><ol class="1"><li class="step">
				<p class="title"><strong> Retrieve config files </strong></p>
				 <div class="para">
					Retrieve the config files from the first storage node <code class="systemitem">sn-1</code> (the configs on different nodes are all identical): 
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">mkdir -p /etc/qlustar/common/image-files/beegfs/{meta,storage}</code>

<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">scp sn-1:/etc/beegfs/meta/available/default.conf \
/etc/qlustar/common/image-files/beegfs/meta/default.conf</code>

<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">scp sn-1:/etc/beegfs/storage/available/default.conf \
/etc/qlustar/common/image-files/beegfs/storage/default.conf</code>
</pre>

				</div>

			</li><li class="step">
				<p class="title"><strong> Generate the Qlustar destination files </strong></p>
				 <div class="para">
					
<pre class="screen">
<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">cat &lt;&lt;EOF &gt; /etc/qlustar/common/image-files/destinations.beegfs-server
beegfs/meta/default.conf /etc/beegfs/meta/available root:root 644
beegfs/storage/default.conf /etc/beegfs/storage/available root:root 644
EOF</code>

<code class="prompt">0 root@cl-head ~ #</code>
<code class="command">cat &lt;&lt;EOF &gt; /etc/qlustar/common/image-files/destinations.beegfs-client
# Link source                  target
../available/default.conf /etc/beegfs/client/enabled
EOF</code>

<code class="prompt"> 0 root@cl-head ~ #</code>
<code class="command">cat &lt;&lt;EOF &gt; /etc/qlustar/common/image-files/softgroups
[DEFAULT]

beegfs-server: sn-[1-4]
beegfs-client: beo-20[1-4] login-c
EOF</code>
</pre>
					 Their beegfs role is assigned to the nodes in <code class="filename">/etc/qlustar/common/image-files/softgroups</code>. Change the node names there according to your naming scheme.
				</div>

			</li></ol></div></div> <div class="para">
			With these configurations in place, BeeGFS server and clients should start/mount automatically upon boot. The default client mount point is <code class="filename">/beegfs/client/default</code>.
		</div>

	</div>
</div>
	 <div xml:lang="en-US" class="appendix" lang="en-US"><div class="titlepage"><div><div><h1 class="title"><a id="idm139836402077904">
      ⁠</a>Appendix A. Revision History</h1></div></div></div>
	
	 <div class="revhistory"><table summary="Revision History"><tr><th align="left" valign="top" colspan="3"><strong>Revision History</strong></th></tr>
		<tr><td align="left">Revision 9.1-0</td><td align="left">Thu Jul 2 2015</td><td align="left"><span class="author"><span class="firstname">Qlustar</span> <span class="surname">Doc Team</span></span></td></tr><tr><td align="left" colspan="3">
				<table border="0" summary="Simple list" class="simplelist"><tr><td>Initial version</td></tr></table>

			</td></tr>

	</table></div>
</div>
	 <div class="index"><div class="titlepage"><div><div><h1 class="title"><a id="idm139836402072240">
      ⁠</a>Index</h1></div></div></div><div class="index"><div class="indexdiv"><h3>C</h3><dl><dt>Cluster FS</dt><dd><dl><dt>BeeGFS, <a class="indexterm" href="#idm139836402149040">BeeGFS on Qlustar - Quick Start</a></dt></dl></dd></dl></div><div class="indexdiv"><h3>F</h3><dl><dt>feedback</dt><dd><dl><dt>contact information for Qlustar, <a class="indexterm" href="#idm139836402152336">Feedback requested</a></dt></dl></dd></dl></div></div></div>
</div><div id="site_footer"></div><script type="text/javascript">
			$("#site_footer").load("../../../../../footer.html");
		</script></body></html>